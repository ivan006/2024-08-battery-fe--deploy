import{_ as B,x as m,e as r,d as p,w as t,R as S,s as n,E as Q,O as x,S as g,T as I,L as y,N as L,U as V,W as O,v as w,o as T,X as A,J as f,Y as U,Z as W,G as $,$ as G,a0 as F,a1 as q,A as v,q as J,u as H,a2 as R,a as D,a3 as P,K as k,a4 as M,a5 as K,a6 as j,V as N,r as X,t as Y,a7 as z}from"./vendor.js";const Z=Object.assign({name:"EssentialLink"},{__name:"EssentialLink",props:{title:{type:String,required:!0},caption:{type:String,default:""},route:{type:String,default:null},external:{type:String,default:null},icon:{type:String,default:""},activeRoute:{type:String,required:!0},indent:{type:Boolean,default:!1}},setup(u,{expose:s}){s();const a=u,e=m(()=>a.route&&a.route===a.activeRoute),o={props:a,isActive:e,computed:m};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}});function ee(u,s,a,e,o,d){return e.props.route?(r(),p(O,{key:0,clickable:"",tag:"router-link",to:e.props.route,"active-class":"q-item--highlighted",class:V({"q-item--active":e.isActive,"q-pl-lg":e.props.indent})},{default:t(()=>[e.props.icon?(r(),p(S,{key:0,avatar:""},{default:t(()=>[n(Q,{name:e.props.icon},null,8,["name"])]),_:1})):x("",!0),n(S,null,{default:t(()=>[n(g,{style:I(e.isActive?"font-weight: bold;":"")},{default:t(()=>[y(L(e.props.title),1)]),_:1},8,["style"]),e.props.caption?(r(),p(g,{key:0,caption:""},{default:t(()=>[y(L(e.props.caption),1)]),_:1})):x("",!0)]),_:1})]),_:1},8,["to","class"])):(r(),p(O,{key:1,clickable:"",tag:"a",href:e.props.external,target:"_blank",class:V({"q-ml-md":e.props.indent})},{default:t(()=>[e.props.icon?(r(),p(S,{key:0,avatar:""},{default:t(()=>[n(Q,{name:e.props.icon},null,8,["name"])]),_:1})):x("",!0),n(S,null,{default:t(()=>[n(g,null,{default:t(()=>[y(L(e.props.title),1)]),_:1}),e.props.caption?(r(),p(g,{key:0,caption:""},{default:t(()=>[y(L(e.props.caption),1)]),_:1})):x("",!0)]),_:1})]),_:1},8,["href","class"]))}const te=B(Z,[["render",ee],["__file","EssentialLink.vue"]]),ae={__name:"MainLayoutHelper",setup(u,{expose:s}){s();const a=w(!1),e=()=>{a.value=window.innerWidth<=1151},o=w(!1);function d(){o.value=!o.value}T(()=>{e(),window.addEventListener("resize",e)}),A(()=>{window.removeEventListener("resize",e)});const l={isSmallScreen:a,checkScreenWidth:e,leftDrawerOpen:o,toggleLeftDrawer:d,ref:w,onMounted:T,onUnmounted:A};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}},re={class:"q-px-md"},ne={class:"q-pb-md"},oe={key:1,class:"row no-wrap"},se={class:"",style:{width:"300px","border-right":"1px solid rgba(0, 0, 0, 0.12)"}},le={class:"",style:{flex:"1",overflow:"auto","background-color":"#F8F8F8","min-height":"100vh"}},ue={class:"q-pa-md container-md"};function ie(u,s,a,e,o,d){return r(),f("div",null,[e.isSmallScreen?(r(),p(J,{key:0,view:"lHh Lpr lFf",style:{"background-color":"#F8F8F8","padding-bottom":"50px"}},{default:t(()=>[n(U,{elevated:"",style:{"background-color":"rgb(0, 31, 63)"}},{default:t(()=>[n(W,null,{default:t(()=>[n($,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:e.toggleLeftDrawer})]),_:1})]),_:1}),n(G,{modelValue:e.leftDrawerOpen,"onUpdate:modelValue":s[0]||(s[0]=l=>e.leftDrawerOpen=l),"show-if-above":"",bordered:""},{default:t(()=>[n(F,null,{default:t(()=>[n(g,{header:""},{default:t(()=>[y(" Â  ")]),_:1}),q(u.$slots,"menu")]),_:3})]),_:3},8,["modelValue"]),v("div",re,[v("div",ne,[q(u.$slots,"default")])])]),_:3})):(r(),f("div",oe,[v("div",se,[n(F,{style:{"padding-top":"10px"}},{default:t(()=>[q(u.$slots,"menu")]),_:3})]),v("div",le,[v("div",ue,[q(u.$slots,"default")])])]))])}const ce=B(ae,[["render",ie],["__file","MainLayoutHelper.vue"]]),de={__name:"BreadcrumbsComp",setup(u,{expose:s}){s();const a=H(),e=R(),o=D();function d(c){return typeof c=="string"?c.replace(/^\//,""):""}const l=m(()=>a.$db().model("routeLineages").query().get()),i=c=>{o.push({name:c,params:e.params,query:e.query})},_=m(()=>o.resolve(e.path)),b=m(()=>{const c=_.value.matched[_.value.matched.length-1];d(c.path);const h=a.$db().model("routeLineages").query().where("name",c.name).first();return h?h.lineage.map(C=>a.$db().model("routeLineages").query().where("name",C).first()):[]}),E={store:a,route:e,router:o,standardizePath:d,lineages:l,goToRoute:i,routeMatch:_,breadcrumbs:b,getBreadcrumbLabel:c=>{if(c){const h=c.label.match(/:(\w+)/);if(h){const C=h[1];return e.params[C]||c.label}return c.label}return""},get useStore(){return H},computed:m,get useRoute(){return R},get useRouter(){return D}};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}};function pe(u,s,a,e,o,d){return r(),f("div",null,[n(K,{class:"q-mt-md"},{default:t(()=>[n(P,{class:"text-subtitle2",label:"Home",to:{path:"/"}}),(r(!0),f(k,null,M(e.breadcrumbs,(l,i)=>(r(),p(P,{class:"text-subtitle2",key:i,label:e.getBreadcrumbLabel(l),onClick:_=>e.goToRoute(l.name)},null,8,["label","onClick"]))),128))]),_:1})])}const _e=B(de,[["render",pe],["__file","BreadcrumbsComp.vue"]]),me=Object.assign({name:"MainLayout"},{__name:"MainLayout",setup(u,{expose:s}){s();const a=R(),e=w(a.path);j(a,b=>{e.value=b.path});const o=m(()=>N.get("VITE_AUTH")),d=`/lists/users/${o.value.user.id}/${o.value.user.name}`,l=[{title:"Events",route:"/lists/events"},{title:"Schools",route:"/lists/schools"},{title:"Users",route:"/lists/users"},{title:"My Account",route:d}];function i(b){e.value=b}const _={route:a,activeRoute:e,session:o,myAccount:d,linksList:l,updateActiveRoute:i,computed:m,ref:w,watch:j,get useRoute(){return R},EssentialLink:te,MainLayoutHelper:ce,BreadcrumbsComp:_e,get VueCookies(){return N}};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),fe={class:"q-mb-md"};function ve(u,s,a,e,o,d){const l=X("router-view");return r(),p(e.MainLayoutHelper,null,{menu:t(()=>[(r(),f(k,null,M(e.linksList,i=>(r(),f(k,{key:i.title||i.groupTitle},[i.groupTitle?(r(),f(k,{key:0},[n(g,{header:""},{default:t(()=>[y(L(i.groupTitle),1)]),_:2},1024),(r(!0),f(k,null,M(i.links,_=>(r(),p(e.EssentialLink,z({key:_.title,ref_for:!0},_,{"active-route":e.activeRoute,indent:!0}),null,16,["active-route"]))),128))],64)):(r(),p(e.EssentialLink,z({key:1,ref_for:!0},i,{"active-route":e.activeRoute,indent:!1}),null,16,["active-route"]))],64))),64))]),default:t(()=>[n(Y,null,{default:t(()=>[v("div",fe,[n(e.BreadcrumbsComp)]),n(l,{onRouteChanged:e.updateActiveRoute})]),_:1})]),_:1})}const be=B(me,[["render",ve],["__file","MainLayout.vue"]]);export{be as default};

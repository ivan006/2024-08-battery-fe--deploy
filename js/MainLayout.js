import{_ as R,d as w,x as _,e as l,I as m,s as t,w as r,N,O as S,R as V,c as g,E as Q,L as B,K as v,S as T,T as U,U as W,J as y,v as b,o as A,W as O,X as G,Y as $,Z as z,$ as D,G as J,a0 as K,a1 as X,a2 as k,A as f,q as Y,u as F,a3 as x,a4 as I,a5 as H,a6 as Z,a7 as P,V as M,r as ee,t as te,a8 as j}from"./vendor.js";const ae=Object.assign({name:"EssentialLink"},{__name:"EssentialLink",props:{title:{type:String,required:!0},caption:{type:String,default:""},route:{type:String,default:null},function:{type:Function,default:()=>{}},external:{type:String,default:null},icon:{type:String,default:""},activeRoute:{type:String,required:!0},indent:{type:Boolean,default:!1}},setup(c,{expose:i}){i();const n=w(),e=c,a=_(()=>e.route&&e.route===e.activeRoute),s={router:n,props:e,isActive:a,click:()=>{e.route?n.push({path:e.route}):e.function()},computed:_,get useRouter(){return w}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function re(c,i,n,e,a,p){return l(),m(y,null,[t(W,{clickable:"",tag:e.props.external?"a":"router-link",href:e.props.external,onClick:e.click,target:"_blank","active-class":"q-item--highlighted",class:U({"q-pl-lg":e.props.indent}),style:V(e.isActive?"background-color: rgba(0, 31, 63, 0.1)":"")},{default:r(()=>[t(N,null,{default:r(()=>[t(S,{style:V(e.isActive?"font-weight: bold;":"")},{default:r(()=>[e.props.icon?(l(),g(Q,{key:0,name:e.props.icon,size:"sm",style:{opacity:"50%"}},null,8,["name"])):B("",!0),v(" "+T(e.props.title),1)]),_:1},8,["style"]),e.props.caption?(l(),g(S,{key:0,caption:""},{default:r(()=>[v(T(e.props.caption),1)]),_:1})):B("",!0)]),_:1})]),_:1},8,["tag","href","class","style"]),B("",!0)],64)}const ne=R(ae,[["render",re],["__file","EssentialLink.vue"]]),oe={__name:"MainLayoutHelper",setup(c,{expose:i}){i();const n=b(!1),e=()=>{n.value=window.innerWidth<=1151},a=b(!1);function p(){a.value=!a.value}A(()=>{e(),window.addEventListener("resize",e)}),O(()=>{window.removeEventListener("resize",e)});const s={isSmallScreen:n,checkScreenWidth:e,leftDrawerOpen:a,toggleLeftDrawer:p,ref:b,onMounted:A,onUnmounted:O};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}},se={class:"q-px-md"},le={class:"q-pb-md"},ie={class:"container-md row no-wrap items-center bg-primary text-white"},ue={class:"container-md"},ce={class:"q-px-md"},de={class:"q-pb-md"};function pe(c,i,n,e,a,p){return l(),m("div",null,[e.isSmallScreen?(l(),g(Y,{key:0,view:"lHh Lpr lFf",style:{"background-color":"#F8F8F8","padding-bottom":"50px"}},{default:r(()=>[t(G,{elevated:"",style:{},class:"bg-primary"},{default:r(()=>[t($,null,{default:r(()=>[t(z,null,{default:r(()=>[t(Q,{name:"school",size:"lg",style:{opacity:"50%"}})]),_:1}),t(D,null,{default:r(()=>[v("Home-Ed Community Hub")]),_:1}),t(J,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:e.toggleLeftDrawer})]),_:1})]),_:1}),t(K,{modelValue:e.leftDrawerOpen,"onUpdate:modelValue":i[0]||(i[0]=s=>e.leftDrawerOpen=s),"show-if-above":"",bordered:"",side:"right"},{default:r(()=>[t(X,null,{default:r(()=>[t(S,{header:""},{default:r(()=>[v(" Â  ")]),_:1}),k(c.$slots,"menu")]),_:3})]),_:3},8,["modelValue"]),f("div",se,[f("div",le,[k(c.$slots,"default")])])]),_:3})):(l(),m(y,{key:1},[t($,{class:"bg-primary text-white"},{default:r(()=>[f("div",ie,[t(z,null,{default:r(()=>[t(Q,{name:"school",size:"lg",style:{opacity:"50%"}})]),_:1}),t(D,null,{default:r(()=>[v("Home-Ed Community Hub")]),_:1}),k(c.$slots,"menu")])]),_:3}),f("div",ue,[f("div",ce,[f("div",de,[k(c.$slots,"default")])])])],64))])}const _e=R(oe,[["render",pe],["__file","MainLayoutHelper.vue"]]),me={__name:"BreadcrumbsComp",setup(c,{expose:i}){i();const n=F(),e=x(),a=w();function p(d){return typeof d=="string"?d.replace(/^\//,""):""}const s=_(()=>n.$db().model("routeLineages").query().get()),u=d=>{a.push({name:d,params:e.params,query:e.query})},o=_(()=>a.resolve(e.path)),C=_(()=>{const d=o.value.matched[o.value.matched.length-1];p(d.path);const h=n.$db().model("routeLineages").query().where("name",d.name).first();return h?h.lineage.map(E=>n.$db().model("routeLineages").query().where("name",E).first()):[]}),L={store:n,route:e,router:a,standardizePath:p,lineages:s,goToRoute:u,routeMatch:o,breadcrumbs:C,getBreadcrumbLabel:d=>{if(d){const h=d.label.match(/:(\w+)/);if(h){const E=h[1];return e.params[E]||d.label}return d.label}return""},get useStore(){return F},computed:_,get useRoute(){return x},get useRouter(){return w}};return Object.defineProperty(L,"__isScriptSetup",{enumerable:!1,value:!0}),L}};function fe(c,i,n,e,a,p){return l(),m("div",null,[t(Z,{class:"q-mt-md"},{default:r(()=>[t(I,{class:"text-subtitle2",label:"Home",to:{path:"/"}}),(l(!0),m(y,null,H(e.breadcrumbs,(s,u)=>(l(),g(I,{class:"text-subtitle2",key:u,label:e.getBreadcrumbLabel(s),onClick:o=>e.goToRoute(s.name)},null,8,["label","onClick"]))),128))]),_:1})])}const ye=R(me,[["render",fe],["__file","BreadcrumbsComp.vue"]]),ge=Object.assign({name:"MainLayout"},{__name:"MainLayout",setup(c,{expose:i}){i();const n=x(),e=b(n.path);P(n,o=>{e.value=o.path});const a=_(()=>M.get("VITE_AUTH")),p=_(()=>{const o=[{icon:"event",title:"Events",route:"/lists/events"},{icon:"school",title:"Schools",route:"/lists/schools"}];if(a.value){const C=`/lists/users/${a.value.user.id}/${a.value.user.name}`;if(a.value.user.primary_family_id){const q=a.value.user.primary_family,L=`/lists/families/${q.id}/${q.name}`;o.push({icon:"book",title:"My Family",route:L})}o.push({icon:"person",title:"My Account",route:C}),o.push({icon:"logout",title:"Logout",function:()=>{M.remove("VITE_AUTH"),window.location.href="/"}})}else o.push({icon:"person",title:"Login",route:"/login"}),o.push({icon:"edit",title:"Register",route:"/register"});return o});function s(o){e.value=o}const u={route:n,activeRoute:e,session:a,linksList:p,updateActiveRoute:s,computed:_,ref:b,watch:P,get useRoute(){return x},EssentialLink:ne,MainLayoutHelper:_e,BreadcrumbsComp:ye,get VueCookies(){return M}};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}}),ve={class:"q-mb-md"};function he(c,i,n,e,a,p){const s=ee("router-view");return l(),g(e.MainLayoutHelper,null,{menu:r(()=>[(l(!0),m(y,null,H(e.linksList,u=>(l(),m(y,{key:u.title||u.groupTitle},[u.groupTitle?(l(),m(y,{key:0},[t(S,{header:""},{default:r(()=>[v(T(u.groupTitle),1)]),_:2},1024),(l(!0),m(y,null,H(u.links,o=>(l(),g(e.EssentialLink,j({key:o.title,ref_for:!0},o,{"active-route":e.activeRoute,indent:!0}),null,16,["active-route"]))),128))],64)):(l(),g(e.EssentialLink,j({key:1,ref_for:!0},u,{"active-route":e.activeRoute,indent:!1}),null,16,["active-route"]))],64))),128))]),default:r(()=>[t(te,null,{default:r(()=>[f("div",ve,[t(e.BreadcrumbsComp)]),t(s,{onRouteChanged:e.updateActiveRoute})]),_:1})]),_:1})}const Le=R(ge,[["render",he],["__file","MainLayout.vue"]]);export{Le as default};

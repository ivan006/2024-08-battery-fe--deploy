import{_ as b,ab as L,ac as w,r as P,e as x,c as k,I as H,s as v,w as S,H as F}from"./vendor.js";import{A}from"./index.js";const K={name:"Attendance-list",components:{SuperTable:L},props:{parentKeyValuePair:{type:Object,default:()=>({})},colWidth:{type:Number,default:()=>3},fetchFlags:{type:Object,default:()=>({})}},data(){return{templateListGrid:{colWidth:this.colWidth,cols:[{width:12,class:"q-pa-md q-col-gutter-sm",cols:[{width:12,dataPoint:{type:"function",function:t=>`${t.event.name}`,label:"",tag:"div",class:"text-h6",hideLabel:!0}},{width:12,dataPoint:{type:"function",function:t=>`${this.formatCasualTime(t.event.start_datetime,t.event.end_datetime).comingUpHint}`,label:"Count Down",xOrientation:!0}},{width:12,dataPoint:{type:"function",function:t=>`${this.formatCasualTime(t.event.start_datetime,t.event.end_datetime).range}`,label:"Date",xOrientation:!0}},{width:12,dataPoint:{type:"function",function:t=>`${this.formatCasualTime(t.event.start_datetime,t.event.end_datetime).duration}`,label:"Duration",xOrientation:!0}},{width:12,dataPoint:{field:"event",xOrientation:!0}},{width:12,dataPoint:{field:"child",xOrientation:!0}},{width:12,dataPoint:{hideLabel:!0,field:"actions"}}]}]}}},computed:{superTableModel(){return A}},methods:{openRecord(t,m,o){o.push({name:"/lists/attendances/:rId/:rName",params:{rId:t,rName:t}})},formatCasualTime(t,m){const o=w(),a=w(t),n=w(m),s=a.format("HH:mm"),i=n.format("HH:mm"),c=a.format("ddd"),f=n.format("ddd"),h=a.format("MMM Do"),$=n.format("MMM Do"),D=a.year(),M=n.year(),p=n.diff(a,"minutes"),y=p/60,_=y/24,T=_/7;let u;if(p<60){const e=Math.round(p/30)*.5;u=`~${e} minute${e!==1?"s":""}`}else if(y<24){const e=Math.round(y*2)/2;u=`~${e} hour${e!==1?"s":""}`}else if(_<7){const e=Math.round(_*2)/2;u=`~${e} day${e!==1?"s":""}`}else{const e=Math.round(T*2)/2;u=`~${e} week${e!==1?"s":""}`}const C=a.isBefore(o.clone().add(6,"days"));let l="";a.isSame(n,"day")?l=a.isSame(o,"day")?`Today, ${s} - ${i}`:`${c}, ${s} - ${i}`:C?l=`${c}, ${s} - ${f}, ${i}`:a.isSame(n,"month")?l=`${h}, ${c}, ${s} - ${$}, ${f}, ${i}`:a.isSame(n,"year")?l=`${h}, ${c}, ${s} - ${$}, ${f}, ${M}, ${i}`:l=`${h}, ${c}, ${D}, ${s} - ${$}, ${f}, ${M}, ${i}`;const r=a.diff(o,"minutes"),g=n.diff(o,"minutes");let d="";if(g<0)d="Event has finished";else if(r<=0&&g>=0)d="Event is happening now";else if(r<60){const e=Math.round(r/30)*.5;d=`~${e} minute${e!==1?"s":""} from now`}else if(r<1440){const e=Math.round(r/60*2)/2;d=`~${e} hour${e!==1?"s":""} from now`}else if(r<10080){const e=Math.round(r/1440*2)/2;d=`~${e} day${e!==1?"s":""} from now`}else if(r<43800){const e=Math.round(r/10080*2)/2;d=`~${e} week${e!==1?"s":""} from now`}else{const e=Math.round(r/43800*2)/2;d=`~${e} month${e!==1?"s":""} from now`}return{range:l,duration:u,comingUpHint:d}}}};function V(t,m,o,a,n,s){const i=P("SuperTable");return x(),k(i,{showMap:!0,model:s.superTableModel,onClickRow:s.openRecord,displayMapField:!1,parentKeyValuePair:o.parentKeyValuePair,fetchFlags:o.fetchFlags,templateListGrid:n.templateListGrid,viewAs:{show:["grid","calendar"],default:"calendar"},allowedFilters:["child_id","school_id"]},null,8,["model","onClickRow","parentKeyValuePair","fetchFlags","templateListGrid"])}const W=b(K,[["render",V],["__file","AttendanceList.vue"]]),N={name:"Attendance-list-controller",components:{attendanceList:W},data(){return{parentKeyValuePair:{},fetchFlags:{}}}};function O(t,m,o,a,n,s){const i=P("attendanceList");return x(),H("div",null,[v(F,{class:"q-pa-md q-mt-md"},{default:S(()=>[v(i,{parentKeyValuePair:n.parentKeyValuePair,fetchFlags:n.fetchFlags},null,8,["parentKeyValuePair","fetchFlags"])]),_:1})])}const U=b(N,[["render",O],["__file","AttendanceListController.vue"]]);export{U as default};

import{n as v,a5 as L,a7 as M,_ as g,r as b,d as D,e as S,H as k,p as H}from"./vendor.js";import{E as F}from"./index.js";const V={name:"Event-list",components:{SuperTable:L},props:{parentKeyValuePair:{type:Object,default:()=>({})},fetchFlags:{type:Object,default:()=>({})}},computed:{superTableModel(){return F}},methods:{openRecord(t,m,o){o.push({name:"/lists/events/:rId/:rName",params:{rId:t,rName:t}})},formatCasualTime(t,m){const o=M(),a=M(t),n=M(m),r=a.format("HH:mm"),s=n.format("HH:mm"),u=a.format("ddd"),f=n.format("ddd"),p=a.format("MMM Do"),h=n.format("MMM Do"),E=a.year(),w=n.year(),$=n.diff(a,"minutes"),_=$/60,y=_/24,T=y/7;let c;if($<60){const e=Math.round($/30)*.5;c=`~${e} minute${e!==1?"s":""}`}else if(_<24){const e=Math.round(_*2)/2;c=`~${e} hour${e!==1?"s":""}`}else if(y<7){const e=Math.round(y*2)/2;c=`~${e} day${e!==1?"s":""}`}else{const e=Math.round(T*2)/2;c=`~${e} week${e!==1?"s":""}`}const x=a.isBefore(o.clone().add(6,"days"));let l="";a.isSame(n,"day")?l=a.isSame(o,"day")?`Today, ${r} - ${s}`:`${u}, ${r} - ${s}`:x?l=`${u}, ${r} - ${f}, ${s}`:a.isSame(n,"month")?l=`${p}, ${u}, ${r} - ${h}, ${f}, ${s}`:a.isSame(n,"year")?l=`${p}, ${u}, ${r} - ${h}, ${f}, ${w}, ${s}`:l=`${p}, ${u}, ${E}, ${r} - ${h}, ${f}, ${w}, ${s}`;const i=a.diff(o,"minutes"),P=n.diff(o,"minutes");let d="";if(P<0)d="Event has finished";else if(i<=0&&P>=0)d="Event is happening now";else if(i<60){const e=Math.round(i/30)*.5;d=`~${e} minute${e!==1?"s":""} from now`}else if(i<1440){const e=Math.round(i/60*2)/2;d=`~${e} hour${e!==1?"s":""} from now`}else if(i<10080){const e=Math.round(i/1440*2)/2;d=`~${e} day${e!==1?"s":""} from now`}else if(i<43800){const e=Math.round(i/10080*2)/2;d=`~${e} week${e!==1?"s":""} from now`}else{const e=Math.round(i/43800*2)/2;d=`~${e} month${e!==1?"s":""} from now`}return{range:l,duration:c,comingUpHint:d}}},data(){return{templateListGrid:{cols:[{width:12,dataPoint:{type:"component",componentPath:()=>g(()=>import("./EventImage.js"),["js/EventImage.js","js/vendor.js","css/vendor.css"]),label:"",hideLabel:!0}},{width:12,class:"q-pa-md q-col-gutter-sm",cols:[{width:12,dataPoint:{type:"function",function:t=>`${t.name}`,label:"",tag:"div",class:"text-h6",hideLabel:!0}},{width:12,dataPoint:{type:"function",function:t=>`${this.formatCasualTime(t.start_datetime,t.end_datetime).comingUpHint}`,label:"Count Down",xOrientation:!0}},{width:12,dataPoint:{type:"function",function:t=>`${this.formatCasualTime(t.start_datetime,t.end_datetime).range}`,label:"Date",xOrientation:!0}},{width:12,dataPoint:{type:"function",function:t=>`${this.formatCasualTime(t.start_datetime,t.end_datetime).duration}`,label:"Duration",xOrientation:!0}},{width:12,dataPoint:{label:"School",field:"school",xOrientation:!0}},{width:12,dataPoint:{type:"component",componentPath:()=>g(()=>import("./EventButtonAttend.js"),["js/EventButtonAttend.js","js/vendor.js","css/vendor.css","js/index.js"]),label:"",class:"text-right ",hideLabel:!0}}]}]}}}};function C(t,m,o,a,n,r){const s=b("SuperTable");return D(),S(s,{showMap:!0,model:r.superTableModel,onClickRow:r.openRecord,displayMapField:!1,parentKeyValuePair:o.parentKeyValuePair,templateListGrid:n.templateListGrid,fetchFlags:o.fetchFlags,viewAs:{hide:!0,default:"grid"},allowedFilters:[]},null,8,["model","onClickRow","parentKeyValuePair","templateListGrid","fetchFlags"])}var K=v(V,[["render",C]]);const O={name:"Event-list-controller",components:{eventList:K},data(){return{parentKeyValuePair:{},fetchFlags:{}}}};function R(t,m,o,a,n,r){const s=b("eventList");return D(),k("div",null,[H(s,{parentKeyValuePair:n.parentKeyValuePair,fetchFlags:n.fetchFlags},null,8,["parentKeyValuePair","fetchFlags"])])}var W=v(O,[["render",R]]);export{W as default};

const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/EventImage.js","js/vendor.js","css/vendor.css","js/EventButtonAttend.js","js/index.js","css/index.css"])))=>i.map(i=>d[i]);
import{_ as g,ab as T,ac as w,h as M,r as v,e as x,c as E,I as S,s as O}from"./vendor.js";import{E as k}from"./index.js";const H={name:"Event-list",components:{SuperTable:T},props:{noBorder:{type:Boolean,default:()=>!1},parentKeyValuePair:{type:Object,default:()=>({})},fetchFlags:{type:Object,default:()=>({})}},computed:{superTableModel(){return k}},methods:{openRecord(t,m,o){o.push({name:"/lists/events/:rId/:rName",params:{rId:t,rName:t}})},formatCasualTime(t,m){const o=w(),n=w(t),a=w(m),i=n.format("HH:mm"),r=a.format("HH:mm"),u=n.format("ddd"),f=a.format("ddd"),h=n.format("MMM Do"),p=a.format("MMM Do"),L=n.year(),b=a.year(),$=a.diff(n,"minutes"),_=$/60,y=_/24,C=y/7;let c;if($<60){const e=Math.round($/30)*.5;c=`~${e} minute${e!==1?"s":""}`}else if(_<24){const e=Math.round(_*2)/2;c=`~${e} hour${e!==1?"s":""}`}else if(y<7){const e=Math.round(y*2)/2;c=`~${e} day${e!==1?"s":""}`}else{const e=Math.round(C*2)/2;c=`~${e} week${e!==1?"s":""}`}const D=n.isBefore(o.clone().add(6,"days"));let l="";n.isSame(a,"day")?l=n.isSame(o,"day")?`Today, ${i} - ${r}`:`${u}, ${i} - ${r}`:D?l=`${u}, ${i} - ${f}, ${r}`:n.isSame(a,"month")?l=`${h}, ${u}, ${i} - ${p}, ${f}, ${r}`:n.isSame(a,"year")?l=`${h}, ${u}, ${i} - ${p}, ${f}, ${b}, ${r}`:l=`${h}, ${u}, ${L}, ${i} - ${p}, ${f}, ${b}, ${r}`;const s=n.diff(o,"minutes"),P=a.diff(o,"minutes");let d="";if(P<0)d="Event has finished";else if(s<=0&&P>=0)d="Event is happening now";else if(s<60){const e=Math.round(s/30)*.5;d=`~${e} minute${e!==1?"s":""} from now`}else if(s<1440){const e=Math.round(s/60*2)/2;d=`~${e} hour${e!==1?"s":""} from now`}else if(s<10080){const e=Math.round(s/1440*2)/2;d=`~${e} day${e!==1?"s":""} from now`}else if(s<43800){const e=Math.round(s/10080*2)/2;d=`~${e} week${e!==1?"s":""} from now`}else{const e=Math.round(s/43800*2)/2;d=`~${e} month${e!==1?"s":""} from now`}return{range:l,duration:c,comingUpHint:d}}},data(){return{templateListGrid:{cols:[{width:12,dataPoint:{type:"component",componentPath:()=>M(()=>import("./EventImage.js"),__vite__mapDeps([0,1,2])),label:"",hideLabel:!0}},{width:12,class:"q-pa-md q-col-gutter-sm",cols:[{width:12,dataPoint:{type:"function",function:t=>`${t.name}`,label:"",tag:"div",class:"text-h6",hideLabel:!0}},{width:12,dataPoint:{type:"function",function:t=>`${this.formatCasualTime(t.start_datetime,t.end_datetime).comingUpHint}`,label:"Count Down",xOrientation:!0}},{width:12,dataPoint:{type:"function",function:t=>`${this.formatCasualTime(t.start_datetime,t.end_datetime).range}`,label:"Date",xOrientation:!0}},{width:12,dataPoint:{type:"function",function:t=>`${this.formatCasualTime(t.start_datetime,t.end_datetime).duration}`,label:"Duration",xOrientation:!0}},{width:12,dataPoint:{label:"School",field:"school",xOrientation:!0}},{width:12,dataPoint:{type:"component",componentPath:()=>M(()=>import("./EventButtonAttend.js"),__vite__mapDeps([3,1,2,4,5])),label:"",class:"text-right ",hideLabel:!0}},{width:12,dataPoint:{hideLabel:!0,field:"actions"}}]}]},templateListCalendar:{cols:[{width:12,class:"q-pa-sm q-col-gutter-xs text-caption",cols:[{width:12,class:"text-caption",dataPoint:{type:"function",function:t=>`${t.name}`,label:"",tag:"div",class:"text-subtitle2",hideLabel:!0}},{width:12,dataPoint:{type:"function",function:t=>`${this.formatCasualTime(t.start_datetime,t.end_datetime).comingUpHint}`,label:"Count Down",xOrientation:!0}},{width:12,dataPoint:{type:"function",function:t=>`${this.formatCasualTime(t.start_datetime,t.end_datetime).range}`,label:"Date",xOrientation:!0}},{width:12,dataPoint:{type:"function",function:t=>`${this.formatCasualTime(t.start_datetime,t.end_datetime).duration}`,label:"Duration",xOrientation:!0}},{width:12,dataPoint:{type:"function",function:t=>t.school.name,label:"School",xOrientation:!0}}]}]}}}};function F(t,m,o,n,a,i){const r=v("SuperTable");return x(),E(r,{showMap:!0,model:i.superTableModel,onClickRow:i.openRecord,displayMapField:!1,parentKeyValuePair:o.parentKeyValuePair,fetchFlags:o.fetchFlags,templateListGrid:a.templateListGrid,templateListCalendar:a.templateListCalendar,viewAs:{show:["grid","calendar","map"],default:"calendar"},allowedFilters:["start_datetime"],noBorder:o.noBorder},null,8,["model","onClickRow","parentKeyValuePair","fetchFlags","templateListGrid","templateListCalendar","noBorder"])}const V=g(H,[["render",F],["__file","EventList.vue"]]),B={name:"Event-list-controller",components:{eventList:V},data(){return{parentKeyValuePair:{},fetchFlags:{}}}};function K(t,m,o,n,a,i){const r=v("eventList");return x(),S("div",null,[O(r,{parentKeyValuePair:a.parentKeyValuePair,fetchFlags:a.fetchFlags},null,8,["parentKeyValuePair","fetchFlags"])])}const U=g(B,[["render",K],["__file","EventListController.vue"]]);export{U as default};

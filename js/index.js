const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/SuperTable.js","js/vendor.js","css/vendor.css","js/EmptyLayout.js","js/LoginPageOld.js","js/guestRegistration.js","css/guestRegistration.css","js/MainLayout.js","js/SigninView.js","js/JoinView.js","js/AboutController.js","js/AttendanceListController.js","js/Helpers.js","js/AttendanceReadController.js","js/SuperRecord.js","js/ChildListController.js","js/ChildList.js","js/ChildReadController.js","js/EventListController.js","js/EventReadController.js","js/FailedJobListController.js","js/FailedJobReadController.js","js/FamilyListController.js","js/FamilyList.js","js/FamilyReadController.js","js/SchoolFamilyEnrollmentList.js","js/FamilyLinkList.js","js/SectionComponent.js","js/FamilyLinkListController.js","js/FamilyLinkReadController.js","js/MigrationListController.js","js/MigrationReadController.js","js/PasswordResetTokenListController.js","js/PasswordResetTokenReadController.js","js/PersonalAccessTokenListController.js","js/PersonalAccessTokenReadController.js","js/PostTagListController.js","js/PostTagReadController.js","js/PostListController.js","js/PostReadController.js","js/SchoolFamilyEnrollmentListController.js","js/SchoolFamilyEnrollmentReadController.js","js/JobListController.js","js/JobList.js","js/JobReadController.js","js/SchoolListController.js","js/SchoolList.js","js/SchoolReadController.js","js/TagListController.js","js/TagReadController.js","js/UserListController.js","js/UserReadController.js","js/ErrorNotFound.js","js/qcalendar.js","js/store.js","js/vuex-orm-axios.js"])))=>i.map(i=>d[i]);
var ft=Object.defineProperty;var yt=(l,e,t)=>e in l?ft(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var d=(l,e,t)=>yt(l,typeof e!="symbol"?e+"":e,t);import{M as bt,o as Be,i as Re,a as Ye,b as ze,c as b,u as Ge,d as Qe,r as F,e as o,f as y,g as gt,h as be,j as h,k as m,w as p,l as L,t as k,Q as Ne,m as S,n as E,p as P,_ as T,A as lt,q as M,s as q,v as re,x as J,y as _e,z as We,B as Ce,C as He,D as Ue,E as _t,L as Tt,F as rt,H as St,G as Vt,I as Et,J as Ft,K as Dt,R as At,N as It,O as Ut,U as vt,S as kt,P as Rt,T as Ot,V as Me,W as Je,X as Ee,Y as xt,Z as st,$ as Se,a0 as it,a1 as V,a2 as Mt,a3 as wt,a4 as Pt,a5 as ye,a6 as Te,a7 as Nt,a8 as w,a9 as $e,aa as j,ab as Y,ac as fe,ad as Ze,ae as Ct,af as Ht,ag as Lt,ah as Wt,ai as Kt,aj as qt,ak as nt,al as jt,am as Bt,an as dt,ao as Yt,ap as zt,aq as Gt,ar as we,as as Xe,at as et,au as Qt,av as Jt,aw as $t,ax as Zt,ay as tt,az as Xt,aA as ea,aB as _,aC as ta,aD as aa,aE as la,aF as ra,aG as sa,aH as ia,aI as na}from"./vendor.js";class Ke extends bt{static fields(){return{id:this.attr(null).nullable(),name:this.attr(""),label:this.attr(""),parent:this.attr(null),lineage:this.attr([])}}}d(Ke,"entity","routeLineages");function Ie(l){return typeof l=="string"?l.replace(/^\//,""):""}function da(l){const e={};function t(r,a=""){const s=Ie(a+"/"+Ie(r.path));e[s]=r,r.children&&r.children.length>0&&r.children.forEach(n=>t(n,s))}return l.forEach(r=>t(r)),e}function oa(l,e){var n,i,u;Ie(l.path);const t=[];let r=l;for(;r;){const c=r.name||"";if(t.includes(c))break;t.unshift(c);const f=((n=r.meta)==null?void 0:n.breadcrumbParentName)||null;if(!f)break;r=(f?e[Ie(f)]:null)||null}const s={label:((i=l.meta)==null?void 0:i.breadcrumbName)||"",name:l.name||"",parent:(u=l.meta)!=null&&u.breadcrumbParentName?Ie(l.meta.breadcrumbParentName):null,lineage:t};Ke.insert({data:s})}function at(l){console.log("Generating route lineages...");const e=da(l);Object.values(e).forEach(t=>{oa(t,e)}),console.log("Route lineages generated.")}const O=(l,e)=>{const t=l.__vccOpts||l;for(const[r,a]of e)t[r]=a;return t},ua=Object.assign({name:"App"},{__name:"App",setup(l,{expose:e}){e(),Be(()=>{Ge();const r=Qe();Re.use(Ye,{axios:ze,baseURL:"http://aiv-team-2.0.test/api"}),r&&r.options&&r.options.routes?at(r.options.routes):console.error("Router is not properly initialized or routes are not accessible.")});const t={onMounted:Be,get useStore(){return Ge},get useRouter(){return Qe},get VuexORM(){return Re},get VuexORMAxios(){return Ye},get axios(){return ze},get generateRouteLineages(){return at}};return Object.defineProperty(t,"__isScriptSetup",{enumerable:!1,value:!0}),t}});function ma(l,e,t,r,a,s){const n=F("router-view");return o(),b(n)}const ca=O(ua,[["render",ma],["__file","App.vue"]]);y.extend(gt);y.extend(be);const ha={name:"CreateButton",props:{createButtonText:{type:String,default:""},model:{type:[Object,Function],required:!0},superOptions:{type:Object,default(){return{headers:[],modelFields:[],displayMapField:!1,model:{},canEdit:!1,currentParentRecord:{}}}}},computed:{canCreate(){return!1},canCreateMsgType(){return""},canCreatePart2(){return this.canCreate},canEdit(){return this.model.rules.creatable()},canCreateMsg(){return this.getMsg(this.canCreateMsgType)}},methods:{emitCreateItem(l){this.$emit("createItem",l)},getMsg(l){return""}},mounted(){}};function pa(l,e,t,r,a,s){return o(),h("div",null,[m(P,{onClick:s.emitCreateItem,disable:!s.canEdit,outline:""},{default:p(()=>[L(k(t.createButtonText?t.createButtonText:"New")+" ",1),s.canCreateMsg.length?(o(),b(Ne,{key:0,bottom:"",disable:s.canCreatePart2},{default:p(()=>[S("span",null,k(s.canCreateMsg),1)]),_:1},8,["disable"])):E("",!0)]),_:1},8,["onClick","disable"])])}const ot=O(ha,[["render",pa],["__file","CreateButton.vue"]]),fa={name:"RelationComponent",components:{SuperTable:()=>T(()=>import("./SuperTable.js").then(l=>l.b),__vite__mapDeps([0,1,2]))},props:{hideLabel:{type:Boolean,default(){return!1}},configs:{type:Object,default:()=>({})},lookup:{type:Number,default:null},modelValue:{type:Number,default:null},readonly:{type:Boolean,default:!1},rules:{type:Array,default(){return[()=>!0]}}},data(){return{showRelationDialog:!1,newlookup:{}}},computed:{isNullable(){return this.configs.meta.field.parent.fields()[this.foreignKey].isNullable},displayNameField(){const l=this.configs.meta.field.parent.fields();return Object.keys(l).find(e=>e!=="id"&&l[e]instanceof lt)},computedValue:{get(){let l="";const e=this.configs.meta.field.parent.query().whereId(+this.modelValue).get();return e.length&&(l=e[0][this.configs.meta.lookupDisplayField]),l},set(l){this.$emit("update:modelValue",l)}}},methods:{input(l){this.newlookup=l,this.showRelationDialog=!1,this.$emit("update:modelValue",l.id)},click(){this.readonly||(this.showRelationDialog=!0)}}},ya=S("div",{class:"text-h6"},"Select Item",-1);function ba(l,e,t,r,a,s){const n=F("SuperTable");return o(),h("div",null,[m(M,{onClick:s.click,label:t.configs.label,modelValue:s.computedValue,rules:t.configs.meta.rules,error:!1,"error-message":"",readonly:"",disable:t.readonly,outlined:"",dense:""},null,8,["onClick","label","modelValue","rules","disable"]),m(J,{modelValue:a.showRelationDialog,"onUpdate:modelValue":e[0]||(e[0]=i=>a.showRelationDialog=i),"max-width":"800px"},{default:p(()=>[m(q,null,{default:p(()=>[m(re,null,{default:p(()=>[ya]),_:1}),m(re,null,{default:p(()=>[m(n,{isForSelectingRelation:!0,canEdit:!1,modelValue:t.modelValue,"onUpdate:modelValue":s.input,model:t.configs.meta.field.parent,rules:t.rules},null,8,["modelValue","onUpdate:modelValue","model","rules"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const ut=O(fa,[["render",ba],["__file","RelationComponent.vue"]]);y.extend(be);y.extend(_e);const ga={name:"DateRangePicker",props:{hideLabel:{type:Boolean,default:!1},modelValue:{type:String,default:null}},data(){return{showDialog:!1,showStartDatePicker:!1,showEndDatePicker:!1,showStartTimePicker:!1,showEndTimePicker:!1,startDate:null,endDate:null,startTime:null,endTime:null,selectedTimezone:"Africa/Johannesburg",duration:120}},computed:{formattedValue(){return this.formattedStartDate&&this.formattedStartTime&&this.formattedEndTime?this.startDate===this.endDate?`${this.formattedStartDate} 
${this.formattedStartTime} - ${this.formattedEndTime} (${this.selectedTimezone})`:`${this.formattedStartDate} ${this.formattedStartTime} -
${this.formattedEndDate} ${this.formattedEndTime} (${this.selectedTimezone})`:""},formattedStartDate(){return this.startDate?y(this.startDate).tz(this.selectedTimezone).format("dddd, MMMM D, YYYY"):""},formattedEndDate(){return this.endDate?y(this.endDate).tz(this.selectedTimezone).format("dddd, MMMM D, YYYY"):""},formattedStartTime(){return this.startTime?y(this.startTime,"HH:mm:ss").tz(this.selectedTimezone).format("h:mm A"):""},formattedEndTime(){return this.endTime?y(this.endTime,"HH:mm:ss").tz(this.selectedTimezone).format("h:mm A"):""},dateTimeRange(){return this.formattedStartDate&&this.formattedStartTime&&this.formattedEndTime?`${this.formattedStartDate} 
 ${this.formattedStartTime} - ${this.formattedEndTime} (Africa/Johannesburg)`:null}},methods:{parseTstzrange(l){const e=l.match(/\[(.*?),(.*)\]/);if(e){const t=y(e[1]).tz(this.selectedTimezone),r=y(e[2]).tz(this.selectedTimezone);this.detectDuration(t.format("HH:mm:ss"),r.format("HH:mm:ss")),this.startDate=t.format("YYYY-MM-DD"),this.startTime=t.format("HH:mm:ss"),this.endDate=r.format("YYYY-MM-DD"),this.endTime=r.format("HH:mm:ss")}},setDefaultStartTime(){this.showStartDatePicker=!1;const l=y().tz(this.selectedTimezone).startOf("hour").add(1,"hour");this.startTime=l.format("HH:mm:ss"),this.endDate=this.startDate},getTimestampsForDatabase(){const l=y(`${this.startDate} ${this.startTime}`).tz(this.selectedTimezone).toISOString(),e=y(`${this.endDate} ${this.endTime}`).tz(this.selectedTimezone).toISOString();return`[${l}, ${e}]`},finalizeDateTimeRange(){const l=this.getTimestampsForDatabase();this.$emit("update:modelValue",l),this.showDialog=!1},manuallyChangedEndTime(l){this.detectDuration(this.startTime,l)},detectDuration(l,e){this.duration=y(e,"HH:mm:ss").diff(y(l,"HH:mm:ss"),"minutes")}},watch:{startTime(l){this.endTime=y(l,"HH:mm:ss").add(this.duration,"minutes").format("HH:mm:ss")}},mounted(){this.parseTstzrange(this.modelValue)}},_a=S("div",{class:"text-h6"},"Start",-1),Ta=S("div",{class:"text-h6"},"End",-1);function Sa(l,e,t,r,a,s){return o(),b(_t,null,{default:p(()=>[m(M,{label:"Select Date Range",readonly:"",onClick:e[0]||(e[0]=n=>a.showDialog=!0),modelValue:s.formattedValue,"onUpdate:modelValue":e[1]||(e[1]=n=>s.formattedValue=n),error:!1,"error-message":"",filled:""},{append:p(()=>[m(We,{name:"event"})]),_:1},8,["modelValue"]),m(J,{modelValue:a.showDialog,"onUpdate:modelValue":e[18]||(e[18]=n=>a.showDialog=n),"max-width":"500px"},{default:p(()=>[m(q,{class:"q-pa-md"},{default:p(()=>[S("div",null,[_a,m(M,{label:"Start Date",modelValue:s.formattedStartDate,"onUpdate:modelValue":e[2]||(e[2]=n=>s.formattedStartDate=n),error:!1,"error-message":"",readonly:"",onClick:e[3]||(e[3]=n=>a.showStartDatePicker=!0),filled:""},null,8,["modelValue"]),m(J,{modelValue:a.showStartDatePicker,"onUpdate:modelValue":e[5]||(e[5]=n=>a.showStartDatePicker=n),"max-width":"290px"},{default:p(()=>[m(Ce,{modelValue:a.startDate,"onUpdate:modelValue":[e[4]||(e[4]=n=>a.startDate=n),s.setDefaultStartTime],error:!1,"error-message":""},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["modelValue"]),m(M,{label:"Start Time",modelValue:s.formattedStartTime,"onUpdate:modelValue":e[6]||(e[6]=n=>s.formattedStartTime=n),error:!1,"error-message":"",readonly:"",onClick:e[7]||(e[7]=n=>a.showStartTimePicker=!0),filled:""},null,8,["modelValue"]),m(J,{modelValue:a.showStartTimePicker,"onUpdate:modelValue":e[9]||(e[9]=n=>a.showStartTimePicker=n),"max-width":"290px"},{default:p(()=>[m(He,{modelValue:a.startTime,"onUpdate:modelValue":e[8]||(e[8]=n=>a.startTime=n)},null,8,["modelValue"])]),_:1},8,["modelValue"])]),S("div",null,[Ta,m(M,{label:"End Date",modelValue:s.formattedEndDate,"onUpdate:modelValue":e[10]||(e[10]=n=>s.formattedEndDate=n),error:!1,"error-message":"",readonly:"",onClick:e[11]||(e[11]=n=>a.showEndDatePicker=!0),filled:""},null,8,["modelValue"]),m(J,{modelValue:a.showEndDatePicker,"onUpdate:modelValue":e[13]||(e[13]=n=>a.showEndDatePicker=n),"max-width":"290px"},{default:p(()=>[m(Ce,{modelValue:a.endDate,"onUpdate:modelValue":e[12]||(e[12]=n=>a.endDate=n)},null,8,["modelValue"])]),_:1},8,["modelValue"]),m(M,{label:"End Time",modelValue:s.formattedEndTime,"onUpdate:modelValue":e[14]||(e[14]=n=>s.formattedEndTime=n),error:!1,"error-message":"",readonly:"",onClick:e[15]||(e[15]=n=>a.showEndTimePicker=!0),filled:""},null,8,["modelValue"]),m(J,{modelValue:a.showEndTimePicker,"onUpdate:modelValue":e[17]||(e[17]=n=>a.showEndTimePicker=n),"max-width":"290px"},{default:p(()=>[m(He,{modelValue:a.endTime,"onUpdate:modelValue":[e[16]||(e[16]=n=>a.endTime=n),s.manuallyChangedEndTime]},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["modelValue"])]),m(Ue,{align:"right"},{default:p(()=>[m(P,{flat:"",label:"OK",color:"primary",onClick:s.finalizeDateTimeRange},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const mt=O(ga,[["render",Sa],["__file","DateAndTimeRangePicker.vue"]]),Va={name:"SearchGooglePlace",props:{hideLabel:{type:Boolean,default:!1},modelValue:{type:String,default:null},configs:{type:Object,default:()=>({})}},data(){return{showDialog:!1,retries:0,place:null,internalModelValue:this.modelValue}},watch:{modelValue(l){this.internalModelValue=l},showDialog(l){l&&this.initGoogleMaps()}},methods:{emitPlaceChanged(l){this.$emit("placeSelected",l),this.place=l,l.geometry&&(this.internalModelValue=l.name,this.$emit("update:modelValue",l.name))},initGoogleMaps(){new Tt({apiKey:"AIzaSyAENUjZ_P7ulkAcDb-U8Htn6VSv_ioEKWEx",libraries:["places"]}).load().then(()=>{const e=this.$refs.autocompleteInput.$el.querySelector("input"),t=new google.maps.places.Autocomplete(e);t.addListener("place_changed",()=>{const r=t.getPlace();this.emitPlaceChanged(r)})}).catch(e=>{console.error("Failed to load Google Maps API:",e)})}}},Ea=S("div",{class:"text-subtitle1"},"Search Place",-1);function Fa(l,e,t,r,a,s){return o(),h("div",null,[m(M,{label:t.configs.label,modelValue:a.internalModelValue,"onUpdate:modelValue":e[0]||(e[0]=n=>a.internalModelValue=n),error:!1,"error-message":"",onClick:e[1]||(e[1]=n=>a.showDialog=!0),readonly:"",filled:"",dense:""},null,8,["label","modelValue"]),m(J,{modelValue:a.showDialog,"onUpdate:modelValue":e[4]||(e[4]=n=>a.showDialog=n)},{default:p(()=>[m(q,{style:{width:"700px","max-width":"calc(-32px + 100vw)"}},{default:p(()=>[m(re,null,{default:p(()=>[Ea,m(M,{class:"CustomPlaceSearch",label:"Place",modelValue:a.internalModelValue,"onUpdate:modelValue":e[2]||(e[2]=n=>a.internalModelValue=n),error:!1,"error-message":"",ref:"autocompleteInput",outlined:"",dense:""},null,8,["modelValue"])]),_:1}),m(Ue,{align:"right"},{default:p(()=>[m(P,{color:"primary",onClick:e[3]||(e[3]=n=>a.showDialog=!1)},{default:p(()=>[L("OK")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const ct=O(Va,[["render",Fa],["__file","SearchGooglePlace.vue"]]);class te{static snakeToTitle(e){return e.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(" ")}static getIfMatchesAllChecks(e,t){for(const[r,a]of Object.entries(t))if(typeof a=="object"&&!Array.isArray(a)&&a!==null){if(a&&a.usageType==="timeRangeStart"&&a.range.start){const s=new Date(a.range.start),n=new Date(a.range.end),i=new Date(e[r]);return s<i&&i<n}}else if(a!==null)return e[r]==a;return!0}static prepareFiltersForSupabase(e){let t=[];for(const[r,a]of Object.entries(e))typeof a=="object"&&!Array.isArray(a)&&a!==null?a&&a.usageType==="timeRangeStart"&&a.range.start&&(t.push(`${r}=gte.${a.range.start}`),t.push(`${r}=lte.${a.range.end}`)):a!==null&&t.push(`${r}=eq.${a}`);return t.join("&")}static prepareFiltersForLaravel(e){const t={};for(const[r,a]of Object.entries(e))typeof a=="object"&&a!==null?a&&a.range&&(a.range.start&&(t[`filter[${r}-ge]`]=a.range.start),a.range.end&&(t[`filter[${r}-le]`]=a.range.end)):a===0||a!==null&&(t[`filter[${r}]`]=a);return t}static getFieldFromModelOrParent(e,t){let r=null;return r=Object.values(e).find(a=>a.usageType===t),r?r.field:(Object.values(e).forEach(a=>{if(a.headerParentFields){const s=a.headerParentFields.find(n=>n.usageType===t);s&&(r=s.name)}}),r)}static prepareRelationsForSupabase(e){let t=["*"];for(const a of e)t.push(`${a}(*)`);return{select:t.join(",")}}static prepareRelationsForLaravel(e){let t=[];for(const a of e)t.push(a);return{include:t.join(",")}}static capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}}class Ve extends rt{static fields(){return{id:this.uid(null),fields:this.attr([])}}static Generate(e){let t=e.fields(),r=[],a=[],s={};for(const i in t){let u=t[i];const c=te.snakeToTitle(i);let f="normal",g=!1,U={};e.fieldsMetadata&&e.fieldsMetadata[i]&&(e.fieldsMetadata[i].usageType&&(f=e.fieldsMetadata[i].usageType),e.fieldsMetadata[i].important&&(g=e.fieldsMetadata[i].important),U=e.fieldsMetadata[i]);let D="attr";if(u instanceof vt?D="uid":u instanceof kt?D="string":u instanceof Rt?D="boolean":u instanceof Ot?D="number":u instanceof lt&&(D="attr"),u instanceof St||u instanceof Vt||u instanceof Et||u instanceof Ft||u instanceof Dt)s={name:i,field:i,label:c,usageType:"relChildren"+te.capitalizeFirstLetter(f),dataType:D,important:g,fieldExtras:U,meta:{relation:u.constructor.name,field:u}},a.push(s);else if(u instanceof At&&(u instanceof It||u instanceof Ut)){u.parent.fields();const z=u.parent.titleKey;let se=[];s={name:i,field:i,label:c,usageType:"relLookup"+te.capitalizeFirstLetter(f),dataType:D,important:g,fieldExtras:U,meta:{rules:se,required:!1,foreignKey:u.foreignKey,foreignKeyField:t[u.foreignKey],relation:u.constructor.name,relatedModel:u.parent,field:u,lookupDisplayField:z,lookupField:i}},a.push({...s,meta:{...s.meta}}),r.push({...s,meta:{...s.meta}})}else{let z=[],se=!1;u.isNullable||(z=[De=>!!De||`${c} is required.`],se=!0),s={name:i,field:i,label:c,usageType:f,dataType:D,important:g,fieldExtras:U,meta:{rules:z,required:se}},a.push(s)}}for(const i of r){const u=a.findIndex(U=>i.meta.foreignKey==U.name),c=a[u];if(a[u].usageType.startsWith("mapExtraRel")){const U=a.findIndex(D=>i.name==D.name);a[U].usageType="relLookup"+te.capitalizeFirstLetter(a[u].usageType)}const g={...i,usageType:"relForeignKey"+te.capitalizeFirstLetter(c.usageType),dataType:"attr",meta:{...i.meta,...c.meta},important:c.important,fieldExtras:c.fieldExtras,name:i.meta.foreignKey,field:i.meta.foreignKey};a[u]=g}const n={data:{id:e.entity,fields:a}};this.insert(n)}}d(Ve,"entity","DBCrudCacheSet");class pe{static quickListsIsMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}static mapPlaceFields(){return[{flag:"mapExtraFormattedAddress",googleType:"simple",googleName:"formatted_address"},{flag:"mapExtraPlaceID",googleType:"simple",googleName:"place_id"},{flag:"mapExtraGeoLocLong",googleType:"mapGeoLoc",googleName:"lng"},{flag:"mapExtraGeoLocLat",googleType:"mapGeoLoc",googleName:"lat"},{flag:"relForeignKeyMapExtraRelCountry",googleType:"components",googleName:"country"},{flag:"relForeignKeyMapExtraRelAdminArea1",googleType:"components",googleName:"administrative_area_level_1"},{flag:"relForeignKeyMapExtraRelAdminArea2",googleType:"components",googleName:"administrative_area_level_2"},{flag:"relForeignKeyMapExtraRelLocality",googleType:"components",googleName:"locality"},{flag:"relForeignKeyMapExtraRelSublocality",googleType:"components",googleName:["sublocality_level_1","sublocality_level_2"]}]}static quickListsGetIfMatchesAllChecks(e,t){for(const[r,a]of Object.entries(t))if(typeof a=="object"&&!Array.isArray(a)&&a!==null){if(a!=null&&a.value&&a.usageType==="timeRangeStart"&&a.value.range.start){const s=new Date(a.value.range.start),n=new Date(a.value.range.end),i=new Date(e[r]);return s<i&&i<n}}else if(a!==null)return e[r]==a;return!0}static computedAttrs(e,t=[]){let r=Ve.find(e.entity);return r||(Ve.Generate(e),r=Ve.find(e.entity)),this.computedAttrs2(r.fields,t)}static async downloadPdf(e,t,r=0,a=null,s=null){}static computedAttrs2(e,t=[]){let r=[];for(const a of e)a.usageType.startsWith("relLookupNormal")?t.includes(a.meta.foreignKey)?r.push({...a,meta:{important:a.important,...a.meta,hideField:!0}}):r.push({...a,meta:{important:a.important,...a.meta,hideField:!1}}):t.includes(a.name)?r.push({...a,meta:{important:a.important,...a.meta,hideField:!0}}):r.push({...a,meta:{important:a.important,...a.meta,hideField:!1}});return r}static bindDeepPropToRef(e,t){t.forEach(({prop:r,refName:a})=>{e.$data[a]={...e[r]},e.$watch(r,(s,n)=>{JSON.stringify(s)!==JSON.stringify(n)&&(e.$data[a]={...s})},{deep:!0}),e.$watch(a,(s,n)=>{e.$emit(`update:${r}`,s)},{deep:!0})})}static filterInputs(e){const t=[];for(const r of e)if(r.usageType.startsWith("relForeignKeyNormal")||r.usageType=="timeRangeStart")t.push(r);else if(r.usageType=="relForeignKeyMapExtraRelSublocality"){const a=e.filter(s=>s.usageType.startsWith("relForeignKeyMapExtraRel"));t.push({label:"Place",name:"Place",usageType:"mapFilter",dataType:"normal",children:a})}return t}static SupaerTableHeaders(e,t=[],r=!0,a=!1){let s=[];const n=this.computedAttrs(e,t);for(const i of n)if(!i.usageType.startsWith("relForeignKey"))if(i.usageType.startsWith("relLookup")){const u=this.computedAttrs(i.meta.field.parent,t);let c=[];for(const f of u)f.usageType.startsWith("relForeignKey")||c.push({usageType:f.usageType,dataType:f.dataType,meta:f.meta,name:`${i.name}.${f.name}`,align:"left",label:f.label,field:g=>g[i.name]&&g[i.name][f.name],format:g=>`${g}`,sortable:!0});s.push({usageType:i.usageType,dataType:i.dataType,meta:i.meta,headerParentFields:c,name:i.name,align:"left",label:i.label,field:i.name,sortable:!0,children:c})}else s.push({usageType:i.usageType,dataType:i.dataType,meta:i.meta,name:i.name,align:"left",label:i.label,field:i.name,sortable:!0});return r&&s.push({usageType:"actions",dataType:"actions",name:"actions",align:"right",label:"Actions",field:"actions",sortable:!1}),s=s.filter(i=>{if(a){if(!i.usageType.startsWith("relForeignKey"))return!0}else return!i.usageType.startsWith("relForeignKey")&&!i.usageType.startsWith("relLookupMapExtra")&&!i.usageType.startsWith("mapExtra")}),s}static preparePayload(e,t){let r=[];for(const a of t)typeof(e==null?void 0:e[a.name])!="undefined"&&(a.usageType.startsWith("relForeignKey")?r[a.meta.foreignKey]=e[a.meta.foreignKey]:a.usageType.startsWith("relLookup")||a.usageType.startsWith("relChildren")||(["timestampType","readOnlyTimestampType","timeRangeStart","timeRangeEnd"].includes(a.usageType)?e[a.name]&&(r[a.name]=e[a.name]):r[a.name]=e[a.name]));return delete r.$id,r}}const Da={name:"SuperSelect",props:{hideBottomSpace:{type:Boolean,default(){return!1}},errorMessage:{type:String,default(){return null}},titleVal:{type:String,default(){return null}},hideLabel:{type:Boolean,default(){return!1}},maxPages:{type:[Number,Object],default:1},page:{type:[Number,Object],default:1},modelValue:{type:[Number,Object,String],default:null},model:{type:[Object,Function],required:!0},disabled:{type:Boolean,default:!1},modelField:{type:Object,default:()=>({})},displayMapField:{type:Boolean,default:!1},excludedCols:{type:Array,default:()=>[]},readonly:{type:Boolean,default:!1},variant:{type:String,default:"outlined"},density:{type:String,default:"compact"},allowAll:{type:Boolean,default:!1},rules:{type:Array,default:()=>[()=>!0]},items:{type:Array,default(){return[]}},activated:{type:Boolean,default(){return!1}},loading:{type:Boolean,default(){return!1}}},data(){return{timeout:null,search:"",totalPages:1,preSelectedItem:null,loadingInner:!1}},computed:{compLabel(){if(!this.hideLabel)return this.modelField.label},compLoading(){return this.loadingInner||this.loading},disabledComp(){return this.disabled||this.readonly},quickListsIsMobile(){return pe.quickListsIsMobile()},headers(){return pe.SupaerTableHeaders(this.model,this.excludedCols,!1,this.displayMapField)},modelValueComp(){return this.itemsComp.find(e=>e.id===this.modelValue)?this.modelValue:null},itemsComp(){let l=[];if(!this.disabled){if(l.push({label:"",id:null}),this.allowAll&&l.push({label:"All",id:null}),!this.activated){l=l.filter(t=>t.id!==this.modelValue);let e="";this.preSelectedItem?e=this.preSelectedItem[this.model.titleKey]:e=this.titleVal,this.modelValue&&l.push({label:e,id:this.modelValue})}for(const e of this.items)l.push({label:e[this.model.titleKey],id:e[this.model.primaryKey]});l.push({label:"",id:null})}return l}},methods:{hidePopup(){this.$refs.selectRef.hidePopup()},pageUpdate(l){this.$emit("update:page",l)},updateValue(l){const e=this.items.find(t=>t[this.model.primaryKey]===l);this.$emit("update:modelValue",l,e)},fetchDefaultItem(){this.modelValue&&!this.items.length&&(this.loadingInner=!0,this.model.FetchById(this.modelValue,[],{},{}).then(l=>{this.preSelectedItem=l.response.data.data[0],this.loadingInner=!1}).catch(()=>{this.loadingInner=!1}))}},watch:{search(l){this.disabled||(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.$emit("search",l)},300))},modelValue(l){this.fetchDefaultItem()}},mounted(){this.fetchDefaultItem()}},Aa={class:"q-mb-md"};function Ia(l,e,t,r,a,s){return o(),h("div",null,[m(Se,{ref:"selectRef",modelValue:s.modelValueComp,"onUpdate:modelValue":s.updateValue,options:s.itemsComp,"option-label":"label","option-value":t.model.primaryKey,"emit-value":!0,"map-options":!0,label:s.compLabel,disable:s.disabledComp,loading:s.compLoading,readonly:t.readonly,dense:t.density==="compact",filled:"","menu-props":{offsetY:!0},rules:t.rules,error:!!t.errorMessage,errorMessage:t.errorMessage,hideBottomSpace:t.hideBottomSpace},{option:p(n=>[n.index===0?(o(),b(Me,{key:0,class:"q-mt-none q-px-md"},{default:p(()=>[m(Je,null,{default:p(()=>[S("div",Aa,[Ee(l.$slots,"default")]),m(M,{modelValue:a.search,"onUpdate:modelValue":e[0]||(e[0]=i=>a.search=i),error:!1,"error-message":"",label:"Search",dense:"",outlined:"","single-line":"","hide-bottom-space":"",class:"q-mt-none q-pa-none"},null,8,["modelValue"])]),_:3})]),_:3})):n.index===s.itemsComp.length-1?(o(),b(Me,{key:1,class:"text-center q-pa-md"},{default:p(()=>[m(xt,{modelValue:t.page,max:t.maxPages,"onUpdate:modelValue":s.pageUpdate,input:""},null,8,["modelValue","max","onUpdate:modelValue"])]),_:1})):(o(),b(Me,st({key:2},n.itemProps,{key:n.index,label:n.opt.label,value:n.opt.id}),{default:p(()=>[m(Je,null,{default:p(()=>[S("div",null,k(n.opt.label),1)]),_:2},1024)]),_:2},1040,["label","value"]))]),_:3},8,["modelValue","onUpdate:modelValue","options","option-value","label","disable","loading","readonly","dense","rules","error","errorMessage","hideBottomSpace"])])}const ve=O(Da,[["render",Ia],["__file","SuperSelect.vue"]]);y.extend(be);y.extend(_e);const Ua={name:"DateAndTimePicker",props:{hideLabel:{type:Boolean,default:!1},modelValue:{type:String,default:null},label:{type:String,default:""},disabled:{type:Boolean,default:!1},useTimezone:{type:Boolean,default:!1}},data(){return{showDialog:!1,showDatePicker:!1,showTimePicker:!1,selectedDate:null,selectedTime:null,selectedTimezone:"Africa/Johannesburg"}},computed:{formattedValue(){return this.formattedDate&&this.formattedTime?`${this.formattedDate} ${this.formattedTime}${this.useTimezone?` (${this.selectedTimezone})`:""}`:""},formattedDate(){return this.selectedDate?this.useTimezone?y.tz(this.selectedDate,this.selectedTimezone).format("dddd, MMMM D, YYYY"):y(this.selectedDate).format("dddd, MMMM D, YYYY"):""},formattedTime(){return this.selectedTime?this.useTimezone?y.tz(`${this.selectedDate} ${this.selectedTime}`,this.selectedTimezone).format("h:mm A"):y(`${this.selectedDate} ${this.selectedTime}`).format("h:mm A"):""}},methods:{click(){this.disabled||(this.showDialog=!0)},setDefaultStartTime(){const l=this.useTimezone?y().tz(this.selectedTimezone):y();l.minute(0).second(0).millisecond(0).add(1,"hour"),this.selectedTime=l.format("HH:mm:ss")},parseTimestamptz(l){if(l){const e=this.useTimezone?y.tz(l,this.selectedTimezone):y(l);this.selectedDate=e.format("YYYY-MM-DD"),this.selectedTime=e.format("HH:mm:ss")}},getTimestampForDatabase(){return this.useTimezone?y.tz(`${this.selectedDate} ${this.selectedTime}`,this.selectedTimezone).toISOString():y(`${this.selectedDate} ${this.selectedTime}`).format("YYYY-MM-DDTHH:mm:ss.SSS")},finalizeDateTime(){const l=this.getTimestampForDatabase();this.$emit("update:modelValue",l),this.showDialog=!1}},watch:{modelValue:{immediate:!0,handler(l){this.parseTimestamptz(l)}}}},va=S("div",{class:"q-mb-md"},"Select Date & Time",-1),ka={class:"q-pa-md text-right"},Ra={class:"q-pa-md text-right"};function Oa(l,e,t,r,a,s){return o(),h("div",null,[m(M,{label:"Select Date Range",readonly:"",onClick:s.click,modelValue:s.formattedValue,"onUpdate:modelValue":e[0]||(e[0]=n=>s.formattedValue=n),error:!1,"error-message":"",dense:"",filled:"",disable:t.disabled},{append:p(()=>[m(We,{name:"calendar_today",onClick:s.click},null,8,["onClick"])]),_:1},8,["onClick","modelValue","disable"]),m(J,{modelValue:a.showDialog,"onUpdate:modelValue":e[11]||(e[11]=n=>a.showDialog=n),"max-width":"500px"},{default:p(()=>[m(q,{class:"q-pa-md"},{default:p(()=>[va,m(M,{label:"Date",modelValue:s.formattedDate,"onUpdate:modelValue":e[1]||(e[1]=n=>s.formattedDate=n),error:!1,"error-message":"",readonly:"",onClick:e[2]||(e[2]=n=>a.showDatePicker=!0),dense:"",filled:""},null,8,["modelValue"]),m(J,{modelValue:a.showDatePicker,"onUpdate:modelValue":e[5]||(e[5]=n=>a.showDatePicker=n),"max-width":"290px"},{default:p(()=>[m(q,null,{default:p(()=>[m(Ce,{modelValue:a.selectedDate,"onUpdate:modelValue":[e[3]||(e[3]=n=>a.selectedDate=n),s.setDefaultStartTime]},null,8,["modelValue","onUpdate:modelValue"]),S("div",ka,[m(P,{color:"primary",onClick:e[4]||(e[4]=n=>a.showDatePicker=!1)},{default:p(()=>[L("OK")]),_:1})])]),_:1})]),_:1},8,["modelValue"]),m(M,{label:"Time",modelValue:s.formattedTime,"onUpdate:modelValue":e[6]||(e[6]=n=>s.formattedTime=n),error:!1,"error-message":"",readonly:"",onClick:e[7]||(e[7]=n=>a.showTimePicker=!0),dense:"",filled:""},null,8,["modelValue"]),m(J,{modelValue:a.showTimePicker,"onUpdate:modelValue":e[10]||(e[10]=n=>a.showTimePicker=n),"max-width":"290px"},{default:p(()=>[m(q,null,{default:p(()=>[m(He,{modelValue:a.selectedTime,"onUpdate:modelValue":e[8]||(e[8]=n=>a.selectedTime=n)},null,8,["modelValue"]),S("div",Ra,[m(P,{color:"primary",onClick:e[9]||(e[9]=n=>a.showTimePicker=!1)},{default:p(()=>[L("OK")]),_:1})])]),_:1})]),_:1},8,["modelValue"]),m(Ue,null,{default:p(()=>[m(it),m(P,{color:"primary",onClick:s.finalizeDateTime},{default:p(()=>[L("OK")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const xa=O(Ua,[["render",Oa],["__file","DateAndTimePicker.vue"]]),Ma=ye(()=>T(()=>import("./SuperTable.js").then(l=>l.b),__vite__mapDeps([0,1,2]))),wa={name:"DatapointForEditInner",components:{SuperSelect:ve,SearchGooglePlace:ct,DateAndTimePicker:xa,DateAndTimeRangePicker:mt,RelationComponent:ut,SuperTable:Ma},props:{disabled:{type:Boolean,default:!1},item:{type:Object,default:()=>({})},itemErrors:{type:Object,default:()=>({})},formServerErrors:{type:Object,default:()=>({})},hideLabel:{type:Boolean,default(){return!1}},modelValue:{type:[Object,String,Number,Boolean],default(){return null}},field:{type:Object,default(){return{}}},superOptions:{type:Object,default(){return{headers:[],modelFields:[],displayMapField:!1,model:{},canEdit:!1,currentParentRecord:{}}}}},data(){return{loading:!1}},computed:{itemPVal(){return this.item[this.superOptions.model.primaryKey]},compServerError(){let l=null;return this.formServerErrors&&this.formServerErrors.errors&&this.formServerErrors.errors[this.field.name]&&(l=this.formServerErrors.errors[this.field.name]),l},compError(){let l=null;return this.itemErrors&&this.itemErrors&&this.itemErrors[this.field.name]&&(l=`${this.field.label} is required.`),l},compLabel(){},compPlaceholder(){return this.field.label}},methods:{getForcedFilters(l){return typeof l.fieldExtras.linkablesRule=="function"?l.fieldExtras.linkablesRule():{}},handleFileUpload(l){l&&this.$emit("update:modelValue",l)},updateModelValue(l){this.$emit("update:modelValue",l)},updateForeignKey(l){this.$emit("update:modelValue",l)},updateStartTime(l){this.$emit("update:modelValue",l),this.$emit("updateSetDefaultEndTime",l)}},mounted(){}},Pa={key:0,class:"q-mb-md"},Na=["src"];function Ca(l,e,t,r,a,s){var U;const n=F("SuperTable"),i=F("SuperSelect"),u=F("RelationComponent"),c=F("DateAndTimeRangePicker"),f=F("DateAndTimePicker"),g=F("SearchGooglePlace");return o(),h("div",null,[t.field.dataType==="uid"?(o(),h(V,{key:0},[],64)):t.field.usageType.startsWith("rel")?(o(),h(V,{key:1},[t.field.usageType.startsWith("relLookup")?(o(),h(V,{key:0},[],64)):t.field.usageType.startsWith("relForeignKeyNormal")?(o(),b(n,{key:1,disabled:t.disabled,hideLabel:t.hideLabel,isForSelectingRelation:!0,canEdit:!1,modelValue:t.modelValue,"onUpdate:modelValue":s.updateModelValue,model:t.field.meta.field.parent,rules:[()=>!0],modelField:t.field,fetchFlags:{sort:t.field.meta.field.parent.titleKey},filterVals:s.getForcedFilters(t.field),onSuperTableMounted:e[0]||(e[0]=D=>l.$emit("superTableMounted")),errorMessage:s.compError},null,8,["disabled","hideLabel","modelValue","onUpdate:modelValue","model","modelField","fetchFlags","filterVals","errorMessage"])):t.field.usageType.startsWith("relForeignKeyMapExtraRel")?(o(),b(n,{key:2,hideLabel:t.hideLabel,isForSelectingRelation:!0,canEdit:!1,modelValue:t.modelValue,"onUpdate:modelValue":e[1]||(e[1]=D=>{s.updateModelValue(D),s.updateForeignKey(D)}),model:t.field.meta.field.parent,rules:[()=>!0],modelField:t.field,fetchFlags:{sort:t.field.meta.field.parent.titleKey},filterVals:s.getForcedFilters(t.field),onSuperTableMounted:e[2]||(e[2]=D=>l.$emit("superTableMounted")),errorMessage:s.compError,disabled:""},null,8,["hideLabel","modelValue","model","modelField","fetchFlags","filterVals","errorMessage"])):t.field.usageType=="relForeignKeyOwnerAppliedToProviderType"?(o(),b(i,{key:3,hideLabel:t.hideLabel,modelField:t.field,modelValue:t.modelValue,"onUpdate:modelValue":s.updateModelValue,model:t.field.meta.field.parent,readonly:"",variant:"filled",density:"default"},null,8,["hideLabel","modelField","modelValue","onUpdate:modelValue","model"])):t.field.usageType!=="relChildrenNormal"?(o(),b(u,{key:4,hideLabel:t.hideLabel,configs:t.field,modelValue:t.modelValue,"onUpdate:modelValue":s.updateModelValue},null,8,["hideLabel","configs","modelValue","onUpdate:modelValue"])):E("",!0)],64)):t.field.usageType=="timeRangeType"?(o(),b(c,{key:2,label:s.compLabel,placeholder:s.compPlaceholder,modelValue:t.modelValue,"onUpdate:modelValue":s.updateModelValue,rules:t.field.meta.rules,error:!!s.compError,"error-message":s.compError},null,8,["label","placeholder","modelValue","onUpdate:modelValue","rules","error","error-message"])):t.field.usageType=="timeRangeStart"?(o(),b(f,{key:3,label:s.compLabel,placeholder:s.compPlaceholder,modelValue:t.modelValue,"onUpdate:modelValue":s.updateStartTime,rules:t.field.meta.rules,error:!!s.compError,"error-message":s.compError},null,8,["label","placeholder","modelValue","onUpdate:modelValue","rules","error","error-message"])):t.field.usageType=="timeRangeEnd"?(o(),b(f,{key:4,label:s.compLabel,placeholder:s.compPlaceholder,modelValue:t.modelValue,"onUpdate:modelValue":s.updateModelValue,rules:t.field.meta.rules,error:!!s.compError,"error-message":s.compError},null,8,["label","placeholder","modelValue","onUpdate:modelValue","rules","error","error-message"])):t.field.usageType=="timestampType"?(o(),b(M,{key:5,label:s.compLabel,placeholder:s.compPlaceholder,modelValue:t.modelValue,"onUpdate:modelValue":s.updateModelValue,rules:t.field.meta.rules,error:!!s.compError,"error-message":s.compError,type:"datetime-local",filled:"",dense:""},null,8,["label","placeholder","modelValue","onUpdate:modelValue","rules","error","error-message"])):t.field.usageType=="dateType"?(o(),b(M,{key:6,label:s.compLabel,placeholder:s.compPlaceholder,modelValue:t.modelValue,"onUpdate:modelValue":s.updateModelValue,rules:t.field.meta.rules,error:!!s.compError,"error-message":s.compError,type:"date",filled:"",dense:""},null,8,["label","placeholder","modelValue","onUpdate:modelValue","rules","error","error-message"])):t.field.usageType.startsWith("fileImageType")?(o(),h(V,{key:7},[s.itemPVal?(o(),h("div",Pa,[m(q,{style:{width:"unset","max-width":"unset"},flat:"",class:"bg-grey-2"},{default:p(()=>[m(re,{class:"q-pa-sm",style:{"text-align":"center"}},{default:p(()=>[typeof t.modelValue=="string"&&t.modelValue.length?(o(),h("img",{key:0,src:`${t.modelValue}`,alt:"File not found.",style:{"max-width":"100%","max-height":"200px"}},null,8,Na)):(o(),h(V,{key:1},[L(" Images can only be set on create. ")],64))]),_:1})]),_:1})])):(o(),b(Mt,{key:1,modelValue:t.modelValue,"onUpdate:modelValue":s.handleFileUpload,label:s.compLabel,accept:".pdf,.jpg,.jpeg,.png",error:!!s.compError,"error-message":s.compError,class:"q-mb-md",filled:"",dense:""},{prepend:p(()=>[m(We,{name:"attach_file"})]),_:1},8,["modelValue","onUpdate:modelValue","label","error","error-message"]))],64)):t.field.usageType.startsWith("htmlField")?(o(),b(wt,{key:8,modelValue:t.modelValue,"onUpdate:modelValue":s.updateModelValue,toolbar:[["bold","italic","underline","strike"],["quote","unordered","ordered","outdent","indent"],["link","image","hr"],["undo","redo"]],label:s.compLabel,error:!!s.compError,"error-message":s.compError,dense:"",placeholder:s.compPlaceholder,rules:t.field.meta.rules,filled:""},null,8,["modelValue","onUpdate:modelValue","label","error","error-message","placeholder","rules"])):t.field.usageType.startsWith("staticLookup")&&((U=t.field.fieldExtras.usageTypeExtras)!=null&&U.options)?(o(),b(Se,{key:9,label:s.compLabel,placeholder:s.compPlaceholder,modelValue:t.modelValue,"onUpdate:modelValue":s.updateModelValue,"option-label":"label","option-value":"value",emitValue:"",mapOptions:"",rules:t.field.meta.rules,error:!!s.compError,"error-message":s.compError,options:t.field.fieldExtras.usageTypeExtras.options,filled:"",dense:""},null,8,["label","placeholder","modelValue","onUpdate:modelValue","rules","error","error-message","options"])):t.field.usageType=="readOnlyTimestampType"?(o(),b(f,{key:10,label:s.compLabel,placeholder:s.compPlaceholder,modelValue:t.modelValue,"onUpdate:modelValue":s.updateModelValue,rules:t.field.meta.rules,error:!!s.compError,"error-message":s.compError,disabled:""},null,8,["label","placeholder","modelValue","onUpdate:modelValue","rules","error","error-message"])):t.field.usageType==="location_address_place_name"?(o(),b(g,{key:11,hideLabel:t.hideLabel,configs:t.field,modelValue:t.modelValue,"onUpdate:modelValue":s.updateModelValue,onPlaceSelected:e[3]||(e[3]=D=>{l.$emit("placeSelected",D)})},null,8,["hideLabel","configs","modelValue","onUpdate:modelValue"])):t.field.usageType.startsWith("mapExtra")?(o(),b(M,{key:12,label:s.compLabel,placeholder:s.compPlaceholder,modelValue:t.modelValue,"onUpdate:modelValue":s.updateModelValue,rules:t.field.meta.rules,error:!!s.compError,"error-message":s.compError,filled:"",dense:""},null,8,["label","placeholder","modelValue","onUpdate:modelValue","rules","error","error-message"])):t.field.usageType=="normal"?(o(),h(V,{key:13},[t.field.dataType==="string"?(o(),b(M,{key:0,label:s.compLabel,placeholder:s.compPlaceholder,modelValue:t.modelValue,"onUpdate:modelValue":s.updateModelValue,rules:t.field.meta.rules,error:!!s.compError,"error-message":s.compError,filled:"",dense:""},null,8,["label","placeholder","modelValue","onUpdate:modelValue","rules","error","error-message"])):t.field.dataType==="boolean"?(o(),b(Pt,{key:1,label:s.compLabel,placeholder:s.compPlaceholder,modelValue:t.modelValue,"onUpdate:modelValue":s.updateModelValue,rules:t.field.meta.rules,error:!!s.compError,"error-message":s.compError},null,8,["label","placeholder","modelValue","onUpdate:modelValue","rules","error","error-message"])):t.field.dataType==="number"?(o(),b(M,{key:2,label:s.compLabel,placeholder:s.compPlaceholder,modelValue:t.modelValue,"onUpdate:modelValue":s.updateModelValue,rules:t.field.meta.rules,error:!!s.compError,"error-message":s.compError,type:"number",filled:"",dense:""},null,8,["label","placeholder","modelValue","onUpdate:modelValue","rules","error","error-message"])):t.field.dataType==="attr"?(o(),b(M,{key:3,label:s.compLabel,placeholder:s.compPlaceholder,modelValue:t.modelValue,"onUpdate:modelValue":s.updateModelValue,rules:t.field.meta.rules,error:!!s.compError,"error-message":s.compError,filled:"",dense:""},null,8,["label","placeholder","modelValue","onUpdate:modelValue","rules","error","error-message"])):E("",!0)],64)):(o(),b(M,{key:14,label:s.compLabel,placeholder:s.compPlaceholder,modelValue:t.modelValue,"onUpdate:modelValue":s.updateModelValue,rules:t.field.meta.rules,error:!!s.compError,"error-message":s.compError,filled:"",dense:""},null,8,["label","placeholder","modelValue","onUpdate:modelValue","rules","error","error-message"]))])}const qe=O(wa,[["render",Ca],["__file","DatapointForEditInner.vue"]]);y.extend(be);y.extend(_e);const Ha={name:"DatapointForDisplayInner",data(){return{showImageModel:!1}},props:{protectImage:{type:Boolean,default(){return!1}},isTag:{type:Boolean,default(){return!1}},isHeading:{type:Boolean,default(){return!1}},hideLabel:{type:Boolean,default(){return!1}},header:{type:Object,default(){return{}}},item:{type:Object,default(){return{}}},superOptions:{type:Object,default(){return{headers:[],modelFields:[],displayMapField:!1,model:{},canEdit:!1,currentParentRecord:{}}}}},methods:{clickParent(l,e){const t=e.meta.field.parent;t.openRecord(l[t.primaryKey],l,this.$router)},truncateStr(l){let e="";return l&&(e=l.length>40?l.substring(0,40)+"...":l),e},disabled(){var e;let l=!1;return(e=this.superOptions.model.rules)!=null&&e.editable&&(l=this.superOptions.model.rules.editable(this.item)),!l},deleteItem(l){this.$emit("deleteItem",l)},editItem(l){this.$emit("editItem",l)},formatTimestamp(l){return l?y.utc(l,"YYYY-MM-DDTHH:mm:ss.SSSSSSZ").tz("Africa/Johannesburg").format("dddd, MMMM D, YYYY h:mm A"):null}}},La={key:1,class:"text-caption"},Wa=["src"],Ka={key:0,class:"absolute-full text-subtitle2 flex flex-center"},qa=["innerHTML"],ja=["title"],Ba=["title"];function Ya(l,e,t,r,a,s){var n,i;return o(),h("span",{class:j(t.isHeading?"text-h6":"")},[typeof t.header.usageType=="undefined"?(o(),h(V,{key:0},[],64)):!t.isHeading&&!t.hideLabel&&!t.header.usageType.startsWith("relChildren")?(o(),h("div",La,k(t.header.label),1)):E("",!0),typeof t.header.usageType=="undefined"?(o(),h(V,{key:2},[],64)):t.header.usageType.startsWith("relChildren")?(o(),h(V,{key:3},[],64)):t.header.usageType==="readOnlyTimestampType"||t.header.usageType==="timestampType"||t.header.usageType==="timeRangeStart"||t.header.usageType==="timeRangeEnd"?(o(),h(V,{key:4},[L(k(s.formatTimestamp(t.item[t.header.field])),1)],64)):t.header.usageType.startsWith("fileImageType")?(o(),h(V,{key:5},[t.protectImage?(o(),h(V,{key:0},[m(P,{onClick:e[0]||(e[0]=Te(u=>a.showImageModel=!0,["stop"])),flat:"",unelevated:"",icon:"image",color:"grey"}),m(J,{modelValue:a.showImageModel,"onUpdate:modelValue":e[1]||(e[1]=u=>a.showImageModel=u)},{default:p(()=>[m(q,{style:{width:"700px","max-width":"calc(-32px + 100vw)"},flat:"",class:"bg-grey-2"},{default:p(()=>[m(re,{class:"q-pa-sm flex flex-center"},{default:p(()=>[S("img",{alt:"Â File not found.",src:`${t.item[t.header.field]}`,style:{"max-width":"100%"}},null,8,Wa)]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)):(o(),b(q,{key:1,style:{width:"unset","max-width":"unset"},flat:"",class:"bg-grey-2"},{default:p(()=>[m(re,{class:"q-pa-sm"},{default:p(()=>[m(Nt,{alt:"File not found.",src:`${t.item[t.header.field]}`},{default:p(()=>[t.item[t.header.field]?E("",!0):(o(),h("div",Ka," Oops, no image found! "))]),_:1},8,["src"])]),_:1})]),_:1}))],64)):t.header.usageType.startsWith("htmlField")?(o(),h("div",{key:6,innerHTML:t.item[t.header.field]},null,8,qa)):t.header.usageType=="actions"&&!s.disabled()?(o(),h("div",{key:7,onClick:e[4]||(e[4]=Te(()=>{},["stop"])),style:w(s.disabled()?"cursor: default;":"")},[m(P,{onClick:e[2]||(e[2]=Te(u=>s.editItem(t.item),["stop"])),disable:s.disabled(),color:"grey",icon:"edit",flat:"",size:"sm"},null,8,["disable"]),m(P,{onClick:e[3]||(e[3]=Te(u=>s.deleteItem(t.item),["stop"])),disable:s.disabled(),color:"grey",icon:"delete",flat:"",size:"sm"},null,8,["disable"])],4)):t.header.usageType.startsWith("relLookup")?(o(),h("div",{key:8,style:{"min-height":"32px",cursor:"pointer"},onClick:e[5]||(e[5]=Te(u=>{var c;return s.clickParent((c=t.item)==null?void 0:c[t.header.field],t.header)},["stop"]))},[(i=(n=t.item)==null?void 0:n[t.header.field])!=null&&i[t.header.meta.lookupDisplayField]?(o(),b($e,{key:0,class:"q-ma-none"},{default:p(()=>{var u,c,f,g;return[S("div",{title:(c=(u=t.item)==null?void 0:u[t.header.field])==null?void 0:c[t.header.meta.lookupDisplayField],style:{overflow:"hidden"}},k((g=(f=t.item)==null?void 0:f[t.header.field])==null?void 0:g[t.header.meta.lookupDisplayField]),9,ja)]}),_:1})):E("",!0)])):(o(),h(V,{key:9},[t.isTag?(o(),h("div",{key:0,onClick:e[6]||(e[6]=Te(u=>s.clickParent(t.item),["stop"])),style:{cursor:"pointer"}},[t.isTag?(o(),b($e,{key:0},{default:p(()=>[L(k(t.item[t.header.field]),1)]),_:1})):E("",!0)])):(o(),h("div",{key:1,title:t.item[t.header.field],style:{overflow:"hidden"}},k(s.truncateStr(t.item[t.header.field])),9,Ba))],64))],2)}const je=O(Ha,[["render",Ya],["__file","DatapointForDisplayInner.vue"]]),za={name:"RecordFieldsForDisplayGeneric",components:{DatapointForDisplayInner:je},props:{unClickable:{type:Boolean,default(){return!1}},maxFields:{type:Number,default(){return 999}},item:{type:Object,default(){return{}}},superOptions:{type:Object,default(){return{headers:[],modelFields:[],displayMapField:!1,model:{},canEdit:!1,currentParentRecord:{}}}}},methods:{deleteItem(l){this.$emit("deleteItem",l)},editItem(l){this.$emit("editItem",l)},clickRow(l){this.$emit("clickRow",l)}}},Ga={key:1},Qa={key:1},Ja={key:1};function $a(l,e,t,r,a,s){const n=F("DatapointForDisplayInner");return o(),h("div",{style:w(t.unClickable?"":"cursor: pointer"),onClick:e[0]||(e[0]=i=>s.clickRow(t.item)),class:"q-pa-sm"},[(o(!0),h(V,null,Y(t.superOptions.headers,(i,u)=>(o(),h(V,null,[i.field!=="id"&&(u<t.maxFields||i.usageType==="actions")&&!i.usageType.startsWith("relChildren")&&(i.usageType!=="actions"||t.superOptions.model.rules.editable(t.item))?(o(),h("div",{key:i.name,class:"q-pa-xs q-mb-sm",style:{"min-height":"1.375rem"}},[u<2?(o(),h(V,{key:0},[t.superOptions.headers[0].value==="id"?(o(),h(V,{key:0},[u===0?(o(),h(V,{key:0},[],64)):(o(),h("div",Ga,[m(n,{header:i,item:t.item,superOptions:t.superOptions,onEditItem:s.editItem,onDeleteItem:s.deleteItem},null,8,["header","item","superOptions","onEditItem","onDeleteItem"])]))],64)):(o(),h(V,{key:1},[u===0?(o(),b(n,{key:0,header:i,item:t.item,superOptions:t.superOptions,onEditItem:s.editItem,onDeleteItem:s.deleteItem,isHeading:""},null,8,["header","item","superOptions","onEditItem","onDeleteItem"])):(o(),h("div",Qa,[(o(),b(n,{key:u,header:i,item:t.item,superOptions:t.superOptions,onEditItem:s.editItem,onDeleteItem:s.deleteItem},null,8,["header","item","superOptions","onEditItem","onDeleteItem"]))]))],64))],64)):(o(),h("div",Ja,[(o(),b(n,{key:u,header:i,item:t.item,superOptions:t.superOptions,onEditItem:s.editItem,onDeleteItem:s.deleteItem},null,8,["header","item","superOptions","onEditItem","onDeleteItem"]))]))])):E("",!0)],64))),256))],4)}const Oe=O(za,[["render",$a],["__file","RecordFieldsForDisplayGeneric.vue"]]),Za={name:"DatapointForDisplay",components:{RecordFieldsForDisplayGeneric:Oe,SuperTable:ye(()=>T(()=>import("./SuperTable.js").then(l=>l.b),__vite__mapDeps([0,1,2]))),DatapointForDisplayInner:je},props:{header:{type:Object,default(){return null}},protectImage:{type:Boolean,default(){return!1}},hideLabel:{type:Boolean,default(){return!1}},dataPoint:{type:Object,default(){return{}}},item:{type:Object,default(){return{}}},childRelations:{type:Array,default(){return[]}},superOptions:{type:Object,default(){return{headers:[],modelFields:[],displayMapField:!1,model:{},canEdit:!1,currentParentRecord:{}}}}},computed:{asyncComponent(){return this.dataPoint.type==="component"&&this.dataPoint.componentPath?ye(this.dataPoint.componentPath):null},compField(){return this.header?this.header:this.dataPoint.type==="component"||this.dataPoint.type==="function"?{label:this.dataPoint.label}:this.superOptions.headers.find(e=>e.field==this.dataPoint.field)},compRelation(){let l={};return this.compField&&this.isRelChildren(this.compField)&&(l=this.childRelations.find(e=>e.field.name==this.dataPoint.field)),l},label(){return typeof this.dataPoint.label!="undefined"?this.dataPoint.label:this.dataPoint.type==="component"||this.dataPoint.type==="function"?"":this.compField?this.compField.label:""}},methods:{deleteItem(l){this.$emit("deleteItem",l)},editItem(l){this.$emit("editItem",l)},isRelChildren(l){return(l==null?void 0:l.usageType)&&(l==null?void 0:l.usageType.startsWith("relChildren"))}}},Xa={key:0},el={key:0,class:""},tl={class:"row",style:{"align-items":"center"}},al={key:0,class:"q-pr-sm"},ll={class:"text-bold",style:{display:"flex","align-items":"center"}},rl=["innerHTML"],sl=["innerHTML"];function il(l,e,t,r,a,s){var i,u;const n=F("DatapointForDisplayInner");return!((i=s.compField)!=null&&i.meta)||!((u=s.compField.meta)!=null&&u.hideField)?(o(),h("div",Xa,[t.dataPoint.xOrientation?(o(),h("div",el,[S("div",tl,[t.dataPoint.hideLabel?E("",!0):(o(),h("div",al,[S("div",ll,k(s.label)+": ",1)])),S("div",null,[(o(),b(fe(t.dataPoint.tag?t.dataPoint.tag:"div"),{class:j(t.dataPoint.class?t.dataPoint.class:""),style:w(t.dataPoint.style?t.dataPoint.style:"")},{default:p(()=>[t.dataPoint.type==="component"?(o(),b(fe(s.asyncComponent),{key:0,item:t.item},null,8,["item"])):t.dataPoint.type==="function"?(o(),h("span",{key:1,innerHTML:t.dataPoint.function(t.item)},null,8,rl)):(o(),b(n,{key:2,header:s.compField,item:t.item,superOptions:t.superOptions,hideLabel:"",onEditItem:s.editItem,onDeleteItem:s.deleteItem,protectImage:t.protectImage},null,8,["header","item","superOptions","onEditItem","onDeleteItem","protectImage"]))]),_:1},8,["class","style"]))])])])):(o(),h(V,{key:1},[!t.dataPoint.hideLabel&&!t.hideLabel?(o(),h("div",{key:0,class:"text-bold",style:w(`visibility: ${s.label.length?"visible":"hidden"}`)},k(s.label)+": ",5)):E("",!0),(o(),b(fe(t.dataPoint.tag?t.dataPoint.tag:"div"),{class:j(t.dataPoint.class?t.dataPoint.class:""),style:w(t.dataPoint.style?t.dataPoint.style:"")},{default:p(()=>[t.dataPoint.type==="component"?(o(),b(fe(s.asyncComponent),{key:0,item:t.item,superOptions:t.superOptions,onEditItem:s.editItem,onDeleteItem:s.deleteItem},null,40,["item","superOptions","onEditItem","onDeleteItem"])):t.dataPoint.type==="function"?(o(),h("span",{key:1,innerHTML:t.dataPoint.function(t.item)},null,8,sl)):(o(),b(n,{key:2,header:s.compField,item:t.item,superOptions:t.superOptions,hideLabel:"",onEditItem:s.editItem,onDeleteItem:s.deleteItem,protectImage:t.protectImage},null,8,["header","item","superOptions","onEditItem","onDeleteItem","protectImage"]))]),_:1},8,["class","style"]))],64))])):E("",!0)}const ht=O(Za,[["render",il],["__file","DatapointForDisplay.vue"]]),nl={name:"RecordFieldsForDisplayCustom",components:{DatapointForDisplay:ht},props:{template:{type:Object,default(){return{}}},item:{type:Object,default(){return{}}},unClickable:{type:Boolean,default(){return!1}},childRelations:{type:Array,default(){return[]}},superOptions:{type:Object,default(){return{headers:[],modelFields:[],displayMapField:!1,model:{},canEdit:!1,currentParentRecord:{}}}}},computed:{},methods:{colClasses(l=12){l=+l;const e={lg:1,md:1.5,sm:2,xs:4};function t(i){return[1,2,3,4,6,12].reduce((c,f)=>Math.abs(f-i)<Math.abs(c-i)?f:c)}const r=t(l*e.lg),a=t(l*e.md),s=t(l*e.sm),n=t(l*e.xs);return`col-${r} col-lg-${r} col-md-${a} col-sm-${s} col-xs-${n}`},deleteItem(l){this.$emit("deleteItem",l)},editItem(l){this.$emit("editItem",l)},clickRow(l){this.$emit("clickRow",l)}}},dl={style:{"padding-top":"0.03px"}},ol={key:1,class:"col-12",style:{overflow:"hidden"}};function ul(l,e,t,r,a,s){var u,c,f;const n=F("RecordFieldsForDisplayCustom",!0),i=F("DatapointForDisplay");return o(),h("div",{style:w(t.unClickable?"":"cursor: pointer"),onClick:e[0]||(e[0]=g=>s.clickRow(t.item)),class:j(s.colClasses(t.template.width?t.template.width:12))},[S("div",dl,[S("div",{class:j(["row",`${t.template.unsetGutters?"":"q-col-gutter-xs"} ${(u=t.template.class)!=null&&u.length?t.template.class:""} `]),style:w(`${(c=t.template.style)!=null&&c.length?t.template.style:""}`)},[(f=t.template.cols)!=null&&f.length?(o(!0),h(V,{key:0},Y(t.template.cols,(g,U)=>(o(),b(n,{key:U,template:g,item:t.item,childRelations:t.childRelations,superOptions:t.superOptions,unClickable:t.unClickable,onEditItem:s.editItem,onDeleteItem:s.deleteItem},Ze({_:2},[Y(l.$slots,(D,z)=>({name:z,fn:p(se=>[Ee(l.$slots,z,st({ref_for:!0},se))])}))]),1032,["template","item","childRelations","superOptions","unClickable","onEditItem","onDeleteItem"]))),128)):t.template.dataPoint&&(t.template.dataPoint.field!=="actions"||t.superOptions.model.rules.editable(t.item))?(o(),h("div",ol,[m(i,{item:t.item,dataPoint:t.template.dataPoint,childRelations:t.childRelations,superOptions:t.superOptions,onEditItem:s.editItem,onDeleteItem:s.deleteItem},Ze({_:2},[Y(l.$slots,(g,U)=>({name:U,fn:p(D=>[Ee(l.$slots,U,Ct(Ht(D)))])}))]),1032,["item","dataPoint","childRelations","superOptions","onEditItem","onDeleteItem"])])):E("",!0)],6)])],6)}const xe=O(nl,[["render",ul],["__file","RecordFieldsForDisplayCustom.vue"]]),ml={name:"DatapointForEdit",components:{DatapointForDisplayInner:je,DatapointForEditInner:qe},props:{itemErrors:{type:Object,default:()=>({})},formServerErrors:{type:Object,default:()=>({})},compField:{type:Object,default(){return{}}},dataPoint:{type:Object,default(){return{}}},modelValue:{type:[Object,String,Number,Boolean],default(){return null}},superOptions:{type:Object,default(){return{headers:[],modelFields:[],displayMapField:!1,model:{},canEdit:!1,currentParentRecord:{}}}}},data(){return{}},computed:{label(){return typeof this.dataPoint.label!="undefined"?this.dataPoint.label:this.dataPoint.type==="function"?"":this.compField?this.compField.label:""}},methods:{updateModelValue(l,e){this.itemData[e]=l,this.$emit("update:modelValue",this.itemData)}},mounted(){this.itemData=this.modelValue}},cl={key:0,class:""},hl={class:"row"},pl={class:"q-pr-sm col-6 col-md-6 col-sm-6 col-xs-6"},fl={class:"text-bold",style:{"line-height":"3em"}},yl={class:"col-6 col-md-6 col-sm-6 col-xs-6"},bl=["innerHTML"],gl=["innerHTML"];function _l(l,e,t,r,a,s){const n=F("DatapointForEditInner");return o(),h("div",null,[t.dataPoint.xOrientation?(o(),h("div",cl,[S("div",hl,[S("div",pl,[S("div",fl,k(s.label)+": ",1)]),S("div",yl,[(o(),b(fe(t.dataPoint.tag?t.dataPoint.tag:"div"),{class:j(t.dataPoint.class?t.dataPoint.class:""),style:w(t.dataPoint.style?t.dataPoint.style:"")},{default:p(()=>[t.dataPoint.type==="function"?(o(),h("div",{key:0,innerHTML:t.dataPoint.function(t.modelValue)},null,8,bl)):(o(),h(V,{key:1},[t.compField?(o(),b(n,{key:0,item:t.modelValue,modelValue:t.modelValue[t.compField.name],"onUpdate:modelValue":e[0]||(e[0]=i=>{s.updateModelValue(i,t.compField.name)}),superOptions:t.superOptions,onUpdateSetDefaultEndTime:e[1]||(e[1]=i=>{l.$emit("updateSetDefaultEndTime",i)}),field:t.compField,hideLabel:"",formServerErrors:t.formServerErrors,onPlaceSelected:e[2]||(e[2]=i=>{l.$emit("placeSelected",i)})},null,8,["item","modelValue","superOptions","field","formServerErrors"])):E("",!0)],64))]),_:1},8,["class","style"]))])])])):(o(),h(V,{key:1},[t.dataPoint.hideLabel?E("",!0):(o(),h("div",{key:0,class:"text-bold",style:w(`visibility: ${s.label.length?"visible":"hidden"}`)},k(s.label)+": ",5)),(o(),b(fe(t.dataPoint.tag?t.dataPoint.tag:"div"),{class:j(t.dataPoint.class?t.dataPoint.class:""),style:w(t.dataPoint.style?t.dataPoint.style:"")},{default:p(()=>[t.dataPoint.type==="function"?(o(),h("div",{key:0,innerHTML:t.dataPoint.function(t.modelValue)},null,8,gl)):(o(),h(V,{key:1},[t.compField?(o(),b(n,{key:0,item:t.modelValue,modelValue:t.modelValue[t.compField.name],"onUpdate:modelValue":e[3]||(e[3]=i=>{s.updateModelValue(i,t.compField.name)}),superOptions:t.superOptions,onUpdateSetDefaultEndTime:e[4]||(e[4]=i=>{l.$emit("updateSetDefaultEndTime",i)}),field:t.compField,hideLabel:"",formServerErrors:t.formServerErrors,itemErrors:t.itemErrors,onPlaceSelected:e[5]||(e[5]=i=>{l.$emit("placeSelected",i)})},null,8,["item","modelValue","superOptions","field","formServerErrors","itemErrors"])):E("",!0)],64))]),_:1},8,["class","style"]))],64))])}const Tl=O(ml,[["render",_l],["__file","DatapointForEdit.vue"]]),Sl={name:"RecordFieldsForEditCustom",components:{DatapointForEdit:Tl,DatapointForDisplay:ht,RecordFieldsForDisplayCustom:xe,SuperSelect:ve,DatapointForEditInner:qe},props:{formServerErrors:{type:Object,default:()=>({})},itemErrors:{type:Object,default:()=>({})},template:{type:Object,default(){return{}}},modelValue:{type:Object,default:()=>({})},superOptions:{type:Object,default(){return{headers:[],modelFields:[],displayMapField:!1,model:{},canEdit:!1,currentParentRecord:{}}}}},data(){return{loading:!1}},computed:{compField(){var l;return((l=this.template.dataPoint)==null?void 0:l.type)==="function"?{label:this.template.dataPoint.label}:this.superOptions.modelFields.find(t=>t.field==this.template.dataPoint.field)}},mounted(){},methods:{colClasses(l=12){l=+l;const e={lg:1,md:1.5,sm:2,xs:4};function t(i){return[1,2,3,4,6,12].reduce((c,f)=>Math.abs(f-i)<Math.abs(c-i)?f:c)}const r=t(l*e.lg),a=t(l*e.md),s=t(l*e.sm),n=t(l*e.xs);return`col-${r} col-lg-${r} col-md-${a} col-sm-${s} col-xs-${n}`},updateModelValue(l){this.$emit("update:modelValue",l)}},watch:{}},Vl={style:{"padding-top":"0.03px"}},El={key:1,class:"col-12"};function Fl(l,e,t,r,a,s){var u,c,f;const n=F("RecordFieldsForEditCustom",!0),i=F("DatapointForEdit");return o(),h("div",{class:j(s.colClasses(t.template.width?t.template.width:12))},[S("div",Vl,[S("div",{class:j(["row",`${t.template.unsetGutters?"":"q-col-gutter-xs"} ${(u=t.template.class)!=null&&u.length?t.template.class:""} `]),style:w(`${(c=t.template.style)!=null&&c.length?t.template.style:""}`)},[(f=t.template.cols)!=null&&f.length?(o(!0),h(V,{key:0},Y(t.template.cols,(g,U)=>(o(),b(n,{key:U,modelValue:t.modelValue,"onUpdate:modelValue":s.updateModelValue,superOptions:t.superOptions,onUpdateSetDefaultEndTime:e[0]||(e[0]=D=>{l.$emit("updateSetDefaultEndTime",D)}),template:g,formServerErrors:t.formServerErrors,itemErrors:t.itemErrors,onPlaceSelected:e[1]||(e[1]=D=>{l.$emit("placeSelected",D)})},null,8,["modelValue","onUpdate:modelValue","superOptions","template","formServerErrors","itemErrors"]))),128)):t.template.dataPoint&&s.compField.meta&&!s.compField.meta.hideField?(o(),h("div",El,[S("div",{class:j(t.template.dataPoint.noMargin?"":"q-mb-sm")},[m(i,{modelValue:t.modelValue,compField:s.compField,"onUpdate:modelValue":s.updateModelValue,superOptions:t.superOptions,onUpdateSetDefaultEndTime:e[2]||(e[2]=g=>{l.$emit("updateSetDefaultEndTime",g)}),dataPoint:t.template.dataPoint,formServerErrors:t.formServerErrors,itemErrors:t.itemErrors,onPlaceSelected:e[3]||(e[3]=g=>{l.$emit("placeSelected",g)})},null,8,["modelValue","compField","onUpdate:modelValue","superOptions","dataPoint","formServerErrors","itemErrors"])],2)])):E("",!0)],6)])],2)}const pt=O(Sl,[["render",Fl],["__file","RecordFieldsForEditCustom.vue"]]),Dl={name:"RecordFieldsForEditGeneric",components:{RecordFieldsForEditCustom:pt,SuperSelect:ve,DatapointForEditInner:qe},props:{itemErrors:{type:Object,default:()=>({})},formServerErrors:{type:Object,default:()=>({})},modelValue:{type:Object,default:()=>({})},superOptions:{type:Object,default(){return{headers:[],modelFields:[],displayMapField:!1,model:{},canEdit:!1,currentParentRecord:{}}}}},data(){return{rendered:!1,itemData:this.modelValue,loading:!1}},mounted(){this.itemData=this.modelValue,this.autoFillAll()},methods:{updateModelValue(l,e){this.itemData[e]=l,this.$emit("update:modelValue",this.itemData)},autoFillAll(){for(const l of this.superOptions.modelFields)typeof l.fieldExtras.autoFill=="function"&&(this.itemData[l.name]=l.fieldExtras.autoFill(this.itemData));this.$emit("update:modelValue",this.itemData)}},watch:{itemData:{handler(){this.autoFillAll()},deep:!0}}},Al={key:0,class:"q-mb-sm"};function Il(l,e,t,r,a,s){const n=F("DatapointForEditInner");return o(),h("div",null,[(o(!0),h(V,null,Y(t.superOptions.modelFields,i=>(o(),h(V,{key:i.name},[t.superOptions.model.primaryKey!==i.name&&!i.meta.hideField&&!["relLookupNormal","relChildrenNormal"].includes(i.usageType)&&!i.usageType.startsWith("relLookupMap")&&!i.usageType.startsWith("relForeignKeyMap")&&!i.usageType.startsWith("mapExtraGeo")&&!i.usageType.startsWith("mapExtraPlace")?Lt((o(),h("div",Al,[a.rendered&&!i.usageType.startsWith("relLookupMapExtraRel")?(o(),h("div",{key:0,class:"text-subtitle2",style:w(`visibility: ${i.label.length?"visible":"hidden"}`)},k(i.label)+": ",5)):E("",!0),m(n,{onSuperTableMounted:e[0]||(e[0]=u=>a.rendered=!0),item:a.itemData,modelValue:a.itemData[i.name],"onUpdate:modelValue":u=>{s.updateModelValue(u,i.name)},superOptions:t.superOptions,onUpdateSetDefaultEndTime:e[1]||(e[1]=u=>{l.$emit("updateSetDefaultEndTime",u)}),field:i,formServerErrors:t.formServerErrors,itemErrors:t.itemErrors,hideLabel:"",onPlaceSelected:e[2]||(e[2]=u=>{l.$emit("placeSelected",u)})},null,8,["item","modelValue","onUpdate:modelValue","superOptions","field","formServerErrors","itemErrors"])],512)),[[Wt,typeof i.fieldExtras.autoFill!="function"]]):E("",!0)],64))),128))])}const Ul=O(Dl,[["render",Il],["__file","RecordFieldsForEditGeneric.vue"]]);y.extend(be);y.extend(_e);const vl=ye(()=>T(()=>import("./SuperTable.js").then(l=>l.b),__vite__mapDeps([0,1,2]))),kl={name:"CreateEditForm",components:{CreateButton:ot,RecordFieldsForEditCustom:pt,RecordFieldsForDisplayCustom:xe,RecordFieldsForDisplayGeneric:Oe,RecordFieldsForEditGeneric:Ul,SuperSelect:ve,SearchGooglePlace:ct,DateAndTimeRangePicker:mt,RelationComponent:ut,SuperTable:vl},props:{template:{type:Object,default(){return{}}},submitting:{type:Boolean,default(){return!1}},titlePrefix:{type:String,default:()=>""},modelValue:{type:Object,default:()=>({})},formServerErrors:{type:Object,default:()=>({})},superOptions:{type:Object,default(){return{headers:[],modelFields:[],displayMapField:!1,model:{},canEdit:!1,currentParentRecord:{}}}}},data(){return{itemData:this.modelValue,loading:!1,itemErrors:{}}},computed:{placeFieldsWithFieldNames(){let l=[];if(this.superOptions.modelFields.find(t=>t.usageType=="location_address_place_name"))for(const t of pe.mapPlaceFields()){const r=this.superOptions.modelFields.find(a=>a.usageType==t.flag);r&&l.push({...t,fieldNames:r.name,fieldMore:r})}return l}},methods:{async upsertAndGetEntityIds(l){let e=null;const t={relForeignKeyMapExtraRelCountry:this.superOptions.modelFields.find(s=>s.usageType=="relForeignKeyMapExtraRelCountry").meta.relatedModel,relForeignKeyMapExtraRelAdminArea1:this.superOptions.modelFields.find(s=>s.usageType=="relForeignKeyMapExtraRelAdminArea1").meta.relatedModel,relForeignKeyMapExtraRelAdminArea2:this.superOptions.modelFields.find(s=>s.usageType=="relForeignKeyMapExtraRelAdminArea2").meta.relatedModel,relForeignKeyMapExtraRelLocality:this.superOptions.modelFields.find(s=>s.usageType=="relForeignKeyMapExtraRelLocality").meta.relatedModel,relForeignKeyMapExtraRelSublocality:this.superOptions.modelFields.find(s=>s.usageType=="relForeignKeyMapExtraRelSublocality").meta.relatedModel};let r=[],a=[];for(const s of pe.mapPlaceFields())if(s.googleType==="components"){let n;if(Array.isArray(s.googleName)){for(const u of s.googleName)if(n=l.address_components.find(c=>c.types.includes(u)),n)break}else n=l.address_components.find(u=>u.types.includes(s.googleName));let i="";if(n?i=n.long_name:s.flag==="relForeignKeyMapExtraRelSublocality"?i=r.relForeignKeyMapExtraRelLocality:s.flag==="relForeignKeyMapExtraRelAdminArea2"?i=r.relForeignKeyMapExtraRelAdminArea1:s.flag==="relForeignKeyMapExtraRelLocality"?i="Unknown":i=null,r[s.flag]=i,t[s.flag]){let u={name:i};s.flag!=="relForeignKeyMapExtraRelCountry"&&(u.parent_id=e);let c="";s.flag==="relForeignKeyMapExtraRelAdminArea1"?c=v.mapExtraRelCountry():s.flag==="relForeignKeyMapExtraRelAdminArea2"?c=v.mapExtraRelAdminArea1():s.flag==="relForeignKeyMapExtraRelLocality"?c=v.mapExtraRelAdminArea2():s.flag==="relForeignKeyMapExtraRelSublocality"&&(c=v.mapExtraRelLocality());const f=Object.keys(t[s.flag].fieldsMetadata).find(U=>t[s.flag].fieldsMetadata[U].usageType===c);u[f]=e,e=(await t[s.flag].Store({...u},[],{upsertCompareOn:"name",upsertCompareMode:"sluggify"},{})).response.data.data.id,a[s.flag]=e}}return a},async placeSelected(l){var t,r;this.loading=!0;const e=await this.upsertAndGetEntityIds(l);for(const a of this.placeFieldsWithFieldNames)a.googleType==="simple"?this.itemData[a.fieldNames]=l[a.googleName]:a.googleType==="mapGeoLoc"?(r=(t=l.geometry)==null?void 0:t.location)!=null&&r[a.googleName]&&(this.itemData[a.fieldNames]=l.geometry.location[a.googleName]()):a.googleType==="components"&&(this.itemData[a.fieldNames]=e[a.flag]);this.loading=!1},updateSetDefaultEndTime(l){const e=this.superOptions.modelFields.find(t=>t.usageType==="timeRangeEnd");this.itemData[e.name]=y(l).add(2,"hours").format("YYYY-MM-DDTHH:mm:ss.SSS")},cancel(){this.$emit("cancel")},updateModelValue(l){this.$emit("update:modelValue",l)},getRequiredFields(){return this.superOptions.modelFields.filter(l=>l.meta&&l.meta.required).map(l=>l.name)},validateField(l,e){e?delete this.itemErrors[l]:this.itemErrors[l]="Required"},validateForm(){return this.itemErrors={},this.getRequiredFields().forEach(e=>{this.validateField(e,this.modelValue[e])}),Object.keys(this.itemErrors).length===0},async editItemSubmit(){this.validateForm()&&this.$emit("submit")}}},Rl={class:"text-h6"},Ol={key:0,style:{"padding-top":"0.03px"}},xl={class:"row q-col-gutter-xs"},Ml={style:{width:"100%"}},wl={class:"text-right text-negative"},Pl={class:"text-right"};function Nl(l,e,t,r,a,s){const n=F("RecordFieldsForEditCustom"),i=F("RecordFieldsForEditGeneric");return o(),b(q,{class:""},{default:p(()=>[m(re,null,{default:p(()=>{var u,c;return[S("div",Rl,k(t.titlePrefix)+" "+k((u=t.superOptions.model)!=null&&u.entityHumanName?(c=t.superOptions.model)==null?void 0:c.entityHumanName:"Item"),1)]}),_:1}),m(re,null,{default:p(()=>[m(Kt,{ref:"editForm"},{default:p(()=>[t.template&&t.template.cols?(o(),h("div",Ol,[S("div",xl,[m(n,{modelValue:a.itemData,"onUpdate:modelValue":s.updateModelValue,superOptions:t.superOptions,onUpdateSetDefaultEndTime:s.updateSetDefaultEndTime,template:t.template,formServerErrors:t.formServerErrors,itemErrors:a.itemErrors,onPlaceSelected:s.placeSelected},null,8,["modelValue","onUpdate:modelValue","superOptions","onUpdateSetDefaultEndTime","template","formServerErrors","itemErrors","onPlaceSelected"])])])):(o(),b(i,{key:1,modelValue:a.itemData,"onUpdate:modelValue":s.updateModelValue,superOptions:t.superOptions,onUpdateSetDefaultEndTime:s.updateSetDefaultEndTime,formServerErrors:t.formServerErrors,itemErrors:a.itemErrors,onPlaceSelected:s.placeSelected},null,8,["modelValue","onUpdate:modelValue","superOptions","onUpdateSetDefaultEndTime","formServerErrors","itemErrors","onPlaceSelected"]))]),_:1},512)]),_:1}),m(Ue,null,{default:p(()=>[S("div",Ml,[S("div",wl,k(Object.keys(a.itemErrors).length?`${Object.keys(a.itemErrors)[0]} is required${Object.keys(a.itemErrors).length>1?" (and "+(Object.keys(a.itemErrors).length-1)+" more error/s).":"."} `:""),1),S("div",Pl,[m(P,{flat:"",label:"Cancel",onClick:s.cancel},null,8,["onClick"]),m(P,{flat:"",label:"Save",color:"primary",onClick:s.editItemSubmit,loading:a.loading||t.submitting},null,8,["onClick","loading"])])])]),_:1})]),_:1})}const Cl=O(kl,[["render",Nl],["__file","CreateEditForm.vue"]]),Yr=Object.freeze(Object.defineProperty({__proto__:null,default:Cl},Symbol.toStringTag,{value:"Module"})),ge=class ge extends rt{static openRecord(e,t,r){}static NormalizeRecursive(e){return this.NormalizeRecursiveChild(e,null,"attributes","data")}static NormalizeRecursiveChild(e,t,r,a){let s=e;if(typeof e=="object"&&!Array.isArray(e)&&e!==null)if(e[a]!==void 0){const n=e[a];s=this.NormalizeRecursiveChild(n,e,r,a)}else{let n=e;if(e[r]!==void 0){const i=e[r];n={...e,...i}}s={},Object.keys(n).map(i=>{i!==r&&(s[i]=this.NormalizeRecursiveChild(n[i],e,r,a))})}else Array.isArray(e)&&(s=[],e.map((n,i)=>{s[i]=this.NormalizeRecursiveChild(n,e,r,a)}));return s}static customApiBase(e){return this.apiConfig={baseURL:"",headers:{...e}},this.api()}static customSupabaseApiFetchAll(e,t=[],r={},a={},s={page:1,limit:15,filters:{},clearPrimaryModelOnly:!1},n){let i=(s.page-1)*s.limit,u=e,c={},f={};return n.adapter==="supabase"?(u=`${e}?${te.prepareFiltersForSupabase(s.filters)}`,c=te.prepareRelationsForSupabase(t)):n.adapter==="laravel"&&(f=te.prepareFiltersForLaravel(s.filters),c=te.prepareRelationsForLaravel(t)),this.customApiBase(a).get(u,{persistBy:"insertOrUpdate",params:{limit:s.limit,offset:i,...r,...c,...f},dataTransformer:({data:g})=>(s.clearPrimaryModelOnly&&this.deleteAll(),this.NormalizeRecursive(g))})}static customSupabaseApiFetchById(e,t,r=[],a={},s={},n){let i=e,u={};return n.adapter==="supabase"?(i=`${e}?id=eq.${t}`,u=te.prepareRelationsForSupabase(r)):n.adapter==="laravel"&&(i=`${e}/${t}`,u=te.prepareRelationsForLaravel(r)),this.customApiBase(s).get(i,{params:{...u},dataTransformer:({data:c})=>this.NormalizeRecursive(c)})}static customSupabaseApiStore(e,t,r=[],a={},s={},n,i=!1){let u=e;return i&&(t=serialize(t)),this.customApiBase(s).post(u,{...t},{params:{...a},dataTransformer:({data:c})=>this.NormalizeRecursive(c)})}static customSupabaseApiUpsert(e,t,r=[],a={},s={},n){return this.customApiBase(s).post(e,{...t},{params:{...a},dataTransformer:({data:i})=>this.NormalizeRecursive(i)})}static customSupabaseApiUpdate(e,t,r=[],a={},s={},n,i=!1){let u=e;return n.adapter==="supabase"?u=`${e}?id=eq.${t.id}`:n.adapter==="laravel"&&(u=`${e}/${t.id}`),this.customApiBase(s).patch(u,{...t},{params:{...a},dataTransformer:({data:c})=>this.NormalizeRecursive(c),save:!0})}static customSupabaseApiDelete(e,t,r={},a={},s){let n=e;return s.adapter==="supabase"?n=`${e}?id=eq.${t}`:s.adapter==="laravel"&&(n=`${e}/${t}`),this.customApiBase(a).delete(n,{delete:t})}};d(ge,"adapter","supabase"),d(ge,"primaryKey","id"),d(ge,"rules",{readables:()=>!0,readable:e=>!0,editable:e=>!0,creatable:()=>!0}),d(ge,"titleKey",ge.primaryKey);let Le=ge;const Hl={name:"DestructableExpansionPanels",props:{destroy:{type:Boolean,default(){return!1}},title:{type:String,default(){return""}}}},Ll={class:"text-h6"},Wl={class:""};function Kl(l,e,t,r,a,s){return o(),h("div",null,[t.destroy?Ee(l.$slots,"default",{key:0}):(o(),b(qt,{key:1},{header:p(()=>[S("div",Ll,k(t.title),1)]),default:p(()=>[S("div",Wl,[Ee(l.$slots,"default")])]),_:3}))])}const ql=O(Hl,[["render",Kl],["__file","DestructableExpansionPanels.vue"]]),jl=ye(()=>T(()=>import("./SuperTable.js").then(l=>l.b),__vite__mapDeps([0,1,2]))),Bl={name:"FilterPlace",components:{SuperSelect:ve,SuperTable:jl},props:{filterNames:{type:Object,default(){return{}}},filterField:{type:Object,default:()=>({})},modelValue:{type:Object,default:()=>({})}},data(){return{menu:!1,modelValueRef:{},filterNamesRef:{},placeFieldLevelTypes:["relForeignKeyMapExtraRelCountry","relForeignKeyMapExtraRelAdminArea1","relForeignKeyMapExtraRelAdminArea2","relForeignKeyMapExtraRelLocality","relForeignKeyMapExtraRelSublocality"],parentRelationships:{relForeignKeyMapExtraRelCountry:null,relForeignKeyMapExtraRelAdminArea1:"relForeignKeyMapExtraRelCountry",relForeignKeyMapExtraRelAdminArea2:"relForeignKeyMapExtraRelAdminArea1",relForeignKeyMapExtraRelLocality:"relForeignKeyMapExtraRelAdminArea2",relForeignKeyMapExtraRelSublocality:"relForeignKeyMapExtraRelLocality"}}},computed:{displayPlace(){let l="";const e=this.filterField.children;for(let t of this.placeFieldLevelTypes){let r=e.find(a=>a.usageType===t);if(r&&this.modelValueRef[r.name]&&this.modelValueRef[r.name]){let a=this.fetchDisplayNameFromVuex(r.meta.field.parent,this.modelValueRef[r.name]);a&&(l=a)}}return l}},methods:{handleSelectChange(l){const e=this.filterField.children.find(t=>t.name===l);if(e){const t=this.getChildFields(e.usageType);for(let r of t){const a=this.filterField.children.find(s=>s.usageType===r);a&&this.modelValueRef[a.name]&&(this.modelValueRef[a.name]=null)}}},getChildFields(l){const e=this.placeFieldLevelTypes.indexOf(l);return e===-1||e===this.placeFieldLevelTypes.length-1?[]:this.placeFieldLevelTypes.slice(e+1)},fetchDisplayNameFromVuex(l,e){let t="PlaceholderName";return t=l.query().whereId(e).first()[this.title(l).name],t},title(l){return pe.computedAttrs(l).find(r=>r.name!=="id")},filterParentName(l){const e=this.parentRelationships[l.usageType];let t=null;if(e){const r=this.filterField.children.find(a=>a.usageType==e);r&&(t=r.name)}return t},getFilters(l){const e=this.filterParentName(l);let t="";l.usageType==="relForeignKeyMapExtraRelAdminArea1"?t=v.mapExtraRelCountry():l.usageType==="relForeignKeyMapExtraRelAdminArea2"?t=v.mapExtraRelAdminArea1():l.usageType==="relForeignKeyMapExtraRelLocality"?t=v.mapExtraRelAdminArea2():l.usageType==="relForeignKeyMapExtraRelSublocality"&&(t=v.mapExtraRelLocality());const r=Object.keys(l.meta.relatedModel.fieldsMetadata).find(s=>l.meta.relatedModel.fieldsMetadata[s].usageType===t);let a={};return this.modelValue[e]&&(a[r]=this.modelValue[e]),a}},watch:{modelValue:{handler(l,e){JSON.stringify(l)!==JSON.stringify(e)&&(this.modelValueRef=JSON.parse(JSON.stringify(l)))},deep:!0},modelValueRef:{handler(l,e){this.$emit("update:modelValue",JSON.parse(JSON.stringify(this.modelValueRef)))},deep:!0},filterNames:{handler(l,e){JSON.stringify(l)!==JSON.stringify(e)&&(this.filterNamesRef=JSON.parse(JSON.stringify(l)))},deep:!0},filterNamesRef:{handler(l,e){this.$emit("update:filterNames",l)},deep:!0}},mounted(){this.modelValueRef=JSON.parse(JSON.stringify(this.modelValue)),this.filterNamesRef={...this.filterNames}}},Yl={key:0,class:"q-mt-md"};function zl(l,e,t,r,a,s){const n=F("SuperTable");return o(),h("div",null,[m(M,{label:"Place Filter",type:"text",modelValue:s.displayPlace,"onUpdate:modelValue":e[0]||(e[0]=i=>s.displayPlace=i),error:!1,"error-message":"",disable:"",filled:"",dense:"",placeholder:"All",class:"FilterPlaceTrigger"},null,8,["modelValue"]),m(nt,{modelValue:a.menu,"onUpdate:modelValue":e[2]||(e[2]=i=>a.menu=i),fit:"",class:"q-pt-none","no-corner":""},{default:p(()=>[m(q,null,{default:p(()=>[m(re,null,{default:p(()=>[(o(!0),h(V,null,Y(t.filterField.children,i=>(o(),h(V,{key:i.name},[i.usageType.startsWith("relForeignKeyMapExtraRel")?(o(),h("div",Yl,[typeof a.modelValueRef[i.name]!="undefined"?(o(),b(n,{key:0,allowAll:"",modelField:i,model:i.meta.field.parent,filterVals:s.getFilters(i),modelValue:a.modelValueRef[i.name],"onUpdate:modelValue":[u=>a.modelValueRef[i.name]=u,u=>s.handleSelectChange(i.name)],titleVal:a.filterNamesRef[i.name],"onUpdate:titleVal":u=>a.filterNamesRef[i.name]=u,disabled:s.filterParentName(i)&&!a.modelValueRef[s.filterParentName(i)],isForSelectingRelation:!0,hideCreate:"",selectHideBottomSpace:""},null,8,["modelField","model","filterVals","modelValue","onUpdate:modelValue","titleVal","onUpdate:titleVal","disabled"])):E("",!0)])):E("",!0)],64))),128)),m(P,{color:"primary",class:"q-mt-md",onClick:e[1]||(e[1]=i=>a.menu=!1)},{default:p(()=>[L("OK")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const Gl=O(Bl,[["render",zl],["__file","FilterPlace.vue"]]);y.extend(jt);y.extend(Bt);y.extend(dt);y.extend(Yt);y.extend(zt);y.extend(Gt);const Ql={name:"FilterTime",props:{modelField:{type:Object,default(){return{}}},modelValue:{type:Object,default:()=>({year:null,month:null,week:null,day:null,range:{start:null,end:null}})}},data(){return{years:this.generateYears(),months:[],weeks:[],days:[],menu:!1}},computed:{displayDate(){if(this.selectedDay)return y(this.selectedDay).format("ddd, MMM D, YYYY");if(this.selectedWeek){const l=y().year(this.selectedYear).month(this.selectedMonth-1).isoWeek(this.selectedWeek).startOf("isoWeek"),e=l.clone().endOf("isoWeek");return l.month()===e.month()?`${l.format("ddd D")} - ${e.format("ddd D, MMM, YYYY")}`:`${l.format("ddd D, MMM")} - ${e.format("ddd D, MMM, YYYY")}`}return this.selectedMonth?y(`${this.selectedYear}-${this.selectedMonth}-01`).format("MMM, YYYY"):this.selectedYear?this.selectedYear.toString():""},selectedYear:{get(){var l,e;return(l=this.modelValue)!=null&&l.year?(e=this.modelValue)==null?void 0:e.year:null},set(l){const e={...this.modelValue,year:l,month:null,week:null,day:null};this.$emit("update:modelValue",{...e,range:this.computeRange(e)}),this.months=this.generateMonths()}},selectedMonth:{get(){var l,e;return(l=this.modelValue)!=null&&l.month?(e=this.modelValue)==null?void 0:e.month:null},set(l){const e={...this.modelValue,month:l,week:null,day:null};this.$emit("update:modelValue",{...e,range:this.computeRange(e)}),this.weeks=this.generateWeeks(this.selectedYear,l)}},selectedWeek:{get(){var l,e;return(l=this.modelValue)!=null&&l.week?(e=this.modelValue)==null?void 0:e.week:null},set(l){const e={...this.modelValue,week:l,day:null};this.$emit("update:modelValue",{...e,range:this.computeRange(e)}),this.days=this.generateDays(this.selectedYear,this.selectedMonth,l)}},selectedDay:{get(){var l,e;return(l=this.modelValue)!=null&&l.day?(e=this.modelValue)==null?void 0:e.day:null},set(l){const e={...this.modelValue,day:l};this.$emit("update:modelValue",{...e,range:this.computeRange(e)})}}},methods:{toggleMenu(){this.menu=!this.menu},computeRange(l){let e,t;return l.day?(e=y(l.day).startOf("day"),t=y(l.day).endOf("day")):l.week?(e=y().year(l.year).isoWeek(l.week).startOf("isoWeek"),t=e.clone().endOf("isoWeek")):l.month?(e=y(`${l.year}-${l.month}-01`,"YYYY-MM-DD"),t=e.clone().endOf("month")):l.year&&(e=y(`${l.year}-01-01`,"YYYY-MM-DD"),t=y(`${l.year}-12-31`,"YYYY-MM-DD")),{start:e?e.format("YYYY-MM-DD"):null,end:t?t.format("YYYY-MM-DD"):null}},generateYears(){const l=y().year(),e=[{label:"All",value:null}];for(let t=0;t<10;t++){const r=l-t,a=r===l?`${r} (Current Year)`:r;e.push({label:a,value:r})}return e},generateMonths(){const l=y().month(),e=[{label:"All",value:null}];for(let t=0;t<12;t++){const r=t===l?`${y().month(t).format("MMMM")} (Current Month)`:y().month(t).format("MMMM");e.push({label:r,value:t+1})}return e},generateWeeks(l,e){const t=y(`${l}-${e}-01`,"YYYY-MM-DD").startOf("month"),r=t.clone().endOf("month"),a=y(),s=[{label:"All",value:null}];let n=1,i=t.clone();for(;i.isBefore(r)||i.isSame(r,"day");){const u=i.startOf("isoWeek"),c=u.clone().endOf("isoWeek");let f;u.month()===c.month()?f=`Week ${n} (${u.format("MMM D")} - ${c.format("D")})`:f=`Week ${n} (${u.format("MMM D")} - ${c.format("MMM D")})`,a.isBetween(u,c,"day","[]")&&(f=`${f} (Current Week)`),s.push({label:f,value:u.isoWeek()}),i=i.add(1,"week"),n++}return s},generateDays(l,e,t){const r=y().year(l).isoWeek(t).startOf("isoWeek"),a=r.add(6,"day"),s=[],n=y().format("YYYY-MM-DD");let i=r.clone();for(;i.isBefore(a)||i.isSame(a,"day");){let c=i.format("dd, Do");i.format("YYYY-MM-DD")===n&&(c=`${c} (Today)`),s.push({label:c,value:i.format("YYYY-MM-DD")}),i=i.add(1,"day")}const u=s.filter(c=>y(c.value).month()+1===e);return[{label:"All",value:null},...u]}},mounted(){this.filtersData=this.modelValue}};function Jl(l,e,t,r,a,s){return o(),h("div",null,[m(M,{label:"Time Filter",type:"text",modelValue:s.displayDate,"onUpdate:modelValue":e[0]||(e[0]=n=>s.displayDate=n),error:!1,"error-message":"",disable:"",filled:"",dense:"",onClick:s.toggleMenu,class:"FilterTimeTrigger"},null,8,["modelValue","onClick"]),m(nt,{modelValue:a.menu,"onUpdate:modelValue":e[6]||(e[6]=n=>a.menu=n),fit:"",class:"q-pt-none","no-corner":"","close-on-content-click":!1},{default:p(()=>[m(q,null,{default:p(()=>[m(re,null,{default:p(()=>[m(Se,{options:a.years,modelValue:s.selectedYear,"onUpdate:modelValue":e[1]||(e[1]=n=>s.selectedYear=n),label:"Year","option-label":"label","option-value":"value",dense:"",filled:"",emitValue:"",mapOptions:"",class:"q-mb-sm"},null,8,["options","modelValue"]),m(Se,{options:a.months,modelValue:s.selectedMonth,"onUpdate:modelValue":e[2]||(e[2]=n=>s.selectedMonth=n),label:"Month",disable:!s.selectedYear,"option-label":"label","option-value":"value",dense:"",filled:"",emitValue:"",mapOptions:"",class:"q-mb-sm"},null,8,["options","modelValue","disable"]),m(Se,{options:a.weeks,modelValue:s.selectedWeek,"onUpdate:modelValue":e[3]||(e[3]=n=>s.selectedWeek=n),label:"Week",disable:!s.selectedMonth,"option-label":"label","option-value":"value",dense:"",filled:"",emitValue:"",mapOptions:"",class:"q-mb-sm"},null,8,["options","modelValue","disable"]),m(Se,{options:a.days,modelValue:s.selectedDay,"onUpdate:modelValue":e[4]||(e[4]=n=>s.selectedDay=n),label:"Day",disable:!s.selectedWeek,"option-label":"label","option-value":"value",dense:"",filled:"",emitValue:"",mapOptions:"",class:"q-mb-sm"},null,8,["options","modelValue","disable"]),m(Ue,null,{default:p(()=>[m(it),m(P,{color:"primary",onClick:e[5]||(e[5]=n=>a.menu=!1)},{default:p(()=>[L("OK")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const $l=O(Ql,[["render",Jl],["__file","FilterTime.vue"]]),Zl={__name:"PdfTemplate",props:{items:{type:Array,required:!0},options:{type:{},required:!0}},setup(l,{expose:e}){e();const t=l,r=we(()=>t.items.length===0?[]:Object.keys(t.items[0]).map(i=>({name:i,align:"left",label:i.charAt(0).toUpperCase()+i.slice(1),field:i}))),a=we(()=>t.items),s=Xe({page:1,rowsPerPage:0}),n={props:t,tableColumns:r,tableRows:a,pagination:s,computed:we,ref:Xe,defineAsyncComponent:ye};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}},Xl={style:{},id:"pdfContent"},er={class:""},tr={key:0,class:"text-center q-pa-md",style:{color:"DimGray"}};function ar(l,e,t,r,a,s){return o(),h("div",Xl,[S("div",er,[r.tableRows.length?E("",!0):(o(),h("div",tr," None ")),m($t,{separator:"none",rows:r.tableRows,columns:r.tableColumns,"row-key":"key",flat:"",dense:"",pagination:r.pagination,"hide-bottom":""},{header:p(n=>[m(et,{props:n},{default:p(()=>[(o(!0),h(V,null,Y(n.cols,i=>(o(),b(Qt,{key:i.name,props:n,class:"table-header"},{default:p(()=>[L(k(i.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:p(n=>[m(et,{props:n},{default:p(()=>[(o(!0),h(V,null,Y(n.cols,i=>(o(),b(Jt,{key:i.name,props:n,class:"table-cell"},{default:p(()=>[L(k(n.row[i.field]),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"])])])}const lr=O(Zl,[["render",ar],["__scopeId","data-v-0f231a8a"],["__file","PdfTemplate.vue"]]);y.extend(be);y.extend(_e);const rr={props:{events:Array,modelValue:String,view:String,mixedConfigs:Array},data(){return{currentDate:null,currentTime:null,timeStartPos:0,colors:["blue","indigo","deep-purple","cyan","green","orange","grey darken-1"]}},computed:{style(){return{top:`${this.timeStartPos}px`}}},methods:{moveToToday(){this.$refs.calendar.moveToToday()},prev(){this.$refs.calendar.prev()},next(){this.$refs.calendar.next()},momentMethod(l,e){return y(l).format(e)},isToday(l){return y(l).isSame(y(),"day")},getEvents(l){return this.events.filter(e=>e.date===l)},showEvent(l){this.$emit("show-event",l)},badgeClasses(l,e){const t=e==="header";return{[`text-white bg-${this.colors[l.configIndex]}`]:!0,"full-width":!t&&(!l.side||l.side==="full"),"left-side":!t&&l.side==="left","right-side":!t&&l.side==="right","rounded-border":!0}},badgeStyles(l,e,t=void 0,r=void 0){const a={};return t&&r&&(a.top=`${t(l.time)}px`,a.height=`${r(l.duration)}px`),a["align-items"]="flex-start",a},hasDate(l){return this.currentDate?l.some(e=>e.date===this.currentDate):!1},adjustCurrentTime(){const l=Zt(new Date);this.currentDate=l.date,this.currentTime=l.time,this.timeStartPos=this.$refs.calendar.timeStartPos(this.currentTime,!1)}},mounted(){this.adjustCurrentTime(),setInterval(()=>{this.adjustCurrentTime()},6e4)}},sr={class:"text-center"},ir={class:"text-weight-bold q-mt-xs"},nr={style:{display:"flex","justify-content":"center","flex-wrap":"wrap",padding:"2px"}},dr={class:"title q-calendar__ellipsis"},or=["onClick"],ur={key:0,class:"title q-calendar__ellipsis"};function mr(l,e,t,r,a,s){const n=F("q-calendar-day");return o(),b(n,{ref:"calendar",modelValue:t.modelValue,"onUpdate:modelValue":e[0]||(e[0]=i=>l.$emit("update:modelValue",i)),view:t.view,"short-weekday-label":"","date-header":"stacked","weekday-align":"center","date-align":"center",bordered:"","interval-height":20,"interval-start":5,"interval-count":19,"hour24-format":"",weekdays:[1,2,3,4,5,6,0],"no-active-date":""},{"head-day":p(({scope:i})=>[S("div",sr,[S("div",ir,k(s.momentMethod(i.timestamp.date,"ddd")),1),m(P,{flat:"",rounded:"",dense:"",style:w([s.isToday(i.timestamp.date)?"border: solid 2px var(--q-primary);":"border: solid 2px rgba(0,0,0,0);",{"font-size":"0.75em"}]),label:s.momentMethod(i.timestamp.date,"D")+" "+s.momentMethod(i.timestamp.date,"MMM"),onClick:u=>l.onClickDate(i.timestamp.date),class:"q-mb-sm text-bold"},null,8,["style","label","onClick"])])]),"day-container":p(({scope:{days:i}})=>[s.hasDate(i)?(o(),h(V,{key:0},[S("div",{class:"day-view-current-time-indicator",style:w(s.style)},null,4),S("div",{class:"day-view-current-time-line",style:w(s.style)},null,4)],64)):E("",!0)]),"head-day-event":p(({scope:{timestamp:i}})=>[S("div",nr,[(o(!0),h(V,null,Y(s.getEvents(i.date),u=>(o(),h(V,{key:u.id},[u.time?(o(),b(tt,{key:1,class:j(s.badgeClasses(u,"header")),style:w([s.badgeStyles(u,"header"),{margin:"1px",width:"10px","max-width":"10px",height:"10px","max-height":"10px",cursor:"pointer"}]),onClick:c=>s.showEvent(u)},{default:p(()=>[m(Ne,null,{default:p(()=>[L(k(u.time+" - "+u.title),1)]),_:2},1024)]),_:2},1032,["class","style","onClick"])):(o(),b(tt,{key:0,class:j(s.badgeClasses(u,"header")),style:w([s.badgeStyles(u,"header"),{width:"100%",cursor:"pointer",height:"12px","font-size":"10px",margin:"1px"}])},{default:p(()=>[S("div",dr,k(u.title),1)]),_:2},1032,["class","style"]))],64))),128))])]),"day-body":p(({scope:{timestamp:i,timeStartPos:u,timeDurationHeight:c}})=>[(o(!0),h(V,null,Y(s.getEvents(i.date),f=>(o(),h(V,{key:f.id},[f.time!==void 0?(o(),h("div",{key:0,onClick:g=>s.showEvent(f),class:j(["my-event",s.badgeClasses(f,"body")]),style:w(s.badgeStyles(f,"body",u,c))},[f.duration>=30?(o(),h("div",ur,k(f.title),1)):E("",!0),m(Ne,null,{default:p(()=>[L(k(f.time+" - "+f.title),1)]),_:2},1024)],14,or)):E("",!0)],64))),128))]),_:1},8,["modelValue","view"])}const cr=O(rr,[["render",mr],["__file","SuperTableCalendarDay.vue"]]);y.extend(dt);const hr={components:{RecordFieldsForDisplayGeneric:Oe,RecordFieldsForDisplayCustom:xe},props:{events:Array,modelValue:String,view:String,mixedConfigs:Array},methods:{moveToToday(){this.$refs.calendar.moveToToday()},prev(){this.$refs.calendar.prev()},next(){this.$refs.calendar.next()},dayjsMethod(l,e){return y(l).format(e)},isToday(l){return y(l).isSame(y(),"day")},getEvents(l){return this.events.filter(e=>e.date===l)},showEvent(l){this.$emit("show-event",l)},editItem(l){this.getCurrentConfig(l.configIndex).events.editItem(l)},deleteItem(l){this.getCurrentConfig(l.configIndex).events.deleteItem(l)},getCurrentConfig(l){return this.mixedConfigs[l]},getCurrentTemplate(l){return this.getCurrentConfig(l).templateListCalendar||{}},getCurrentSuperOptions(l){return this.getCurrentConfig(l).superOptions||{}},getCurrentUnClickable(l){return this.getCurrentConfig(l).unClickable||!1}}},pr={class:"text-center"},fr={class:"text-weight-bold q-mt-xs"},yr={key:0,class:"text-center q-pa-md text-grey-5"};function br(l,e,t,r,a,s){const n=F("RecordFieldsForDisplayCustom"),i=F("RecordFieldsForDisplayGeneric"),u=F("q-calendar-agenda");return o(),b(u,{ref:"calendar","model-value":t.modelValue,"onUpdate:modelValue":e[0]||(e[0]=c=>l.$emit("update:modelValue",c)),view:t.view,weekdays:[1,2,3,4,5,6,0],"short-weekday-label":"","date-header":"stacked","weekday-align":"center","date-align":"center",bordered:"","interval-height":40,"interval-start":5,"interval-count":19,"hour24-format":""},{"head-day":p(({scope:c})=>[S("div",pr,[S("div",fr,k(s.dayjsMethod(c.timestamp.date,"ddd")),1),m(P,{flat:"",rounded:"",dense:"",style:w([s.isToday(c.timestamp.date)?"border: solid 2px var(--q-primary);":"border: solid 2px rgba(0,0,0,0);",{"font-size":"0.75em"}]),label:s.dayjsMethod(c.timestamp.date,"D")+" "+s.dayjsMethod(c.timestamp.date,"MMM"),onClick:f=>l.onClickDate(c.timestamp.date),class:"q-mb-sm text-bold"},null,8,["style","label","onClick"])])]),day:p(({scope:{timestamp:c}})=>[s.getEvents(c.date).length?E("",!0):(o(),h("div",yr,"None")),(o(!0),h(V,null,Y(s.getEvents(c.date),f=>(o(),b(q,{key:f.id,class:"q-pa-none q-ma-sm",onClick:g=>s.showEvent(f)},{default:p(()=>{var g;return[(g=s.getCurrentTemplate(f.configIndex))!=null&&g.cols?(o(),b(n,{key:0,item:f.meta,maxFields:6,childRelations:[],isSummary:"",superOptions:s.getCurrentSuperOptions(f.configIndex),template:s.getCurrentTemplate(f.configIndex),onEditItem:s.editItem,onDeleteItem:s.deleteItem,unClickable:s.getCurrentUnClickable(f.configIndex)},null,8,["item","superOptions","template","onEditItem","onDeleteItem","unClickable"])):(o(),b(i,{key:1,item:f.meta,maxFields:6,superOptions:s.getCurrentSuperOptions(f.configIndex),onEditItem:s.editItem,onDeleteItem:s.deleteItem,unClickable:s.getCurrentUnClickable(f.configIndex)},null,8,["item","superOptions","onEditItem","onDeleteItem","unClickable"]))]}),_:2},1032,["onClick"]))),128))]),_:1},8,["model-value","view"])}const gr=O(hr,[["render",br],["__file","SuperTableCalendarAgenda.vue"]]),_r={};function Tr(l,e){return o(),h("div",null,[m(P,{class:"button",onClick:e[0]||(e[0]=t=>l.$emit("today")),unelevated:"",color:"grey-3","text-color":"grey-8"},{default:p(()=>[L(" Today ")]),_:1}),m(P,{"no-caps":"",class:"button",onClick:e[1]||(e[1]=t=>l.$emit("prev")),unelevated:"",icon:"arrow_left"}),m(P,{"no-caps":"",class:"button",onClick:e[2]||(e[2]=t=>l.$emit("next")),unelevated:"","icon-right":"arrow_right"})])}const Sr=O(_r,[["render",Tr],["__file","CalendarNavigationBar.vue"]]);y.extend(be);y.extend(_e);const Vr={name:"SuperCalendar",components:{SuperTableCalendarDay:cr,SuperTableCalendarAgenda:gr,CalendarNavigationBar:Sr,RecordFieldsForDisplayCustom:xe,RecordFieldsForDisplayGeneric:Oe},props:{loading:{type:Boolean,default:!1},mixedConfigs:{type:Array,required:!0}},data(){return{calendarMode:"List",selectedDate:y().format("YYYY-MM-DD"),view:"week",viewItemData:{showModal:!1,data:{},configIndex:null}}},computed:{activeItemAndType(){return this.mixedConfigs[this.viewItemData.configIndex]||{}},firstNonIdKeys(){const l={};return this.mixedConfigs.forEach((e,t)=>{let r=Object.keys(e.superOptions.headers).find(n=>e.superOptions.headers[n].name!=="id"),a=e.superOptions.headers[r].name;if(!e.superOptions.headers.find(n=>n.usageType==="timeRangeStart")){for(const n of e.superOptions.headers)if(n.headerParentFields&&n.headerParentFields.find(u=>u.usageType==="timeRangeStart")){const u=pe.SupaerTableHeaders(n.meta.relatedModel,[],[],[]),c=Object.keys(u).find(f=>u[f].name!=="id");a=[n.name,u[c].name]}}l[t]=a}),l},combinedEvents(){const l=[];return this.mixedConfigs.forEach((e,t)=>{const r=this.firstNonIdKeys[t];e.items.forEach(a=>{let s,n;const i=e.startFieldName.split("."),u=e.endFieldName.split(".");i.length>1?(s=y(a[i[0]][i[1]]),n=y(a[u[0]][u[1]])):(s=y(a[i[0]]),n=y(a[u[0]]));const c=s.format("YYYY-MM-DD"),f=s.format("HH:mm"),g=n.diff(s,"minute"),U=Math.max(g,15),D=Array.isArray(r)?a[r[0]][r[1]]:a[r]||"Untitled Event",z={id:a.id||`${c}-${t}-${D}`,title:D,date:c,time:f,duration:U,bgcolor:"deep-purple",icon:"fas fa-calendar-alt",meta:a,configIndex:t};l.push(z)})}),l}},methods:{onShowEvent(l){this.viewItemData={showModal:!0,data:l.meta,configIndex:l.configIndex}},onEditItem(l){this.activeItemAndType.events.editItem(l.meta)},onDeleteItem(l){this.activeItemAndType.events.deleteItem(l.meta)},onToday(){this.$refs.calendarAgenda?this.$refs.calendarAgenda.moveToToday():this.$refs.calendar&&this.$refs.calendar.moveToToday()},onPrev(){this.$refs.calendarAgenda?this.$refs.calendarAgenda.prev():this.$refs.calendar&&this.$refs.calendar.prev()},onNext(){this.$refs.calendarAgenda?this.$refs.calendarAgenda.next():this.$refs.calendar&&this.$refs.calendar.next()}},mounted(){window.innerWidth<768&&(this.view="day")}},Er={key:0,class:"text-center q-pa-md"},Fr={class:"row items-center wrap q-pb-sm"},Dr={class:"q-ml-md"},Ar={style:{display:"flex","max-width":"100%",width:"100%"}};function Ir(l,e,t,r,a,s){const n=F("CalendarNavigationBar"),i=F("SuperTableCalendarDay"),u=F("SuperTableCalendarAgenda"),c=F("RecordFieldsForDisplayCustom"),f=F("RecordFieldsForDisplayGeneric");return o(),h("div",null,[t.loading?(o(),h("div",Er,"Loading...")):E("",!0),S("div",{style:w(`display: ${t.loading?"none":"block"};`)},[S("div",Fr,[m(Xt,{label:"Time Grid",modelValue:a.calendarMode,"onUpdate:modelValue":e[0]||(e[0]=g=>a.calendarMode=g),"toggle-color":"primary","false-value":"List","true-value":"Timeline",unelevated:"","text-color":"grey-8"},null,8,["modelValue"]),S("div",Dr,[m(n,{onToday:s.onToday,onPrev:s.onPrev,onNext:s.onNext},null,8,["onToday","onPrev","onNext"])])]),S("div",Ar,[a.calendarMode==="Timeline"?(o(),b(i,{key:0,ref:"calendar",events:s.combinedEvents,mixedConfigs:t.mixedConfigs,modelValue:a.selectedDate,"onUpdate:modelValue":e[1]||(e[1]=g=>a.selectedDate=g),view:a.view,onShowEvent:s.onShowEvent,onEditItem:s.onEditItem,onDeleteItem:s.onDeleteItem},null,8,["events","mixedConfigs","modelValue","view","onShowEvent","onEditItem","onDeleteItem"])):(o(),b(u,{key:1,ref:"calendarAgenda",events:s.combinedEvents,mixedConfigs:t.mixedConfigs,modelValue:a.selectedDate,"onUpdate:modelValue":e[2]||(e[2]=g=>a.selectedDate=g),view:a.view,onShowEvent:s.onShowEvent,onEditItem:s.onEditItem,onDeleteItem:s.onDeleteItem},null,8,["events","mixedConfigs","modelValue","view","onShowEvent","onEditItem","onDeleteItem"]))])],4),m(J,{modelValue:a.viewItemData.showModal,"onUpdate:modelValue":e[9]||(e[9]=g=>a.viewItemData.showModal=g),"max-width":"800px"},{default:p(()=>[m(q,{class:"q-pa-none",style:{width:"700px","max-width":"calc(100vw - 32px)"}},{default:p(()=>[s.activeItemAndType.templateListGrid&&s.activeItemAndType.templateListGrid.cols?(o(),b(c,{key:0,item:a.viewItemData.data,maxFields:6,childRelations:[],isSummary:"",superOptions:s.activeItemAndType.superOptions,template:s.activeItemAndType.templateListGrid,onEditItem:e[3]||(e[3]=g=>{l.$emit("editItem",g,this.viewItemData.configIndex)}),onDeleteItem:e[4]||(e[4]=g=>{l.$emit("deleteItem",g,this.viewItemData.configIndex)}),onClickRow:e[5]||(e[5]=g=>{l.$emit("clickRow",null,g,this.viewItemData.configIndex)}),unClickable:s.activeItemAndType.unClickable},null,8,["item","superOptions","template","unClickable"])):(o(),b(f,{key:1,item:a.viewItemData.data,maxFields:6,superOptions:s.activeItemAndType.superOptions,onEditItem:e[6]||(e[6]=g=>{l.$emit("editItem",g,this.viewItemData.configIndex)}),onDeleteItem:e[7]||(e[7]=g=>{l.$emit("deleteItem",g,this.viewItemData.configIndex)}),onClickRow:e[8]||(e[8]=g=>{l.$emit("clickRow",null,g,this.viewItemData.configIndex)}),unClickable:s.activeItemAndType.unClickable},null,8,["item","superOptions","unClickable"]))]),_:1})]),_:1},8,["modelValue"])])}const zr=O(Vr,[["render",Ir],["__file","SuperCalendar.vue"]]);y.extend(be);y.extend(_e);const Ur=ye(()=>T(()=>import("./SuperTable.js").then(l=>l.b),__vite__mapDeps([0,1,2]))),vr={name:"SuperTableTopBar",components:{PdfTemplate:lr,CreateButton:ot,DestructableExpansionPanels:ql,FilterTime:$l,SuperTable:Ur,FilterPlace:Gl},props:{filterNames:{type:Object,default(){return{}}},templateForm:{type:Object,default(){return{}}},createButtonText:{type:String,default:""},allowedFilters:{type:Array,default:null},noBorder:{type:Boolean,default:!1},modelValue:{type:Object,default:{}},downloadables:{type:Object,default:{}},templateListTable:{type:Object,default:{}},canCreateComputed:{type:Boolean,default:!1},canEdit:{type:Boolean,default:!1},isForSelectingRelation:{type:Boolean,default:!1},hideCreate:{type:Boolean,default:!1},startFieldName:{type:String,default:""},activeTab:{type:String,default:""},search:{type:String,default:""},longField:{type:Object,default:{}},superOptions:{type:Object,default(){return{headers:[],modelFields:[],displayMapField:!1,model:{},canEdit:!1,currentParentRecord:{}}}},viewAs:{type:Object,default(){return{show:["table","grid","map","calendar"],default:"table"}}}},data(){return{searchRef:"",modelValueRef:{},filterNamesRef:{}}},computed:{flattenedHeaders(){let l=[];if(this.templateListTable.length)for(const e of this.templateListTable){const t=this.superOptions.headers.find(a=>a.field===e.field);let r={};if(typeof t!="undefined")r=t,typeof e.label!="undefined"&&(r.label=e.label),r.userConfig=e;else{let a="";typeof e.label!="undefined"&&!e.hideLabel&&(a=e.label);let s="";typeof e.field!="undefined"&&(s=e.field),r={align:"left",dataType:"attr",field:s,label:a,meta:{},name:s,sortable:!!s.length,usageType:"normal",userConfig:e}}l.push(r)}else for(const e of this.superOptions.headers)if(l.push(e),e.headerParentFields)for(const t of e.headerParentFields)l.push({...t,userConfig:{}});return l},quickListsIsMobile(){return pe.quickListsIsMobile()},tabOptions(){let l=[];return this.viewAs.show.includes("grid")&&l.push({label:"Grid",value:"grid",icon:"grid_view"}),this.viewAs.show.includes("map")&&Object.keys(this.longField).length!==0&&l.push({label:"Map",value:"map",icon:"map"}),this.viewAs.show.includes("calendar")&&this.startFieldName&&l.push({label:"Calendar",value:"calendar",icon:"calendar_today"}),this.viewAs.show.includes("table")&&l.push({label:"Table",value:"table"}),l},itemsForExport(){var t,r;const l=[];let e={};for(const a of this.items){e={};for(const s of this.flattenedHeaders)s.userConfig&&s.userConfig.type==="function"?e[s.label]=s.userConfig.function(a):s.usageType&&(s.usageType==="readOnlyTimestampType"||s.usageType==="timestampType"||s.usageType==="timeRangeStart"||s.usageType==="timeRangeEnd"?e[s.label]=this.formatTimestamp(a[s.field]):s.usageType.startsWith("relLookup")?(t=a==null?void 0:a[s.field])!=null&&t[s.meta.lookupDisplayField]&&(e[s.label]=(r=a==null?void 0:a[s.field])==null?void 0:r[s.meta.lookupDisplayField]):!s.usageType.startsWith("relChildren")&&a[s.field]&&(e[s.label]=this.truncateStr(a[s.field])));l.push(e)}return l},filterInputs(){const l=this.superOptions.modelFields;return pe.filterInputs(l)}},methods:{toHtmlIdSafeString(l){return l.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/[^a-z0-9_-]/g,"").replace(/^-+/,"")},createItem(l){this.$emit("createItem",l)},formatTimestamp(l){return l?y.utc(l,"YYYY-MM-DDTHH:mm:ss.SSSSSSZ").tz("Africa/Johannesburg").format("dddd, MMMM D, YYYY h:mm A"):null},convertToCsv(){if(this.itemsForExport.length===0)return"";const l=Object.keys(this.itemsForExport[0]).join(","),e=this.itemsForExport.map(t=>Object.values(t).map(r=>`"${r}"`).join(","));return[l,...e].join(`\r
`)},truncateStr(l){let e="";return l&&(e=l.length>40?l.substring(0,40)+"...":l),e},defineAsyncComponent:ye,downloadCsv(){var r;const l=this.convertToCsv(),e=new Blob([l],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a");t.href=URL.createObjectURL(e),t.setAttribute("download",`${(r=this.downloadables.csv)==null?void 0:r.title}.csv`),document.body.appendChild(t),t.click(),document.body.removeChild(t)},downloadPdf(){var r,a,s,n;const l=document.querySelector(`#pdfBody${this.toHtmlIdSafeString((r=this.downloadables.pdf)==null?void 0:r.title)}`),e=document.querySelector(`#pdfHeader${this.toHtmlIdSafeString((a=this.downloadables.pdf)==null?void 0:a.title)}`),t=document.querySelector(`#pdfFooter${this.toHtmlIdSafeString((s=this.downloadables.pdf)==null?void 0:s.title)}`);pe.downloadPdf((n=this.downloadables.pdf)==null?void 0:n.title,l,this.downloadables.pdf.margin?this.downloadables.pdf.margin:0,t,e)},shouldWeShowTopBar(){let l=!1;return(this.viewAs.show.length||this.filterInputs.length&&(this.allowedFilters==null||this.filterInputs.some(e=>this.allowedFilters.includes(e.name)))||this.superOptions.model.titleKey!==this.superOptions.model.primaryKey||Object.keys(this.downloadables).includes("csv")||Object.keys(this.downloadables).includes("pdf")||this.canCreateComputed&&this.canEdit&&!this.hideCreate&&!this.isForSelectingRelation)&&(l=!0),l}},watch:{modelValue:{handler(l,e){JSON.stringify(l)!==JSON.stringify(e)&&(this.modelValueRef={...l})},deep:!0},modelValueRef:{handler(l,e){this.$emit("update:modelValue",this.modelValueRef)},deep:!0},filterNames:{handler(l,e){JSON.stringify(l)!==JSON.stringify(e)&&(this.filterNamesRef=JSON.parse(JSON.stringify(l)))},deep:!0},filterNamesRef:{handler(l,e){this.$emit("update:filterNames",l)},deep:!0},search:{handler(l,e){JSON.stringify(l)!==JSON.stringify(e)&&(this.searchRef=l)}},searchRef:{handler(l,e){JSON.stringify(l)!==JSON.stringify(e)&&this.$emit("update:search",l)}}},mounted(){if(this.modelValueRef={...this.modelValue},Object.keys(this.filterNames).length!==0)this.filterNamesRef={...this.filterNames};else for(const l of this.superOptions.modelFields)l.usageType.startsWith("relForeignKey")&&(this.filterNamesRef[l.name]=null);this.searchRef=this.search;for(const l of this.superOptions.modelFields)l.usageType.startsWith("relForeignKey")?this.modelValueRef[l.name]=null:l.dataType.startsWith("mapExtraRel")?this.modelValueRef[l.name]=null:l.usageType=="timeRangeStart"&&(this.modelValueRef[l.name]=null)}},kr={class:"row items-center wrap"},Rr={key:0,style:{"margin-bottom":"20px"},class:"q-mr-sm"},Or={key:1,class:"q-mr-sm"},xr={key:0,style:{"min-width":"200px"}},Mr={style:{display:"none"}},wr=["id"],Pr=["id"];function Nr(l,e,t,r,a,s){const n=F("CreateButton"),i=F("SuperTable"),u=F("FilterTime"),c=F("FilterPlace"),f=F("PdfTemplate"),g=F("DestructableExpansionPanels");return o(),h("div",null,[s.shouldWeShowTopBar()?(o(),h("div",{key:0,class:j(t.noBorder?"q-mx-md":"")},[m(g,{destroy:!s.quickListsIsMobile,title:"Settings"},{default:p(()=>{var U,D,z,se,De;return[S("div",kr,[t.canCreateComputed&&t.canEdit&&!t.hideCreate&&!t.isForSelectingRelation?(o(),h("div",Rr,[l.$slots.create?Ee(l.$slots,"create",{key:0}):(o(),h(V,{key:1},[t.superOptions.model.rules.creatable()?(o(),b(n,{key:0,modelFields:t.superOptions.modelFields,onCreateItem:s.createItem,model:t.superOptions.model,superOptions:t.superOptions,template:t.templateForm,createButtonText:t.createButtonText},null,8,["modelFields","onCreateItem","model","superOptions","template","createButtonText"])):E("",!0)],64))])):E("",!0),t.viewAs.show.length?(o(),h("div",Or,[m(ea,{modelValue:t.activeTab,"onUpdate:modelValue":e[0]||(e[0]=x=>{l.$emit("update:activeTab",x)}),"toggle-color":"primary",options:s.tabOptions,style:{"margin-bottom":"20px"},unelevated:"","text-color":"grey-8",color:"grey-3"},null,8,["modelValue","options"])])):E("",!0),(o(!0),h(V,null,Y(s.filterInputs,x=>(o(),h(V,{key:x.name},[typeof a.modelValueRef[x.name]!="undefined"&&(t.allowedFilters==null||t.allowedFilters.includes(x.name))?(o(),h(V,{key:0},[x.usageType.startsWith("relForeignKey")?(o(),h("div",xr,[m(i,{isForSelectingRelation:!0,canEdit:!1,modelValue:a.modelValueRef[x.name],"onUpdate:modelValue":ie=>a.modelValueRef[x.name]=ie,titleVal:a.filterNamesRef[x.name],"onUpdate:titleVal":ie=>a.filterNamesRef[x.name]=ie,model:x.meta.field.parent,rules:[()=>!0],modelField:x,class:"q-mr-sm"},null,8,["modelValue","onUpdate:modelValue","titleVal","onUpdate:titleVal","model","modelField"])])):E("",!0),x.usageType=="timeRangeStart"?(o(),b(u,{key:x.name,modelField:x,modelValue:a.modelValueRef[x.name],"onUpdate:modelValue":ie=>a.modelValueRef[x.name]=ie,class:"q-mr-sm col-grow",style:{"max-width":"200px"}},null,8,["modelField","modelValue","onUpdate:modelValue"])):E("",!0)],64)):(o(),h(V,{key:1},[x.usageType=="mapFilter"?(o(),h(V,{key:0},[Object.keys(this.filterNames).length!==0?(o(),b(c,{key:x.name,filterField:x,modelValue:a.modelValueRef,"onUpdate:modelValue":e[1]||(e[1]=ie=>a.modelValueRef=ie),filterNames:a.filterNamesRef,"onUpdate:filterNames":e[2]||(e[2]=ie=>a.filterNamesRef=ie),class:"q-mr-sm col-grow",style:{"max-width":"200px"}},null,8,["filterField","modelValue","filterNames"])):E("",!0)],64)):E("",!0)],64))],64))),128)),this.superOptions.model.titleKey!==this.superOptions.model.primaryKey?(o(),b(M,{key:2,modelValue:a.searchRef,"onUpdate:modelValue":e[3]||(e[3]=x=>a.searchRef=x),error:!1,"error-message":"",label:"Search",dense:"",filled:""},null,8,["modelValue"])):E("",!0),Object.keys(t.downloadables).includes("csv")?(o(),b(P,{key:3,icon:"download",label:"CSV",onClick:s.downloadCsv,class:"q-mb-md q-ml-md text-grey-8",filled:"",unelevated:"",style:{backgroundColor:"var(--q-color-grey-2)","margin-left":"auto"}},null,8,["onClick"])):E("",!0),Object.keys(t.downloadables).includes("pdf")?(o(),h(V,{key:4},[m(P,{icon:"download",label:"Pdf",onClick:e[4]||(e[4]=x=>s.downloadPdf()),class:"q-mb-md q-ml-md text-grey-8",filled:"",unelevated:"",style:{backgroundColor:"var(--q-color-grey-2)"}}),S("div",Mr,[m(f,{id:`pdfBody${s.toHtmlIdSafeString((U=t.downloadables.pdf)==null?void 0:U.title)}`,options:t.downloadables.pdf,items:s.itemsForExport},null,8,["id","options","items"]),t.downloadables.pdf.header?(o(),h("div",{key:0,id:`pdfHeader${s.toHtmlIdSafeString((D=t.downloadables.pdf)==null?void 0:D.title)}`},[(o(),b(fe(s.defineAsyncComponent((z=t.downloadables.pdf)==null?void 0:z.header))))],8,wr)):E("",!0),t.downloadables.pdf.footer?(o(),h("div",{key:1,id:`pdfFooter${s.toHtmlIdSafeString((se=t.downloadables.pdf)==null?void 0:se.title)}`},[(o(),b(fe(s.defineAsyncComponent((De=t.downloadables.pdf)==null?void 0:De.footer))))],8,Pr)):E("",!0)])],64)):E("",!0)])]}),_:3},8,["destroy"])],2)):E("",!0)])}const Gr=O(vr,[["render",Nr],["__file","SuperTableTopBar.vue"]]);class v{static timeRangeType(){return"timeRangeType"}static timeRangeStart(){return"timeRangeStart"}static timeRangeEnd(){return"timeRangeEnd"}static readOnlyTimestampType(){return"readOnlyTimestampType"}static timestampType(){return"timestampType"}static dateType(){return"dateType"}static location_address_place_name(){return"location_address_place_name"}static mapExtraFormattedAddress(){return"mapExtraFormattedAddress"}static mapExtraPlaceID(){return"mapExtraPlaceID"}static mapExtraGeoLocLong(){return"mapExtraGeoLocLong"}static mapExtraGeoLocLat(){return"mapExtraGeoLocLat"}static mapExtraRelCountry(){return"mapExtraRelCountry"}static mapExtraRelAdminArea1(){return"mapExtraRelAdminArea1"}static mapExtraRelAdminArea2(){return"mapExtraRelAdminArea2"}static mapExtraRelLocality(){return"mapExtraRelLocality"}static mapExtraRelSublocality1(){return"mapExtraRelSublocality1"}static mapExtraRelSublocality2(){return"mapExtraRelSublocality2"}static mapExtraRelSublocality(){return"mapExtraRelSublocality"}static creatorType(){return"creatorType"}static ownerProviderType(){return"ownerProviderType"}static ownerCustomerType(){return"ownerCustomerType"}static childrenApplicationType(){return"childrenApplicationType"}static ownerAppliedToProviderType(){return"ownerAppliedToProviderType"}static ownerApprovedByProviderType(){return"ownerApprovedByProviderType"}static fileImageType(){return"fileImageType"}static htmlField(){return"htmlField"}}class R extends Le{static mergeHeaders(e){const t={...e},r=_.get("VITE_AUTH");if(r!=null&&r.token){const a=new Date(r.expireDate);new Date<=a&&(t.Authorization=`Bearer ${r.token}`)}return t}}d(R,"baseUrl","https://briland.co.za"),d(R,"adapter","laravel");class Z extends R{static openRecord(e,t,r){r.push({name:"/lists/family-links/:rId/:rName",params:{rId:e,rName:e}})}static fields(){return{id:this.attr("").nullable(),user_id:this.attr("").nullable(),family_id:this.attr("").nullable(),created_at:this.attr("").nullable(),updated_at:this.attr("").nullable(),family:this.belongsTo(N,"family_id"),user:this.belongsTo(A,"user_id")}}static FetchAll(e=[],t={},r={},a={page:1,limit:15,filters:{},clearPrimaryModelOnly:!1}){return this.customSupabaseApiFetchAll(`${this.baseUrl}${this.entityUrl}`,[...this.parentWithables,...e],t,this.mergeHeaders(r),a,this)}static FetchById(e,t=[],r={},a={}){return this.customSupabaseApiFetchById(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Store(e,t=[],r={},a={}){return this.customSupabaseApiStore(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Update(e,t=[],r={},a={}){return this.customSupabaseApiUpdate(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Delete(e,t={},r={}){return this.customSupabaseApiDelete(`${this.baseUrl}${this.entityUrl}`,e,t,this.mergeHeaders(r),this)}}d(Z,"entity","familylink"),d(Z,"entityUrl","/api/family-links"),d(Z,"primaryKey","id"),d(Z,"titleKey","id"),d(Z,"entityHumanName","Family Link"),d(Z,"parentWithables",["user","family"]),d(Z,"rules",{readables:()=>!0,readable:e=>!1,editable:e=>!0,creatable:()=>!!_.get("VITE_AUTH")}),d(Z,"fieldsMetadata",{id:{},user_id:{linkablesRule:()=>({})},family_id:{linkablesRule:()=>({})},created_at:{autoFill(e){return e.created_at?e.created_at:new Date().toISOString().slice(0,19).replace("T"," ")}},updated_at:{autoFill(e){return new Date().toISOString().slice(0,19).replace("T"," ")}}});const $=class $ extends R{static openRecord(e,t,r){}static fields(){return{id:this.attr("").nullable(),name:this.attr(""),substate:this.belongsTo(G,"substate_id"),substate_id:this.attr("").nullable(),suburbs:this.hasMany($,"town_id"),created_at:this.attr("").nullable(),updated_at:this.attr("").nullable()}}static FetchAll(e=[],t={},r={},a={page:1,limit:15,filters:{},clearPrimaryModelOnly:!1}){return this.customSupabaseApiFetchAll(`${this.baseUrl}${this.entityUrl}`,[...this.parentWithables,...e],t,this.mergeHeaders(r),a,this)}static FetchById(e,t=[],r={},a={}){return this.customSupabaseApiFetchById(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Store(e,t=[],r={},a={}){return this.customSupabaseApiStore(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Update(e,t=[],r={},a={}){return this.customSupabaseApiUpdate(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Delete(e,t={},r={}){return this.customSupabaseApiDelete(`${this.baseUrl}${this.entityUrl}`,e,t,this.mergeHeaders(r),this)}};d($,"entity","LocationTown"),d($,"entityUrl","/api/location-towns"),d($,"primaryKey","id"),d($,"titleKey","name"),d($,"entityHumanName","LocationTown"),d($,"parentWithables",[]),d($,"rules",{readables:()=>!0,readable:e=>!0,editable:e=>!0,creatable:()=>!!_.get("VITE_AUTH")}),d($,"fieldsMetadata",{id:{},name:{},substate:{},substate_id:{linkablesRule:()=>({}),usageType:v.mapExtraRelAdminArea2()},suburbs:{},created_at:{autoFill(e){return e.created_at?e.created_at:new Date().toISOString().slice(0,19).replace("T"," ")}},updated_at:{autoFill(e){return new Date().toISOString().slice(0,19).replace("T"," ")}}});let Fe=$;class G extends R{static openRecord(e,t,r){}static fields(){return{id:this.attr("").nullable(),name:this.attr(""),state:this.belongsTo(Q,"state_id"),state_id:this.attr("").nullable(),towns:this.hasMany(Fe,"substate_id"),created_at:this.attr("").nullable(),updated_at:this.attr("").nullable()}}static FetchAll(e=[],t={},r={},a={page:1,limit:15,filters:{},clearPrimaryModelOnly:!1}){return this.customSupabaseApiFetchAll(`${this.baseUrl}${this.entityUrl}`,[...this.parentWithables,...e],t,this.mergeHeaders(r),a,this)}static FetchById(e,t=[],r={},a={}){return this.customSupabaseApiFetchById(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Store(e,t=[],r={},a={}){return this.customSupabaseApiStore(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Update(e,t=[],r={},a={}){return this.customSupabaseApiUpdate(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Delete(e,t={},r={}){return this.customSupabaseApiDelete(`${this.baseUrl}${this.entityUrl}`,e,t,this.mergeHeaders(r),this)}}d(G,"entity","LocationSubstate"),d(G,"entityUrl","/api/location-substates"),d(G,"primaryKey","id"),d(G,"titleKey","name"),d(G,"entityHumanName","LocationSubstate"),d(G,"parentWithables",[]),d(G,"rules",{readables:()=>!0,readable:e=>!0,editable:e=>!0,creatable:()=>!!_.get("VITE_AUTH")}),d(G,"fieldsMetadata",{id:{},name:{},state:{},state_id:{linkablesRule:()=>({}),usageType:v.mapExtraRelAdminArea1()},towns:{},created_at:{autoFill(e){return e.created_at?e.created_at:new Date().toISOString().slice(0,19).replace("T"," ")}},updated_at:{autoFill(e){return new Date().toISOString().slice(0,19).replace("T"," ")}}});class Q extends R{static openRecord(e,t,r){}static fields(){return{id:this.attr("").nullable(),name:this.attr(""),country:this.belongsTo(X,"country_id"),country_id:this.attr("").nullable(),substates:this.hasMany(G,"state_id"),created_at:this.attr("").nullable(),updated_at:this.attr("").nullable()}}static FetchAll(e=[],t={},r={},a={page:1,limit:15,filters:{},clearPrimaryModelOnly:!1}){return this.customSupabaseApiFetchAll(`${this.baseUrl}${this.entityUrl}`,[...this.parentWithables,...e],t,this.mergeHeaders(r),a,this)}static FetchById(e,t=[],r={},a={}){return this.customSupabaseApiFetchById(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Store(e,t=[],r={},a={}){return this.customSupabaseApiStore(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Update(e,t=[],r={},a={}){return this.customSupabaseApiUpdate(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Delete(e,t={},r={}){return this.customSupabaseApiDelete(`${this.baseUrl}${this.entityUrl}`,e,t,this.mergeHeaders(r),this)}}d(Q,"entity","LocationState"),d(Q,"entityUrl","/api/location-states"),d(Q,"primaryKey","id"),d(Q,"titleKey","name"),d(Q,"entityHumanName","LocationState"),d(Q,"parentWithables",[]),d(Q,"rules",{readables:()=>!0,readable:e=>!0,editable:e=>!0,creatable:()=>!!_.get("VITE_AUTH")}),d(Q,"fieldsMetadata",{id:{},name:{},country:{},country_id:{linkablesRule:()=>({}),usageType:v.mapExtraRelCountry()},substates:{},created_at:{autoFill(e){return e.created_at?e.created_at:new Date().toISOString().slice(0,19).replace("T"," ")}},updated_at:{autoFill(e){return new Date().toISOString().slice(0,19).replace("T"," ")}}});class X extends R{static openRecord(e,t,r){}static fields(){return{id:this.attr("").nullable(),name:this.attr(""),states:this.hasMany(Q,"country_id"),created_at:this.attr("").nullable(),updated_at:this.attr("").nullable()}}static FetchAll(e=[],t={},r={},a={page:1,limit:15,filters:{},clearPrimaryModelOnly:!1}){return this.customSupabaseApiFetchAll(`${this.baseUrl}${this.entityUrl}`,[...this.parentWithables,...e],t,this.mergeHeaders(r),a,this)}static FetchById(e,t=[],r={},a={}){return this.customSupabaseApiFetchById(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Store(e,t=[],r={},a={}){return this.customSupabaseApiStore(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Update(e,t=[],r={},a={}){return this.customSupabaseApiUpdate(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Delete(e,t={},r={}){return this.customSupabaseApiDelete(`${this.baseUrl}${this.entityUrl}`,e,t,this.mergeHeaders(r),this)}}d(X,"entity","LocationCountry"),d(X,"entityUrl","/api/location-countries"),d(X,"primaryKey","id"),d(X,"titleKey","name"),d(X,"entityHumanName","LocationCountry"),d(X,"parentWithables",[]),d(X,"rules",{readables:()=>!0,readable:e=>!0,editable:e=>!0,creatable:()=>!!_.get("VITE_AUTH")}),d(X,"fieldsMetadata",{id:{},name:{},states:{},created_at:{autoFill(e){return e.created_at?e.created_at:new Date().toISOString().slice(0,19).replace("T"," ")}},updated_at:{autoFill(e){return new Date().toISOString().slice(0,19).replace("T"," ")}}});class ae extends R{static openRecord(e,t,r){}static fields(){return{id:this.attr("").nullable(),name:this.attr(""),town:this.belongsTo(Fe,"town_id"),town_id:this.attr("").nullable(),created_at:this.attr("").nullable(),updated_at:this.attr("").nullable()}}static FetchAll(e=[],t={},r={},a={page:1,limit:15,filters:{},clearPrimaryModelOnly:!1}){return this.customSupabaseApiFetchAll(`${this.baseUrl}${this.entityUrl}`,[...this.parentWithables,...e],t,this.mergeHeaders(r),a,this)}static FetchById(e,t=[],r={},a={}){return this.customSupabaseApiFetchById(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Store(e,t=[],r={},a={}){return this.customSupabaseApiStore(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Update(e,t=[],r={},a={}){return this.customSupabaseApiUpdate(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Delete(e,t={},r={}){return this.customSupabaseApiDelete(`${this.baseUrl}${this.entityUrl}`,e,t,this.mergeHeaders(r),this)}}d(ae,"entity","LocationSuburb"),d(ae,"entityUrl","/api/location-suburbs"),d(ae,"primaryKey","id"),d(ae,"titleKey","name"),d(ae,"entityHumanName","LocationSuburb"),d(ae,"parentWithables",[]),d(ae,"rules",{readables:()=>!0,readable:e=>!0,editable:e=>!0,creatable:()=>!!_.get("VITE_AUTH")}),d(ae,"fieldsMetadata",{id:{},name:{},town:{},town_id:{linkablesRule:()=>({}),usageType:v.mapExtraRelLocality()},created_at:{autoFill(e){return e.created_at?e.created_at:new Date().toISOString().slice(0,19).replace("T"," ")}},updated_at:{autoFill(e){return new Date().toISOString().slice(0,19).replace("T"," ")}}});class W extends R{static openRecord(e,t,r){r.push({name:"/lists/events/:rId/:rName",params:{rId:e,rName:e}})}static fields(){return{id:this.attr("").nullable(),name:this.attr(""),image:this.attr(""),start_datetime:this.attr(""),end_datetime:this.attr(""),school_id:this.attr(""),creator_id:this.attr("").nullable(),updater_id:this.attr("").nullable(),created_at:this.attr("").nullable(),updated_at:this.attr("").nullable(),creator:this.belongsTo(A,"creator_id"),school:this.belongsTo(C,"school_id"),updater:this.belongsTo(A,"updater_id"),attendances:this.hasMany(H,"event_id"),location_google_id:this.attr("").nullable(),location_address_street_address:this.attr("").nullable(),location_address_building_address:this.attr("").nullable(),location_address_place_name:this.attr("").nullable(),location_coordinates_longitude:this.attr("").nullable(),location_coordinates_latitude:this.attr("").nullable(),country:this.belongsTo(X,"location_admin_division_country_id"),location_admin_division_country_id:this.attr("").nullable(),state:this.belongsTo(Q,"location_admin_division_state_id"),location_admin_division_state_id:this.attr("").nullable(),substate:this.belongsTo(G,"location_admin_division_substate_id"),location_admin_division_substate_id:this.attr("").nullable(),town:this.belongsTo(Fe,"location_admin_division_town_id"),location_admin_division_town_id:this.attr("").nullable(),suburb:this.belongsTo(ae,"location_admin_division_suburb_id"),location_admin_division_suburb_id:this.attr("").nullable()}}static FetchAll(e=[],t={},r={},a={page:1,limit:15,filters:{},clearPrimaryModelOnly:!1}){return this.customSupabaseApiFetchAll(`${this.baseUrl}${this.entityUrl}`,[...this.parentWithables,...e],t,this.mergeHeaders(r),a,this)}static FetchById(e,t=[],r={},a={}){return this.customSupabaseApiFetchById(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Store(e,t=[],r={},a={}){return this.customSupabaseApiStore(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Update(e,t=[],r={},a={}){return this.customSupabaseApiUpdate(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Delete(e,t={},r={}){return this.customSupabaseApiDelete(`${this.baseUrl}${this.entityUrl}`,e,t,this.mergeHeaders(r),this)}}d(W,"entity","event"),d(W,"entityUrl","/api/events"),d(W,"primaryKey","id"),d(W,"titleKey","name"),d(W,"entityHumanName","Event"),d(W,"parentWithables",["school","creator","updater"]),d(W,"rules",{readables:()=>!0,readable:e=>!0,editable:e=>{const t=_.get("VITE_AUTH");return e.creator_id===(t==null?void 0:t.user.id)},creatable:()=>!!_.get("VITE_AUTH")}),d(W,"fieldsMetadata",{id:{},name:{},image:{usageType:"fileImageType"},start_datetime:{usageType:v.timeRangeStart()},end_datetime:{usageType:v.timeRangeEnd()},school_id:{linkablesRule(e){const t=_.get("VITE_AUTH");return t?{creator_id:t.user.id}:{id:0}}},creator_id:{autoFill(e){const t=_.get("VITE_AUTH");return e.creator_id?e.creator_id:t==null?void 0:t.user.id}},updater_id:{autoFill(e){const t=_.get("VITE_AUTH");return t==null?void 0:t.user.id}},created_at:{autoFill(e){return e.created_at?e.created_at:new Date().toISOString().slice(0,19).replace("T"," ")}},updated_at:{autoFill(e){return new Date().toISOString().slice(0,19).replace("T"," ")}},location_google_id:{usageType:v.mapExtraPlaceID()},location_address_street_address:{usageType:v.mapExtraFormattedAddress()},location_address_building_address:{},location_address_place_name:{usageType:v.location_address_place_name()},location_coordinates_longitude:{usageType:v.mapExtraGeoLocLong()},location_coordinates_latitude:{usageType:v.mapExtraGeoLocLat()},country:{},location_admin_division_country_id:{linkablesRule:()=>({}),usageType:v.mapExtraRelCountry()},state:{},location_admin_division_state_id:{linkablesRule:()=>({}),usageType:v.mapExtraRelAdminArea1()},substate:{},location_admin_division_substate_id:{linkablesRule:()=>({}),usageType:v.mapExtraRelAdminArea2()},town:{},location_admin_division_town_id:{linkablesRule:()=>({}),usageType:v.mapExtraRelLocality()},suburb:{},location_admin_division_suburb_id:{linkablesRule:()=>({}),usageType:v.mapExtraRelSublocality()}});class ee extends R{static openRecord(e,t,r){r.push({name:"/lists/jobs/:rId/:rName",params:{rId:e,rName:e}})}static fields(){return{id:this.attr("").nullable(),user_id:this.attr("").nullable(),school_id:this.attr("").nullable(),created_at:this.attr("").nullable(),updated_at:this.attr("").nullable(),school:this.belongsTo(C,"school_id"),user:this.belongsTo(A,"user_id")}}static FetchAll(e=[],t={},r={},a={page:1,limit:15,filters:{},clearPrimaryModelOnly:!1}){return this.customSupabaseApiFetchAll(`${this.baseUrl}${this.entityUrl}`,[...this.parentWithables,...e],t,this.mergeHeaders(r),a,this)}static FetchById(e,t=[],r={},a={}){return this.customSupabaseApiFetchById(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Store(e,t=[],r={},a={}){return this.customSupabaseApiStore(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Update(e,t=[],r={},a={}){return this.customSupabaseApiUpdate(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Delete(e,t={},r={}){return this.customSupabaseApiDelete(`${this.baseUrl}${this.entityUrl}`,e,t,this.mergeHeaders(r),this)}}d(ee,"entity","job"),d(ee,"entityUrl","/api/jobs"),d(ee,"primaryKey","id"),d(ee,"titleKey","id"),d(ee,"entityHumanName","Job"),d(ee,"parentWithables",["user","school"]),d(ee,"rules",{readables:()=>!0,readable:e=>!1,editable:e=>!0,creatable:()=>!!_.get("VITE_AUTH")}),d(ee,"fieldsMetadata",{id:{},user_id:{linkablesRule:()=>({})},school_id:{linkablesRule:()=>({})},created_at:{autoFill(e){return e.created_at?e.created_at:new Date().toISOString().slice(0,19).replace("T"," ")}},updated_at:{autoFill(e){return new Date().toISOString().slice(0,19).replace("T"," ")}}});class C extends R{static openRecord(e,t,r){r.push({name:"/lists/schools/:rId/:rName",params:{rId:e,rName:e}})}static fields(){return{id:this.attr("").nullable(),name:this.attr(""),image:this.attr(""),about_us:this.attr(""),creator_id:this.attr("").nullable(),updater_id:this.attr("").nullable(),created_at:this.attr("").nullable(),updated_at:this.attr("").nullable(),creator:this.belongsTo(A,"creator_id"),updater:this.belongsTo(A,"updater_id"),attendances:this.hasMany(H,"school_id"),events:this.hasMany(W,"school_id"),jobs:this.hasMany(ee,"school_id"),schoolFamilyEnrollments:this.hasMany(B,"school_id")}}static FetchAll(e=[],t={},r={},a={page:1,limit:15,filters:{},clearPrimaryModelOnly:!1}){return this.customSupabaseApiFetchAll(`${this.baseUrl}${this.entityUrl}`,[...this.parentWithables,...e],t,this.mergeHeaders(r),a,this)}static FetchById(e,t=[],r={},a={}){return this.customSupabaseApiFetchById(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Store(e,t=[],r={},a={}){return this.customSupabaseApiStore(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Update(e,t=[],r={},a={}){return this.customSupabaseApiUpdate(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Delete(e,t={},r={}){return this.customSupabaseApiDelete(`${this.baseUrl}${this.entityUrl}`,e,t,this.mergeHeaders(r),this)}}d(C,"entity","school"),d(C,"entityUrl","/api/schools"),d(C,"primaryKey","id"),d(C,"titleKey","name"),d(C,"entityHumanName","School"),d(C,"parentWithables",["creator","updater"]),d(C,"rules",{readables:()=>!0,readable:e=>!0,editable:e=>{const t=_.get("VITE_AUTH");return e.creator_id===(t==null?void 0:t.user.id)},creatable:()=>!!_.get("VITE_AUTH")}),d(C,"fieldsMetadata",{id:{},name:{},image:{usageType:"fileImageType"},about_us:{usageType:"htmlField"},creator_id:{autoFill(e){const t=_.get("VITE_AUTH");return e.creator_id?e.creator_id:t==null?void 0:t.user.id}},updater_id:{autoFill(e){const t=_.get("VITE_AUTH");return t==null?void 0:t.user.id}},created_at:{autoFill(e){return e.created_at?e.created_at:new Date().toISOString().slice(0,19).replace("T"," ")}},updated_at:{autoFill(e){return new Date().toISOString().slice(0,19).replace("T"," ")}}});class B extends R{static openRecord(e,t,r){r.push({name:"/lists/school-family-enrollments/:rId/:rName",params:{rId:e,rName:e}})}static fields(){return{id:this.attr("").nullable(),family_id:this.attr("").nullable(),school_id:this.attr("").nullable(),creator_id:this.attr("").nullable(),updater_id:this.attr("").nullable(),created_at:this.attr("").nullable(),updated_at:this.attr("").nullable(),creator:this.belongsTo(A,"creator_id"),family:this.belongsTo(N,"family_id"),school:this.belongsTo(C,"school_id"),updater:this.belongsTo(A,"updater_id")}}static FetchAll(e=[],t={},r={},a={page:1,limit:15,filters:{},clearPrimaryModelOnly:!1}){return this.customSupabaseApiFetchAll(`${this.baseUrl}${this.entityUrl}`,[...this.parentWithables,...e],t,this.mergeHeaders(r),a,this)}static FetchById(e,t=[],r={},a={}){return this.customSupabaseApiFetchById(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Store(e,t=[],r={},a={}){return this.customSupabaseApiStore(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Update(e,t=[],r={},a={}){return this.customSupabaseApiUpdate(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Delete(e,t={},r={}){return this.customSupabaseApiDelete(`${this.baseUrl}${this.entityUrl}`,e,t,this.mergeHeaders(r),this)}}d(B,"entity","schoolfamilyenrollment"),d(B,"entityUrl","/api/school-family-enrollments"),d(B,"primaryKey","id"),d(B,"titleKey","id"),d(B,"entityHumanName","SchoolFamilyEnrollment"),d(B,"parentWithables",["family","school","creator","updater"]),d(B,"rules",{readables:()=>!0,readable:e=>!1,editable:e=>{const t=_.get("VITE_AUTH");return e.creator_id===(t==null?void 0:t.user.id)},creatable:()=>!!_.get("VITE_AUTH")}),d(B,"fieldsMetadata",{id:{},family_id:{linkablesRule:()=>({})},school_id:{linkablesRule:()=>({})},creator_id:{autoFill(e){const t=_.get("VITE_AUTH");return e.creator_id?e.creator_id:t==null?void 0:t.user.id}},updater_id:{autoFill(e){const t=_.get("VITE_AUTH");return t==null?void 0:t.user.id}},created_at:{autoFill(e){return e.created_at?e.created_at:new Date().toISOString().slice(0,19).replace("T"," ")}},updated_at:{autoFill(e){return new Date().toISOString().slice(0,19).replace("T"," ")}}});class le extends R{static openRecord(e,t,r){r.push({name:"/lists/events/:rId/:rName",params:{rId:e,rName:e}})}static fields(){return{id:this.attr("").nullable(),name:this.attr(""),description:this.attr(""),start_datetime:this.attr(""),end_datetime:this.attr(""),family_id:this.attr(""),family:this.belongsTo(N,"family_id"),creator_id:this.attr("").nullable(),creator:this.belongsTo(A,"creator_id"),created_at:this.attr("").nullable(),updated_at:this.attr("").nullable()}}static FetchAll(e=[],t={},r={},a={page:1,limit:15,filters:{},clearPrimaryModelOnly:!1}){return this.customSupabaseApiFetchAll(`${this.baseUrl}${this.entityUrl}`,[...this.parentWithables,...e],t,this.mergeHeaders(r),a,this)}static FetchById(e,t=[],r={},a={}){return this.customSupabaseApiFetchById(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Store(e,t=[],r={},a={}){return this.customSupabaseApiStore(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Update(e,t=[],r={},a={}){return this.customSupabaseApiUpdate(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Delete(e,t={},r={}){return this.customSupabaseApiDelete(`${this.baseUrl}${this.entityUrl}`,e,t,this.mergeHeaders(r),this)}}d(le,"entity","private-event"),d(le,"entityUrl","/api/private-events"),d(le,"primaryKey","id"),d(le,"titleKey","name"),d(le,"entityHumanName","Private Event"),d(le,"parentWithables",["family","creator"]),d(le,"rules",{readables:()=>!0,readable:e=>!0,editable:e=>{const t=_.get("VITE_AUTH");return e.creator_id===(t==null?void 0:t.user.id)},creatable:()=>!!_.get("VITE_AUTH")}),d(le,"fieldsMetadata",{id:{},name:{},description:{},start_datetime:{usageType:v.timeRangeStart()},end_datetime:{usageType:v.timeRangeEnd()},family_id:{linkablesRule(e){const t=_.get("VITE_AUTH");if(!t)return{id:0};const r=t.user.family_memberships.map(s=>s.family_id);r.push(t.user.primary_family.id);const a=r.join(",");return{family_id:r.length?a:0}}},creator_id:{autoFill(e){const t=_.get("VITE_AUTH");return e.creator_id?e.creator_id:t==null?void 0:t.user.id}},created_at:{autoFill(e){return e.created_at?e.created_at:new Date().toISOString().slice(0,19).replace("T"," ")}},updated_at:{autoFill(e){return new Date().toISOString().slice(0,19).replace("T"," ")}}});class N extends R{static openRecord(e,t,r){r.push({name:"/lists/families/:rId/:rName",params:{rId:e,rName:t.name}})}static fields(){return{id:this.attr("").nullable(),name:this.attr(""),creator_id:this.attr("").nullable(),updater_id:this.attr("").nullable(),created_at:this.attr("").nullable(),updated_at:this.attr("").nullable(),creator:this.belongsTo(A,"creator_id"),updater:this.belongsTo(A,"updater_id"),attendances:this.hasMany(H,"family_id"),private_events:this.hasMany(le,"family_id"),children:this.hasMany(K,"family_id"),FamilyLinks:this.hasMany(Z,"family_id"),schoolFamilyEnrollments:this.hasMany(B,"family_id")}}static FetchAll(e=[],t={},r={},a={page:1,limit:15,filters:{},clearPrimaryModelOnly:!1}){return this.customSupabaseApiFetchAll(`${this.baseUrl}${this.entityUrl}`,[...this.parentWithables,...e],t,this.mergeHeaders(r),a,this)}static FetchById(e,t=[],r={},a={}){return this.customSupabaseApiFetchById(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Store(e,t=[],r={},a={}){return this.customSupabaseApiStore(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Update(e,t=[],r={},a={}){return this.customSupabaseApiUpdate(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Delete(e,t={},r={}){return this.customSupabaseApiDelete(`${this.baseUrl}${this.entityUrl}`,e,t,this.mergeHeaders(r),this)}}d(N,"entity","family"),d(N,"entityUrl","/api/families"),d(N,"primaryKey","id"),d(N,"titleKey","name"),d(N,"entityHumanName","Family"),d(N,"parentWithables",["creator","updater"]),d(N,"rules",{readables:()=>!0,readable:e=>!0,editable:e=>{const t=_.get("VITE_AUTH");return e.creator_id===(t==null?void 0:t.user.id)},creatable:()=>!!_.get("VITE_AUTH")}),d(N,"hooks",{createComplete:e=>{console.log("help"),console.log(e.response.data.data);const t=_.get("VITE_AUTH");return A.Update({id:t.user.id,primary_family_id:e.response.data.data.id},[],{},{}).then(r=>{t.user=r.response.data.data;const a=new Date(t.expireDate),n=Math.floor((a-new Date)/1e3);_.set("VITE_AUTH",t,`${n}s`)}).catch(r=>{})}}),d(N,"fieldsMetadata",{id:{},name:{},creator_id:{autoFill(e){const t=_.get("VITE_AUTH");return e.creator_id?e.creator_id:t==null?void 0:t.user.id}},updater_id:{autoFill(e){const t=_.get("VITE_AUTH");return t==null?void 0:t.user.id}},created_at:{autoFill(e){return e.created_at?e.created_at:new Date().toISOString().slice(0,19).replace("T"," ")}},updated_at:{autoFill(e){return new Date().toISOString().slice(0,19).replace("T"," ")}}});class K extends R{static openRecord(e,t,r){r.push({name:"/lists/children/:rId/:rName",params:{rId:e,rName:e}})}static fields(){return{id:this.attr("").nullable(),name:this.attr(""),family_id:this.attr(""),creator_id:this.attr("").nullable(),updater_id:this.attr("").nullable(),created_at:this.attr("").nullable(),updated_at:this.attr("").nullable(),creator:this.belongsTo(A,"creator_id"),family:this.belongsTo(N,"family_id"),updater:this.belongsTo(A,"updater_id"),attendances:this.hasMany(H,"child_id")}}static FetchAll(e=[],t={},r={},a={page:1,limit:15,filters:{},clearPrimaryModelOnly:!1}){return this.customSupabaseApiFetchAll(`${this.baseUrl}${this.entityUrl}`,[...this.parentWithables,...e],t,this.mergeHeaders(r),a,this)}static FetchById(e,t=[],r={},a={}){return this.customSupabaseApiFetchById(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Store(e,t=[],r={},a={}){return this.customSupabaseApiStore(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Update(e,t=[],r={},a={}){return this.customSupabaseApiUpdate(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Delete(e,t={},r={}){return this.customSupabaseApiDelete(`${this.baseUrl}${this.entityUrl}`,e,t,this.mergeHeaders(r),this)}}d(K,"entity","child"),d(K,"entityUrl","/api/children"),d(K,"primaryKey","id"),d(K,"titleKey","name"),d(K,"entityHumanName","Child"),d(K,"parentWithables",["family","creator","updater"]),d(K,"rules",{readables:()=>!0,readable:e=>!0,editable:e=>{const t=_.get("VITE_AUTH");return e.creator_id===(t==null?void 0:t.user.id)},creatable:()=>!!_.get("VITE_AUTH")}),d(K,"fieldsMetadata",{id:{},name:{},family_id:{linkablesRule(e){const t=_.get("VITE_AUTH");if(!t)return{id:0};const r=t.user.family_memberships.map(s=>s.family_id);r.push(t.user.primary_family.id);const a=r.join(",");return{id:r.length?a:0}}},creator_id:{autoFill(e){const t=_.get("VITE_AUTH");return e.creator_id?e.creator_id:t==null?void 0:t.user.id}},updater_id:{autoFill(e){const t=_.get("VITE_AUTH");return t==null?void 0:t.user.id}},created_at:{autoFill(e){return e.created_at?e.created_at:new Date().toISOString().slice(0,19).replace("T"," ")}},updated_at:{autoFill(e){return new Date().toISOString().slice(0,19).replace("T"," ")}}});class H extends R{static openRecord(e,t,r){r.push({name:"/lists/attendances/:rId/:rName",params:{rId:e,rName:e}})}static fields(){return{id:this.attr("").nullable(),event_id:this.attr(""),child_id:this.attr(""),family_id:this.attr("").nullable(),school_id:this.attr("").nullable(),creator_id:this.attr("").nullable(),updater_id:this.attr("").nullable(),created_at:this.attr("").nullable(),updated_at:this.attr("").nullable(),child:this.belongsTo(K,"child_id"),creator:this.belongsTo(A,"creator_id"),event:this.belongsTo(W,"event_id"),family:this.belongsTo(N,"family_id"),school:this.belongsTo(C,"school_id"),updater:this.belongsTo(A,"updater_id")}}static FetchAll(e=[],t={},r={},a={page:1,limit:15,filters:{},clearPrimaryModelOnly:!1}){return this.customSupabaseApiFetchAll(`${this.baseUrl}${this.entityUrl}`,[...this.parentWithables,...e],t,this.mergeHeaders(r),a,this)}static FetchById(e,t=[],r={},a={}){return this.customSupabaseApiFetchById(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Store(e,t=[],r={},a={}){return this.customSupabaseApiStore(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Update(e,t=[],r={},a={}){return this.customSupabaseApiUpdate(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Delete(e,t={},r={}){return this.customSupabaseApiDelete(`${this.baseUrl}${this.entityUrl}`,e,t,this.mergeHeaders(r),this)}}d(H,"entity","attendance"),d(H,"entityUrl","/api/attendances"),d(H,"primaryKey","id"),d(H,"titleKey","id"),d(H,"entityHumanName","Attendance"),d(H,"parentWithables",["school","family","event","child","creator","updater"]),d(H,"rules",{readables:()=>!0,readable:e=>!0,editable:e=>{const t=_.get("VITE_AUTH");return e.creator_id===(t==null?void 0:t.user.id)},creatable:()=>!!_.get("VITE_AUTH")}),d(H,"fieldsMetadata",{id:{},school_id:{autoFill(e){const t=W.query().where("id",e.event_id).first();return t&&t.school_id?t.school_id:null}},family_id:{autoFill(e){const t=K.query().where("id",e.child_id).first();return t&&t.family_id?t.family_id:null}},event_id:{linkablesRule:()=>({})},child_id:{linkablesRule(e){const t=_.get("VITE_AUTH");if(!t)return{id:0};const r=t.user.family_memberships.map(s=>s.family_id);r.push(t.user.primary_family.id);const a=r.join(",");return{family_id:r.length?a:0}}},creator_id:{autoFill(e){const t=_.get("VITE_AUTH");return e.creator_id?e.creator_id:t==null?void 0:t.user.id}},updater_id:{autoFill(e){const t=_.get("VITE_AUTH");return t==null?void 0:t.user.id}},created_at:{autoFill(e){return e.created_at?e.created_at:new Date().toISOString().slice(0,19).replace("T"," ")}},updated_at:{autoFill(e){return new Date().toISOString().slice(0,19).replace("T"," ")}}});class A extends R{static openRecord(e,t,r){r.push({name:"/lists/users/:rId/:rName",params:{rId:e,rName:e}})}static fields(){return{id:this.attr("").nullable(),old_id:this.attr("").nullable(),name:this.attr(""),primary_family_id:this.attr("").nullable(),primary_family:this.belongsTo(N,"primary_family_id"),created_at:this.attr("").nullable(),updated_at:this.attr("").nullable(),attendances:this.hasMany(H,"creator_id"),attendancesUpdaterId:this.hasMany(H,"updater_id"),children:this.hasMany(K,"creator_id"),childrenUpdaterId:this.hasMany(K,"updater_id"),events:this.hasMany(W,"creator_id"),eventsUpdaterId:this.hasMany(W,"updater_id"),families:this.hasMany(N,"creator_id"),familiesUpdaterId:this.hasMany(N,"updater_id"),FamilyLinks:this.hasMany(Z,"user_id"),schoolFamilyEnrollments:this.hasMany(B,"creator_id"),schoolFamilyEnrollmentsUpdaterId:this.hasMany(B,"updater_id"),jobs:this.hasMany(ee,"user_id"),schools:this.hasMany(C,"creator_id"),schoolsUpdaterId:this.hasMany(C,"updater_id")}}static FetchAll(e=[],t={},r={},a={page:1,limit:15,filters:{},clearPrimaryModelOnly:!1}){return this.customSupabaseApiFetchAll(`${this.baseUrl}${this.entityUrl}`,[...this.parentWithables,...e],t,this.mergeHeaders(r),a,this)}static FetchById(e,t=[],r={},a={}){return this.customSupabaseApiFetchById(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Store(e,t=[],r={},a={}){return this.customSupabaseApiStore(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Update(e,t=[],r={},a={}){return this.customSupabaseApiUpdate(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Delete(e,t={},r={}){return this.customSupabaseApiDelete(`${this.baseUrl}${this.entityUrl}`,e,t,this.mergeHeaders(r),this)}static Register(e,t=[],r={},a={}){return this.customSupabaseApiStore(`${this.baseUrl}/api/register`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}}d(A,"entity","user"),d(A,"entityUrl","/api/users"),d(A,"primaryKey","id"),d(A,"entityHumanName","User"),d(A,"titleKey","name"),d(A,"parentWithables",["primary_family"]),d(A,"rules",{readables:()=>!0,readable:e=>!0,editable:e=>{const t=_.get("VITE_AUTH");return e.id===(t==null?void 0:t.user.id)},creatable:()=>!1}),d(A,"fieldsMetadata",{id:{},old_id:{},name:{},primary_family_id:{linkablesRule(e){const t=_.get("VITE_AUTH");return t?{creator_id:t.user.id}:{id:0}}},created_at:{autoFill(e){return e.created_at?e.created_at:new Date().toISOString().slice(0,19).replace("T"," ")}},updated_at:{autoFill(e){return new Date().toISOString().slice(0,19).replace("T"," ")}}}),d(A,"templateListGrid",{}),d(A,"templateOverview",{});class Ae extends R{static fields(){return{user:this.attr({}),accessToken:this.attr(""),expireDate:this.attr("")}}static FetchAll(e=[],t={},r={},a={page:1,limit:15,filters:{},clearPrimaryModelOnly:!1}){return this.customSupabaseApiFetchAll(`${this.baseUrl}${this.entityUrl}`,[...this.parentWithables,...e],t,this.mergeHeaders(r),a,this)}static FetchById(e,t=[],r={},a={}){return this.customSupabaseApiFetchById(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Store(e,t=[],r={},a={}){return this.customSupabaseApiStore(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Update(e,t=[],r={},a={}){return this.customSupabaseApiUpdate(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Delete(e,t={flags:{},moreHeaders:{}}){return this.customSupabaseApiDelete(`${this.baseUrl}${this.entityUrl}`,e,t.flags,this.mergeHeaders(t.moreHeaders),this)}static signIn(e,t=[],r={},a={}){return this.customSupabaseApiStore(`${this.baseUrl}/api/login`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}}d(Ae,"entity","session"),d(Ae,"entityUrl","/api/session"),d(Ae,"primaryKey","id"),d(Ae,"parentWithables",[]);class ne extends R{static openRecord(e,t,r){r.push({name:"/lists/posts/:rId/:rName",params:{rId:e,rName:e}})}static fields(){return{id:this.attr("").nullable(),created_at:this.attr("").nullable(),updated_at:this.attr("").nullable(),name:this.attr("").nullable()}}static FetchAll(e=[],t={},r={},a={page:1,limit:15,filters:{},clearPrimaryModelOnly:!1}){return this.customSupabaseApiFetchAll(`${this.baseUrl}${this.entityUrl}`,[...this.parentWithables,...e],t,this.mergeHeaders(r),a,this)}static FetchById(e,t=[],r={},a={}){return this.customSupabaseApiFetchById(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Store(e,t=[],r={},a={}){return this.customSupabaseApiStore(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Update(e,t=[],r={},a={}){return this.customSupabaseApiUpdate(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Delete(e,t={},r={}){return this.customSupabaseApiDelete(`${this.baseUrl}${this.entityUrl}`,e,t,this.mergeHeaders(r),this)}}d(ne,"entity","post"),d(ne,"entityUrl","/api/posts"),d(ne,"primaryKey","id"),d(ne,"titleKey","id"),d(ne,"entityHumanName","Post"),d(ne,"parentWithables",[]),d(ne,"rules",{readables:()=>!0,readable:e=>!0,editable:e=>!0,creatable:()=>!!_.get("VITE_AUTH")}),d(ne,"fieldsMetadata",{id:{},created_at:{autoFill(e){return e.created_at?e.created_at:new Date().toISOString().slice(0,19).replace("T"," ")}},updated_at:{autoFill(e){return new Date().toISOString().slice(0,19).replace("T"," ")}},name:{}});class de extends R{static openRecord(e,t,r){r.push({name:"/lists/failed-jobs/:rId/:rName",params:{rId:e,rName:e}})}static fields(){return{id:this.attr("").nullable(),uuid:this.attr("").nullable(),connection:this.attr("").nullable(),queue:this.attr("").nullable(),payload:this.attr("").nullable(),exception:this.attr("").nullable(),failed_at:this.attr("").nullable()}}static FetchAll(e=[],t={},r={},a={page:1,limit:15,filters:{},clearPrimaryModelOnly:!1}){return this.customSupabaseApiFetchAll(`${this.baseUrl}${this.entityUrl}`,[...this.parentWithables,...e],t,this.mergeHeaders(r),a,this)}static FetchById(e,t=[],r={},a={}){return this.customSupabaseApiFetchById(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Store(e,t=[],r={},a={}){return this.customSupabaseApiStore(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Update(e,t=[],r={},a={}){return this.customSupabaseApiUpdate(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Delete(e,t={},r={}){return this.customSupabaseApiDelete(`${this.baseUrl}${this.entityUrl}`,e,t,this.mergeHeaders(r),this)}}d(de,"entity","failedjob"),d(de,"entityUrl","/api/failed-jobs"),d(de,"primaryKey","id"),d(de,"titleKey","id"),d(de,"entityHumanName","FailedJob"),d(de,"parentWithables",[]),d(de,"rules",{readables:()=>!0,readable:e=>!0,editable:e=>!0,creatable:()=>!!_.get("VITE_AUTH")}),d(de,"fieldsMetadata",{id:{},uuid:{},connection:{},queue:{},payload:{},exception:{},failed_at:{}});class oe extends R{static openRecord(e,t,r){r.push({name:"/lists/migration-s/:rId/:rName",params:{rId:e,rName:e}})}static fields(){return{id:this.attr("").nullable(),migration:this.attr("").nullable(),batch:this.attr("").nullable()}}static FetchAll(e=[],t={},r={},a={page:1,limit:15,filters:{},clearPrimaryModelOnly:!1}){return this.customSupabaseApiFetchAll(`${this.baseUrl}${this.entityUrl}`,[...this.parentWithables,...e],t,this.mergeHeaders(r),a,this)}static FetchById(e,t=[],r={},a={}){return this.customSupabaseApiFetchById(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Store(e,t=[],r={},a={}){return this.customSupabaseApiStore(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Update(e,t=[],r={},a={}){return this.customSupabaseApiUpdate(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Delete(e,t={},r={}){return this.customSupabaseApiDelete(`${this.baseUrl}${this.entityUrl}`,e,t,this.mergeHeaders(r),this)}}d(oe,"entity","migration"),d(oe,"entityUrl","/api/migration-s"),d(oe,"primaryKey","id"),d(oe,"titleKey","id"),d(oe,"entityHumanName","Migration"),d(oe,"parentWithables",[]),d(oe,"rules",{readables:()=>!0,readable:e=>!0,editable:e=>!0,creatable:()=>!!_.get("VITE_AUTH")}),d(oe,"fieldsMetadata",{id:{},migration:{},batch:{}});class ue extends R{static openRecord(e,t,r){r.push({name:"/lists/password-reset-tokens/:rId/:rName",params:{rId:e,rName:e}})}static fields(){return{email:this.attr("").nullable(),token:this.attr("").nullable(),created_at:this.attr("").nullable()}}static FetchAll(e=[],t={},r={},a={page:1,limit:15,filters:{},clearPrimaryModelOnly:!1}){return this.customSupabaseApiFetchAll(`${this.baseUrl}${this.entityUrl}`,[...this.parentWithables,...e],t,this.mergeHeaders(r),a,this)}static FetchById(e,t=[],r={},a={}){return this.customSupabaseApiFetchById(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Store(e,t=[],r={},a={}){return this.customSupabaseApiStore(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Update(e,t=[],r={},a={}){return this.customSupabaseApiUpdate(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Delete(e,t={},r={}){return this.customSupabaseApiDelete(`${this.baseUrl}${this.entityUrl}`,e,t,this.mergeHeaders(r),this)}}d(ue,"entity","passwordresettoken"),d(ue,"entityUrl","/api/password-reset-tokens"),d(ue,"primaryKey","email"),d(ue,"titleKey","email"),d(ue,"entityHumanName","PasswordResetToken"),d(ue,"parentWithables",[]),d(ue,"rules",{readables:()=>!0,readable:e=>!0,editable:e=>!0,creatable:()=>!!_.get("VITE_AUTH")}),d(ue,"fieldsMetadata",{email:{},token:{},created_at:{}});class me extends R{static openRecord(e,t,r){r.push({name:"/lists/personal-access-tokens/:rId/:rName",params:{rId:e,rName:e}})}static fields(){return{id:this.attr("").nullable(),tokenable_type:this.attr("").nullable(),tokenable_id:this.attr("").nullable(),name:this.attr("").nullable(),token:this.attr("").nullable(),abilities:this.attr("").nullable(),last_used_at:this.attr("").nullable(),expires_at:this.attr("").nullable(),created_at:this.attr("").nullable(),updated_at:this.attr("").nullable()}}static FetchAll(e=[],t={},r={},a={page:1,limit:15,filters:{},clearPrimaryModelOnly:!1}){return this.customSupabaseApiFetchAll(`${this.baseUrl}${this.entityUrl}`,[...this.parentWithables,...e],t,this.mergeHeaders(r),a,this)}static FetchById(e,t=[],r={},a={}){return this.customSupabaseApiFetchById(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Store(e,t=[],r={},a={}){return this.customSupabaseApiStore(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Update(e,t=[],r={},a={}){return this.customSupabaseApiUpdate(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Delete(e,t={},r={}){return this.customSupabaseApiDelete(`${this.baseUrl}${this.entityUrl}`,e,t,this.mergeHeaders(r),this)}}d(me,"entity","personalaccesstoken"),d(me,"entityUrl","/api/personal-access-tokens"),d(me,"primaryKey","id"),d(me,"titleKey","id"),d(me,"entityHumanName","PersonalAccessToken"),d(me,"parentWithables",[]),d(me,"rules",{readables:()=>!0,readable:e=>!0,editable:e=>!0,creatable:()=>!!_.get("VITE_AUTH")}),d(me,"fieldsMetadata",{id:{},tokenable_type:{},tokenable_id:{},name:{},token:{},abilities:{},last_used_at:{},expires_at:{},created_at:{autoFill(e){return e.created_at?e.created_at:new Date().toISOString().slice(0,19).replace("T"," ")}},updated_at:{autoFill(e){return new Date().toISOString().slice(0,19).replace("T"," ")}}});class ce extends R{static openRecord(e,t,r){r.push({name:"/lists/post-tags/:rId/:rName",params:{rId:e,rName:e}})}static fields(){return{id:this.attr("").nullable(),created_at:this.attr("").nullable(),updated_at:this.attr("").nullable(),post_id:this.attr("").nullable(),tag_id:this.attr("").nullable()}}static FetchAll(e=[],t={},r={},a={page:1,limit:15,filters:{},clearPrimaryModelOnly:!1}){return this.customSupabaseApiFetchAll(`${this.baseUrl}${this.entityUrl}`,[...this.parentWithables,...e],t,this.mergeHeaders(r),a,this)}static FetchById(e,t=[],r={},a={}){return this.customSupabaseApiFetchById(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Store(e,t=[],r={},a={}){return this.customSupabaseApiStore(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Update(e,t=[],r={},a={}){return this.customSupabaseApiUpdate(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Delete(e,t={},r={}){return this.customSupabaseApiDelete(`${this.baseUrl}${this.entityUrl}`,e,t,this.mergeHeaders(r),this)}}d(ce,"entity","posttag"),d(ce,"entityUrl","/api/post-tags"),d(ce,"primaryKey","id"),d(ce,"titleKey","id"),d(ce,"entityHumanName","PostTag"),d(ce,"parentWithables",[]),d(ce,"rules",{readables:()=>!0,readable:e=>!0,editable:e=>!0,creatable:()=>!!_.get("VITE_AUTH")}),d(ce,"fieldsMetadata",{id:{},created_at:{autoFill(e){return e.created_at?e.created_at:new Date().toISOString().slice(0,19).replace("T"," ")}},updated_at:{autoFill(e){return new Date().toISOString().slice(0,19).replace("T"," ")}},post_id:{},tag_id:{}});class he extends R{static openRecord(e,t,r){r.push({name:"/lists/tags/:rId/:rName",params:{rId:e,rName:e}})}static fields(){return{id:this.attr("").nullable(),created_at:this.attr("").nullable(),updated_at:this.attr("").nullable(),name:this.attr("").nullable()}}static FetchAll(e=[],t={},r={},a={page:1,limit:15,filters:{},clearPrimaryModelOnly:!1}){return this.customSupabaseApiFetchAll(`${this.baseUrl}${this.entityUrl}`,[...this.parentWithables,...e],t,this.mergeHeaders(r),a,this)}static FetchById(e,t=[],r={},a={}){return this.customSupabaseApiFetchById(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Store(e,t=[],r={},a={}){return this.customSupabaseApiStore(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Update(e,t=[],r={},a={}){return this.customSupabaseApiUpdate(`${this.baseUrl}${this.entityUrl}`,e,[...this.parentWithables,...t],r,this.mergeHeaders(a),this)}static Delete(e,t={},r={}){return this.customSupabaseApiDelete(`${this.baseUrl}${this.entityUrl}`,e,t,this.mergeHeaders(r),this)}}d(he,"entity","tag"),d(he,"entityUrl","/api/tags"),d(he,"primaryKey","id"),d(he,"titleKey","id"),d(he,"entityHumanName","Tag"),d(he,"parentWithables",[]),d(he,"rules",{readables:()=>!0,readable:e=>!0,editable:e=>!0,creatable:()=>!!_.get("VITE_AUTH")}),d(he,"fieldsMetadata",{id:{},created_at:{autoFill(e){return e.created_at?e.created_at:new Date().toISOString().slice(0,19).replace("T"," ")}},updated_at:{autoFill(e){return new Date().toISOString().slice(0,19).replace("T"," ")}},name:{}});const I=new Re.Database;I.register(Ve);I.register(A);I.register(Ae);I.register(Ke);I.register(ne);I.register(Ve);I.register(H);I.register(K);I.register(W);I.register(de);I.register(N);I.register(Z);I.register(oe);I.register(ue);I.register(me);I.register(ce);I.register(B);I.register(ee);I.register(C);I.register(he);I.register(X);I.register(Q);I.register(G);I.register(Fe);I.register(ae);I.register(le);const ke=ta({plugins:[Re.install(I)]}),Cr=Object.freeze(Object.defineProperty({__proto__:null,default:ke},Symbol.toStringTag,{value:"Module"})),Hr=[{path:"/",component:()=>T(()=>import("./EmptyLayout.js"),__vite__mapDeps([3,1,2])),redirect:l=>"/guest-registration",meta:{requiresAuth:!1},children:[{path:"/login-old",name:"/login-old",component:()=>T(()=>import("./LoginPageOld.js"),__vite__mapDeps([4,1,2])),meta:{requiresAuth:!1}},{path:"guest-registration",component:()=>T(()=>import("./guestRegistration.js"),__vite__mapDeps([5,1,2,6])),meta:{requiresAuth:!1}},{path:"/",component:()=>T(()=>import("./MainLayout.js"),__vite__mapDeps([7,1,2])),redirect:l=>"/lists/events",children:[{path:"/login",name:"/login",component:()=>T(()=>import("./SigninView.js"),__vite__mapDeps([8,1,2])),meta:{requiresAuth:!1}},{path:"/register",name:"/register",component:()=>T(()=>import("./JoinView.js"),__vite__mapDeps([9,1,2])),meta:{requiresAuth:!1}},{path:"/about",name:"/about",component:()=>T(()=>import("./AboutController.js"),__vite__mapDeps([10,1,2])),meta:{breadcrumbName:"About",breadcrumbParentName:"",requiresAuth:!1}},{path:"/lists/attendances",name:"/lists/attendances",component:()=>T(()=>import("./AttendanceListController.js"),__vite__mapDeps([11,1,2,0,12])),meta:{breadcrumbName:"Attendances",breadcrumbParentName:"",requiresAuth:!1}},{path:"/lists/attendances/:rId/:rName",name:"/lists/attendances/:rId/:rName",component:()=>T(()=>import("./AttendanceReadController.js"),__vite__mapDeps([13,1,2,14,0])),meta:{breadcrumbName:":rName",breadcrumbParentName:"/lists/attendances",requiresAuth:!1}},{path:"/lists/children",name:"/lists/children",component:()=>T(()=>import("./ChildListController.js"),__vite__mapDeps([15,1,2,16,0])),meta:{breadcrumbName:"Children",breadcrumbParentName:"",requiresAuth:!1}},{path:"/lists/children/:rId/:rName",name:"/lists/children/:rId/:rName",component:()=>T(()=>import("./ChildReadController.js"),__vite__mapDeps([17,1,2,14,0])),meta:{breadcrumbName:":rName",breadcrumbParentName:"/lists/children",requiresAuth:!1}},{path:"/lists/events",name:"/lists/events",component:()=>T(()=>import("./EventListController.js"),__vite__mapDeps([18,1,2,0,12])),meta:{breadcrumbName:"Events",breadcrumbParentName:"",requiresAuth:!1}},{path:"/lists/events/:rId/:rName",name:"/lists/events/:rId/:rName",component:()=>T(()=>import("./EventReadController.js"),__vite__mapDeps([19,1,2,14,0,12])),meta:{breadcrumbName:":rName",breadcrumbParentName:"/lists/events",requiresAuth:!1}},{path:"/lists/failed-jobs",name:"/lists/failed-jobs",component:()=>T(()=>import("./FailedJobListController.js"),__vite__mapDeps([20,1,2,0])),meta:{breadcrumbName:"FailedJobs",breadcrumbParentName:"",requiresAuth:!1}},{path:"/lists/failed-jobs/:rId/:rName",name:"/lists/failed-jobs/:rId/:rName",component:()=>T(()=>import("./FailedJobReadController.js"),__vite__mapDeps([21,1,2,14,0])),meta:{breadcrumbName:":rName",breadcrumbParentName:"/lists/failed-jobs",requiresAuth:!1}},{path:"/lists/families",name:"/lists/families",component:()=>T(()=>import("./FamilyListController.js"),__vite__mapDeps([22,1,2,23,0])),meta:{breadcrumbName:"Families",breadcrumbParentName:"",requiresAuth:!1}},{path:"/lists/families/:rId/:rName",name:"/lists/families/:rId/:rName",component:()=>T(()=>import("./FamilyReadController.js"),__vite__mapDeps([24,1,2,14,0,25,16,26,12,27])),meta:{breadcrumbName:":rName",breadcrumbParentName:"/lists/families",requiresAuth:!1}},{path:"/lists/family-links",name:"/lists/family-links",component:()=>T(()=>import("./FamilyLinkListController.js"),__vite__mapDeps([28,1,2,26,0])),meta:{breadcrumbName:"FamilyLinks",breadcrumbParentName:"",requiresAuth:!1}},{path:"/lists/family-links/:rId/:rName",name:"/lists/family-links/:rId/:rName",component:()=>T(()=>import("./FamilyLinkReadController.js"),__vite__mapDeps([29,1,2,14,0])),meta:{breadcrumbName:":rName",breadcrumbParentName:"/lists/family-links",requiresAuth:!1}},{path:"/lists/migrations",name:"/lists/migrations",component:()=>T(()=>import("./MigrationListController.js"),__vite__mapDeps([30,1,2,0])),meta:{breadcrumbName:"Migrations",breadcrumbParentName:"",requiresAuth:!1}},{path:"/lists/migrations/:rId/:rName",name:"/lists/migrations/:rId/:rName",component:()=>T(()=>import("./MigrationReadController.js"),__vite__mapDeps([31,1,2,14,0])),meta:{breadcrumbName:":rName",breadcrumbParentName:"/lists/migrations",requiresAuth:!1}},{path:"/lists/password-reset-tokens",name:"/lists/password-reset-tokens",component:()=>T(()=>import("./PasswordResetTokenListController.js"),__vite__mapDeps([32,1,2,0])),meta:{breadcrumbName:"PasswordResetTokens",breadcrumbParentName:"",requiresAuth:!1}},{path:"/lists/password-reset-tokens/:rId/:rName",name:"/lists/password-reset-tokens/:rId/:rName",component:()=>T(()=>import("./PasswordResetTokenReadController.js"),__vite__mapDeps([33,1,2,14,0])),meta:{breadcrumbName:":rName",breadcrumbParentName:"/lists/password-reset-tokens",requiresAuth:!1}},{path:"/lists/personal-access-tokens",name:"/lists/personal-access-tokens",component:()=>T(()=>import("./PersonalAccessTokenListController.js"),__vite__mapDeps([34,1,2,0])),meta:{breadcrumbName:"PersonalAccessTokens",breadcrumbParentName:"",requiresAuth:!1}},{path:"/lists/personal-access-tokens/:rId/:rName",name:"/lists/personal-access-tokens/:rId/:rName",component:()=>T(()=>import("./PersonalAccessTokenReadController.js"),__vite__mapDeps([35,1,2,14,0])),meta:{breadcrumbName:":rName",breadcrumbParentName:"/lists/personal-access-tokens",requiresAuth:!1}},{path:"/lists/post-tags",name:"/lists/post-tags",component:()=>T(()=>import("./PostTagListController.js"),__vite__mapDeps([36,1,2,0])),meta:{breadcrumbName:"PostTags",breadcrumbParentName:"",requiresAuth:!1}},{path:"/lists/post-tags/:rId/:rName",name:"/lists/post-tags/:rId/:rName",component:()=>T(()=>import("./PostTagReadController.js"),__vite__mapDeps([37,1,2,14,0])),meta:{breadcrumbName:":rName",breadcrumbParentName:"/lists/post-tags",requiresAuth:!1}},{path:"/lists/posts",name:"/lists/posts",component:()=>T(()=>import("./PostListController.js"),__vite__mapDeps([38,1,2,0])),meta:{breadcrumbName:"Posts",breadcrumbParentName:"",requiresAuth:!1}},{path:"/lists/posts/:rId/:rName",name:"/lists/posts/:rId/:rName",component:()=>T(()=>import("./PostReadController.js"),__vite__mapDeps([39,1,2,14,0])),meta:{breadcrumbName:":rName",breadcrumbParentName:"/lists/posts",requiresAuth:!1}},{path:"/lists/school-family-enrollments",name:"/lists/school-family-enrollments",component:()=>T(()=>import("./SchoolFamilyEnrollmentListController.js"),__vite__mapDeps([40,1,2,25,0])),meta:{breadcrumbName:"SchoolFamilyEnrollments",breadcrumbParentName:"",requiresAuth:!1}},{path:"/lists/school-family-enrollments/:rId/:rName",name:"/lists/school-family-enrollments/:rId/:rName",component:()=>T(()=>import("./SchoolFamilyEnrollmentReadController.js"),__vite__mapDeps([41,1,2,14,0])),meta:{breadcrumbName:":rName",breadcrumbParentName:"/lists/school-family-enrollments",requiresAuth:!1}},{path:"/lists/jobs",name:"/lists/jobs",component:()=>T(()=>import("./JobListController.js"),__vite__mapDeps([42,1,2,43,0])),meta:{breadcrumbName:"Jobs",breadcrumbParentName:"",requiresAuth:!1}},{path:"/lists/jobs/:rId/:rName",name:"/lists/jobs/:rId/:rName",component:()=>T(()=>import("./JobReadController.js"),__vite__mapDeps([44,1,2,14,0])),meta:{breadcrumbName:":rName",breadcrumbParentName:"/lists/jobs",requiresAuth:!1}},{path:"/lists/schools",name:"/lists/schools",component:()=>T(()=>import("./SchoolListController.js"),__vite__mapDeps([45,46,1,2,0])),meta:{breadcrumbName:"Schools",breadcrumbParentName:"",requiresAuth:!1}},{path:"/lists/schools/:rId/:rName",name:"/lists/schools/:rId/:rName",component:()=>T(()=>import("./SchoolReadController.js"),__vite__mapDeps([47,1,2,14,0])),meta:{breadcrumbName:":rName",breadcrumbParentName:"/lists/schools",requiresAuth:!1}},{path:"/lists/tags",name:"/lists/tags",component:()=>T(()=>import("./TagListController.js"),__vite__mapDeps([48,1,2,0])),meta:{breadcrumbName:"Tags",breadcrumbParentName:"",requiresAuth:!1}},{path:"/lists/tags/:rId/:rName",name:"/lists/tags/:rId/:rName",component:()=>T(()=>import("./TagReadController.js"),__vite__mapDeps([49,1,2,14,0])),meta:{breadcrumbName:":rName",breadcrumbParentName:"/lists/tags",requiresAuth:!1}},{path:"/lists/users",name:"/lists/users",component:()=>T(()=>import("./UserListController.js"),__vite__mapDeps([50,1,2,0])),meta:{breadcrumbName:"Users",breadcrumbParentName:"",requiresAuth:!1}},{path:"/lists/users/:rId/:rName",name:"/lists/users/:rId/:rName",component:()=>T(()=>import("./UserReadController.js"),__vite__mapDeps([51,1,2,14,0,26,43,27,23,46])),meta:{breadcrumbName:":rName",breadcrumbParentName:"/lists/users",requiresAuth:!1}}],meta:{requiresAuth:!1}}]},{path:"/:catchAll(.*)*",component:()=>T(()=>import("./ErrorNotFound.js"),__vite__mapDeps([52,1,2])),meta:{requiresAuth:!1}}],Pe=aa(function(){const e=la({scrollBehavior:()=>({left:0,top:0}),routes:Hr,history:ra("/")});return e.beforeEach((t,r,a)=>{const s=_.get("VITE_AUTH");t.matched.some(i=>i.meta.requiresAuth!==!1)&&!(s!=null&&s.user)?a({path:"/login"}):a()}),e});async function Lr(l,e){const t=l(ca);t.use(sa,e);const r=typeof ke=="function"?await ke({}):ke,{storeKey:a}=await T(async()=>{const{storeKey:n}=await Promise.resolve().then(()=>Cr);return{storeKey:n}},void 0),s=ia(typeof Pe=="function"?await Pe({store:r}):Pe);return r.$router=s,{app:t,store:r,storeKey:a,router:s}}const Wr={config:{brand:{}}},Kr="/";async function qr({app:l,router:e,store:t,storeKey:r},a){let s=!1;const n=c=>{try{return e.resolve(c).href}catch{}return Object(c)===c?null:c},i=c=>{if(s=!0,typeof c=="string"&&/^https?:\/\//.test(c)){window.location.href=c;return}const f=n(c);f!==null&&(window.location.href=f,window.location.reload())},u=window.location.href.replace(window.location.origin,"");for(let c=0;s===!1&&c<a.length;c++)try{await a[c]({app:l,router:e,store:t,ssrContext:null,redirect:i,urlPath:u,publicPath:Kr})}catch(f){if(f&&f.url){i(f.url);return}console.error("[Quasar] boot error:",f);return}s!==!0&&(l.use(e),l.use(t,r),l.mount("#q-app"))}Lr(na,Wr).then(l=>{const[e,t]=Promise.allSettled!==void 0?["allSettled",r=>r.map(a=>{if(a.status==="rejected"){console.error("[Quasar] boot error:",a.reason);return}return a.value.default})]:["all",r=>r.map(a=>a.default)];return Promise[e]([T(()=>import("./qcalendar.js"),__vite__mapDeps([53,1,2])),T(()=>import("./store.js"),__vite__mapDeps([54,1,2])),T(()=>import("./vuex-orm-axios.js"),__vite__mapDeps([55,1,2]))]).then(r=>{const a=t(r).filter(s=>typeof s=="function");qr(l,a)})});export{H as A,K as C,ht as D,W as E,N as F,te as H,ee as J,oe as M,ue as P,pe as Q,Oe as R,Ae as S,he as T,A as U,O as _,C as a,de as b,Z as c,xe as d,je as e,Gr as f,zr as g,lr as h,ct as i,ut as j,ot as k,ql as l,Gl as m,$l as n,ve as o,B as p,me as q,ce as r,ke as s,ne as t,Yr as u};

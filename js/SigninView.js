import{V as g,e as n,d as w,x as r,F as h,z as l,J as V,W as S,X as u,K as p,O as c,I as d,Y as f,Z as _,_ as b,T as x}from"./vendor.js";import{_ as y,S as m}from"./index.js";const k={name:"SigninView",data(){return{form:{email:"",password:""},loading:!1,emailRule:t=>!!t||"Email is required"}},computed:{loginSession(){return m.query().withAllRecursive().first()}},methods:{submit(){m.deleteAll(),this.loading=!0,m.signIn(this.form).then(t=>{const e=t.response.data,a=new Date;a.setDate(a.getDate()+7),e.expireDate=a.toISOString(),g.set("VITE_AUTH",e,"7d"),this.$router.push({path:"/"}),this.loading=!1}).catch(()=>{this.loading=!1})}},mounted(){}},D=d("div",{class:"text-h6"},"Login",-1),q={class:"q-mt-md text-center"};function v(t,e,a,B,s,i){return n(),w(h,{class:"q-pa-md flex flex-center"},{default:r(()=>[l(x,{class:"q-pa-md"},{default:r(()=>[l(V,{onSubmit:S(i.submit,["prevent"])},{default:r(()=>[D,i.loginSession?(n(),u(f,{key:1},[_(" Welcome "),d("b",null,b(i.loginSession.user.email),1)],64)):(n(),u(f,{key:0},[l(p,{modelValue:s.form.email,"onUpdate:modelValue":e[0]||(e[0]=o=>s.form.email=o),label:"Email",type:"email",outlined:"",dense:"",rules:[s.emailRule],autocomplete:"email",name:"email"},null,8,["modelValue","rules"]),l(p,{modelValue:s.form.password,"onUpdate:modelValue":e[1]||(e[1]=o=>s.form.password=o),label:"Password",type:"password",outlined:"",dense:"",autocomplete:"password",name:"password"},null,8,["modelValue"]),l(c,{type:"submit",block:"",class:"q-mt-md full-width",loading:s.loading,label:"Login",color:"primary"},null,8,["loading"]),d("div",q,[l(c,{label:"Register",class:"full-width",outline:"",color:"primary",onClick:e[2]||(e[2]=o=>t.$router.push({path:"register"}))})])],64))]),_:1},8,["onSubmit"])]),_:1})]),_:1})}const C=y(k,[["render",v],["__file","SigninView.vue"]]);export{C as default};

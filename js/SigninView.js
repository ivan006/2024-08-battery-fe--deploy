import{aB as d,e as r,c as w,w as m,aN as _,m as a,k as l,aP as h,a6 as V,j as u,aQ as c,aS as p,a1 as f,l as S,t as b,aT as x}from"./vendor.js";import{_ as k,S as g}from"./index.js";const v={name:"SigninView",data(){return{form:{email:"",password:""},loading:!1,emailRule:s=>!!s||"Email is required"}},computed:{loginSession(){return g.query().withAllRecursive().first()},session(){return d.get("VITE_AUTH")}},methods:{submit(){this.loading=!0,g.signIn(this.form).then(s=>{const e=s.response.data,t=new Date;t.setDate(t.getDate()+7),e.expireDate=t.toISOString(),d.set("VITE_AUTH",e,"7d"),this.loading=!1,window.location.href="/"}).catch(()=>{this.loading=!1})}},mounted(){}},y={class:"row q-col-gutter-md"},q=a("div",{class:"col-xl-3 col-md-3 col-sm-12 col-xs-12"},null,-1),D={class:"col-xl-6 col-md-6 col-sm-12 col-xs-12"},B=a("div",{class:"text-h6 q-mb-md"},"Login",-1),Q={class:"q-mt-md text-center"};function T(s,e,t,E,o,n){return r(),w(_,{class:"q-pa-md"},{default:m(()=>[a("div",y,[q,a("div",D,[l(x,{class:"q-pa-md"},{default:m(()=>[l(h,{onSubmit:V(n.submit,["prevent"])},{default:m(()=>[B,n.session?(r(),u(f,{key:1},[S(" Welcome "),a("b",null,b(n.loginSession.user.email),1)],64)):(r(),u(f,{key:0},[l(c,{modelValue:o.form.email,"onUpdate:modelValue":e[0]||(e[0]=i=>o.form.email=i),label:"Email",type:"email",outlined:"",dense:"",rules:[o.emailRule],autocomplete:"email",name:"email"},null,8,["modelValue","rules"]),l(c,{modelValue:o.form.password,"onUpdate:modelValue":e[1]||(e[1]=i=>o.form.password=i),label:"Password",type:"password",outlined:"",dense:"",autocomplete:"password",name:"password"},null,8,["modelValue"]),l(p,{type:"submit",block:"",class:"q-mt-md full-width",loading:o.loading,label:"Login",color:"primary"},null,8,["loading"]),a("div",Q,[l(p,{label:"Register",class:"full-width",outline:"",color:"primary",onClick:e[2]||(e[2]=i=>s.$router.push({path:"register"}))})])],64))]),_:1},8,["onSubmit"])]),_:1})])])]),_:1})}const N=k(v,[["render",T],["__file","SigninView.vue"]]);export{N as default};
